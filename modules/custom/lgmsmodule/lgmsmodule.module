<?php
use Drupal\Core\Entity\Display\EntityFormDisplayInterface;

use Drupal\Core\Form\FormStateInterface;
use Drupal\Core\Render\Element;
use Drupal\Component\Plugin\Exception\InvalidPluginDefinitionException;
use Drupal\Component\Plugin\Exception\PluginNotFoundException;
use Drupal\Component\Serialization\Json;
use Drupal\Core\Entity\Display\EntityViewDisplayInterface;
use Drupal\Core\Entity\Entity\EntityFormDisplay;
use Drupal\Core\Entity\Entity\EntityViewDisplay;
use Drupal\Core\Entity\EntityInterface;
use Drupal\Core\Entity\EntityStorageException;
use Drupal\Core\Link;
use Drupal\Core\Url;
use Drupal\field\Entity\FieldConfig;
use Drupal\field\Entity\FieldStorageConfig;
use Drupal\link\LinkItemInterface;
use Drupal\node\Entity\Node;
use Drupal\node\Entity\NodeType;
use Drupal\node\NodeInterface;
use Drupal\taxonomy\Entity\Vocabulary;
use Drupal\taxonomy\Entity\Term;
use Drupal\Core\Field\FieldStorageDefinitionInterface;
use Drupal\views\Entity\View;

/**
 * This is executed when a node is created or updated.
 * This is used to generate URL aliases for guide and page nodes.
 * @param \Drupal\node\NodeInterface $node
 *   The node that is being inserted or updated.
 */
function lgmsmodule_generate_url_alias(NodeInterface $node) {
  // Alias generation for 'guide' content type remains the same.
  if ($node->getType() == 'guide') {
    $alias = '/' . strtolower(preg_replace('/[^a-z0-9]+/i', '-', $node->getTitle()));
  }
  // Alias generation for 'page' content type needs to reflect the parent-child relationship.
  elseif ($node->getType() == 'guide_page') {
    // Load the parent guide node.
    $parent_guide = $node->get('field_parent_guide')->entity;
    if ($parent_guide->bundle() == 'guide') {
      // Construct the alias using the parent guide's title and the page's title.
      $parent_alias = strtolower(preg_replace('/[^a-z0-9]+/i', '-', $parent_guide->getTitle()));
      $child_alias = strtolower(preg_replace('/[^a-z0-9]+/i', '-', $node->getTitle()));
      $alias = '/' . $parent_alias . '/' . $child_alias;
    } else if ($parent_guide->bundle() == 'guide_page'){
      $grand_parent_alies = strtolower(preg_replace('/[^a-z0-9]+/i', '-', $parent_guide->get('field_parent_guide')->entity->getTitle()));
      $parent_alias = strtolower(preg_replace('/[^a-z0-9]+/i', '-', $parent_guide->getTitle()));
      $child_alias = strtolower(preg_replace('/[^a-z0-9]+/i', '-', $node->getTitle()));
      $alias = '/' . $grand_parent_alies . '/' . $parent_alias . '/' . $child_alias;
    } else {
      // If there's no parent guide, fallback to just using the page title.
      $alias = '/' . strtolower(preg_replace('/[^a-z0-9]+/i', '-', $node->getTitle()));
    }
  } else {
    // If the content type is neither 'guide' nor 'page', do nothing.
    return;
  }

  // Trim leading or trailing hyphens from the alias.
  $alias = trim($alias, '-');

  // Check if the alias already exists.
  $path_alias_repository = \Drupal::service('path_alias.repository');
  $existing_alias = $path_alias_repository->lookupByAlias($alias, $node->language()->getId());

  // If the alias does not exist or it's not the current node's alias, create or update it.
  if (!$existing_alias || $existing_alias['path'] !== '/node/' . $node->id()) {
    // Create a new alias or update the existing one.
    $path_alias_storage = \Drupal::entityTypeManager()->getStorage('path_alias');
    $path_alias = $path_alias_storage->create([
      'path' => '/node/' . $node->id(),
      'alias' => $alias,
      'langcode' => $node->language()->getId(),
    ]);
    $path_alias->save();
  }
}

/**
 * Creates a taxonomy vocabulary if it doesn't already exist.
 *
 * @param string $vid The machine name of the vocabulary.
 * @param string $name The human-readable name of the vocabulary.
 * @param string $description The description of the vocabulary.
 * @return void
 * @throws EntityStorageException
 */
function create_vocab(string $vid, string $name, string $description): void {
  $vocabulary = Vocabulary::create([
    'vid' => $vid,
    'name' => $name,
    'description' => $description,
  ]);
  $vocabulary->save();
}


/**
 * Adds terms to a taxonomy vocabulary if they don't already exist.
 *
 * @param array $terms The terms to add.
 * @param string $vid The machine name of the vocabulary.
 * @return void
 * @throws EntityStorageException
 */
function add_terms(array $terms, string $vid): void {
  foreach ($terms as $term_name) {
    $new_term = Term::create([
      'vid' => $vid,
      'name' => $term_name,
    ]);
    $new_term->enforceIsNew();
    $new_term->save();
  }
}


/**
 * Helper function to create content types.
 * @throws EntityStorageException
 */
function createContentType($id, $name, $desc = ''): void
{
  $type = NodeType::load($id);
  if (!$type) {
    $type = NodeType::create([
      'type' => $id,
      'name' => $name,
      'description' => $desc,
    ]);
    $type->save();
  }
}

/**
 * Helper function to create fields.
 * @throws EntityStorageException
 */
function createField($field_id, $entity_type, $bundle, $field_name, $field_type, $storage_settings, $field_settings, $widget_type, $widget_settings, $status, $cardinal, $field_weight, $desc, $required = True): void {
  // Create field storage.
  $storage = FieldStorageConfig::loadByName($entity_type, $field_id);
  if (!$storage) {
    $storage = FieldStorageConfig::create([
      'field_name' => $field_id,
      'entity_type' => $entity_type,
      'type' => $field_type,
      'settings' => $storage_settings ?? [],
    ]);

    if ($cardinal){
      $storage->setCardinality(FieldStorageDefinitionInterface::CARDINALITY_UNLIMITED);
    }

    $storage->save();
  }

  // Create field.
  $field = FieldConfig::loadByName($entity_type, $bundle, $field_id);
  if (!$field) {
    $field = FieldConfig::create([
      'field_storage' => $storage,
      'bundle' => $bundle,
      'label' => $field_name,
      'required' => $required, // Set the field required status based on the function parameter.
      'settings' => $field_settings ?? [],
    ]);

    if (!empty($desc)){
      $field->setDescription($desc);
    }
    $field->save();

    // Configure form display.
    $form_display = EntityFormDisplay::load($entity_type . '.' . $bundle . '.default');
    if (!$form_display) {
      $form_display = EntityFormDisplay::create([
        'targetEntityType' => $entity_type,
        'bundle' => $bundle,
        'mode' => 'default',
        'status' => TRUE,
      ]);
    }
    $form_display->setComponent($field_id, [
      'type' => $widget_type,
      'settings' => $widget_settings,
      'weight'=> $field_weight,
    ])->save();

    // Configure view display.
    $view_display = EntityViewDisplay::load($entity_type . '.' . $bundle . '.default');
    if (!$view_display) {
      $view_display = EntityViewDisplay::create([
        'targetEntityType' => $entity_type,
        'bundle' => $bundle,
        'mode' => 'default',
        'status' => TRUE,
      ]);
    }

    // Remove the field from the view display if not needed.
    if ($view_display->getComponent($field_id)) {
      $view_display->removeComponent($field_id);
      $view_display->save();
    }
  }
}

/**
 * This is executed when a node is created
 * Implements hook_node_insert().
 */
function lgmsmodule_node_insert(NodeInterface $node): void
{
  lgmsmodule_refresh_cache($node);
  lgmsmodule_generate_url_alias($node);
}

/**
 * Implements hook_entity_delete().
 */
function lgmsmodule_entity_delete(EntityInterface $entity): void
{
  if ($entity->getEntityTypeId() == 'node' && $entity->bundle() == 'guide_page') {
    $deleted_guide_page_id = $entity->id();

    $query = \Drupal::entityQuery('node')
      ->condition('type', 'guide_page')
      ->condition('field_reference_node', $deleted_guide_page_id)
      ->accessCheck(false);
    $result = $query->execute();

    // Load and update the referencing guide pages.
    if (!empty($result)) {
      $referencing_guide_pages = Node::loadMultiple($result);
      foreach ($referencing_guide_pages as $page) {
        $page->delete();
      }
    }
  }
}

/**
 * This is executed when a node is updated
 * Implements hook_node_update().
 */
function lgmsmodule_node_update(NodeInterface $node): void
{

  if($node->bundle() === 'guide_page'){
    // Check if the entity is a 'guide_page' and has the field 'field_reference_node'.
    if ($node->getEntityTypeId() === 'node' && $node->bundle() === 'guide_page' && $node->hasField('field_reference_node')) {
      // Proceed to update referencing guide pages.
      update_referencing_guide_pages($node);
    }
  }

  if (($node->bundle() === 'guide' || $node->bundle() === 'guide_page') && !$node->isPublished()){
    // do not unpublish it's children if it is a reference.
    if (!$node->hasField('field_reference_node') || $node->get('field_reference_node')->isEmpty()){
      unpublished_child_pages($node);
    }
  }

  lgmsmodule_refresh_cache($node);
}

function unpublished_child_pages(NodeInterface $page) {
  unpublished_child_boxes($page);

  $child_pages = $page->get('field_child_pages')->referencedEntities();

  foreach ($child_pages as $child) {
    unpublished_child_pages($child);
    $child->setUnpublished();
    $child->save();
  }
}

function unpublished_child_boxes(NodeInterface $page) {
  $child_boxes = $page->get('field_child_boxes')->referencedEntities();

  foreach ($child_boxes as $box){
    if ($box){
      $box->setUnpublished();
      $box->save();
    }
  }
}

/**
 * Helper function to refresh cache.
 */
function lgmsmodule_refresh_cache(NodeInterface $node): void
{
  if ($node->bundle() === 'guide_box') {
    // Get the 'parent_page' ID from the 'guide_box'
    $parent_page_id = $node->get('field_parent_node')->target_id;

    // Clear the cache of the page
    if ($parent_page_id) {
      $custom_cache_tag = 'lgmsmodule_node_view:' . $parent_page_id;
      \Drupal::service('cache_tags.invalidator')->invalidateTags([$custom_cache_tag]);
    }

    // Clear the cache of the guide
    $parent_page = Node::load($parent_page_id);

    if ($parent_page){
      lgmsmodule_refresh_cache($parent_page);
    }
  } elseif ($node->bundle() === 'guide_page') {
    // Invalidate cache for 'guide_page' as before
    $parent_guide_id = $node->get('field_parent_guide')->target_id;

    if ($parent_guide_id) {
      $custom_cache_tag = 'lgmsmodule_node_view:' . $parent_guide_id;
      \Drupal::service('cache_tags.invalidator')->invalidateTags([$custom_cache_tag]);
    }
  }
}

function unpublished_status(EntityInterface $node)
{
  if(!$node->isPublished()){
   return 'node--unpublished';
  }

  return '';
}

function build_item(EntityInterface $entity, EntityInterface $box, EntityInterface $item): array
{
  $unpublished_class = unpublished_status($item);
  if($unpublished_class != '' && !\Drupal::currentUser()->isAuthenticated()){
    return [];
  }

  $item_container = [
    '#type' => 'container',
    '#attributes' => ['class' => ['guide-item', $unpublished_class]],
  ];

  $edit_route = '';
  $delete_route = '';

  if ($item->hasField('field_html_item') && !$item->get('field_html_item')->isEmpty()) {
    $html_item = $item->get('field_html_item')->entity;

    $html_unpublished_class = unpublished_status($html_item);
    if($html_unpublished_class != '' && !\Drupal::currentUser()->isAuthenticated()){
      return [];
    }

    $item_container['#attributes']['class'][] = $html_unpublished_class;

    $item_container['content'][] = html_display($html_item, false);

    $edit_route = 'AddHTMLForm';
    $delete_route = 'delete_html.form';
  } elseif ($item->hasField('field_book_item') && !$item->get('field_book_item')->isEmpty()) {
    $book_item = $item->get('field_book_item')->entity;

    $book_unpublished_class = unpublished_status($book_item);
    if($book_unpublished_class != '' && !\Drupal::currentUser()->isAuthenticated()){
      return [];
    }

    $item_container['#attributes']['class'][] = $book_unpublished_class;

    $item_container['content'][] = book_display($book_item, false);

    $edit_route = 'AddBookForm';
    $delete_route = 'delete_book.form';
  } elseif ($item->hasField('field_database_item') && !$item->get('field_database_item')->isEmpty()) {
    $database = $item->get('field_database_item')->entity;

    $database_unpublished_class = unpublished_status($database);
    if($database_unpublished_class != '' && !\Drupal::currentUser()->isAuthenticated()){
      return [];
    }

    $item_container['#attributes']['class'][] = $database_unpublished_class;

    $link = $database->get('field_database_link')->first();

    $html_content = '<div> <a href="' . $link->uri . '">' . $link->title . '</a>';

    if (!$database->get('field_hide_description')->value) {
      $description = $database->get('field_description')->value;
      // Append description to the HTML content, ensuring it's on the same line.
      $html_content .= ' â€” ' . $description;
    }

    // Close the HTML tags.
    $html_content .= '</div>';

    // Add the combined content to the item container.
    $item_container['content'][] = [
      '#type' => 'markup',
      '#markup' => $html_content,
    ];

    if(!$database->get('field_hide_body')->value){
      $item_container['content'][] = [
        '#type' => 'markup',
        '#markup' => $database->get('field_database_body')->value,
      ];
    }

    $edit_route = 'AddDatabaseForm';
    $delete_route = 'delete_database.form';
  } elseif ($item->hasField('field_media_image') && !$item->get('field_media_image')->isEmpty()) {
    $media = $item->get('field_media_image')->entity;
    $media_type = $media->bundle();

    $media_unpublished_class = unpublished_status($media);
    if($media_unpublished_class != '' && !\Drupal::currentUser()->isAuthenticated()){
      return [];
    }

    $item_container['#attributes']['class'][] = $media_unpublished_class;

    //$media_item = \Drupal::entityTypeManager()->getViewBuilder('media')->view($media, 'full');

    switch ($media_type) {
      case 'image':
        $file = $media->get('field_media_image')->entity;
        if ($file) {
          $image_url = \Drupal\image\Entity\ImageStyle::load('thumbnail')->buildUrl($file->getFileUri());
          $item_container['content'][] = [
            '#type' => 'html_tag',
            '#tag' => 'img',
            '#attributes' => ['src' => $image_url],
          ];
        }
        break;
      case 'video':
        $video_file = $media->get('field_media_video_file')->entity;
        if ($video_file) {
          // Get the URI of the video file
          $video_uri = $video_file->getFileUri();
          // Convert the URI to a URL
          $stream_wrapper_manager = \Drupal::service('stream_wrapper_manager');
          $video_url = $stream_wrapper_manager->getViaUri($video_uri)->getExternalUrl();
          // Add video rendering logic here
          $item_container['content'][] = [
            '#type' => 'html_tag',
            '#tag' => 'video',
            '#attributes' => [
              'src' => $video_url,
              'controls' => true,
              'width' => '640', // Adjust the width as necessary
              'height' => '360', // Adjust the height as necessary
            ],
            '#value' => t('Your browser does not support the video tag.'),
          ];
        }
        break;
      case 'remote_video':
        $standard_video_url = $media->get('field_media_oembed_video')->value;
        parse_str(parse_url($standard_video_url, PHP_URL_QUERY), $query);
        $video_id = $query['v'];
        $embed_url = "https://www.youtube.com/embed/{$video_id}";
        $item_container['content'][] = [
          '#type' => 'html_tag',
          '#tag' => 'iframe',
          '#attributes' => [
            'src' => $embed_url,
            'frameborder' => '0',
            'allowfullscreen' => 'allowfullscreen',
            'width' => '640',
            'height' => '360',
          ],
        ];
        break;
      case 'audio':
        // Similar handling for audio files
        $audio_file = $media->get('field_media_audio_file')->entity;
        if ($audio_file) {
          // Get the URI of the audio file
          $audio_uri = $audio_file->getFileUri();
          // Convert the URI to a URL
          $stream_wrapper_manager = \Drupal::service('stream_wrapper_manager');
          $audio_url = $stream_wrapper_manager->getViaUri($audio_uri)->getExternalUrl();
          // Add audio rendering logic here
          $item_container['content'][] = [
            '#type' => 'html_tag',
            '#tag' => 'audio',
            '#attributes' => [
              'src' => $audio_url,
              'controls' => 'controls',
            ],
            '#attached' => [
              'library' => [
                'core/html5shiv',
              ],
            ],
          ];
        }
        break;
      case 'document':
        // Handling for generic file downloads
        $file = $media->get('field_media_document')->entity;
        if ($file) {
          $file_uri = $file->getFileUri();
          $file_url = \Drupal::service('stream_wrapper_manager')->getViaUri($file_uri)->getExternalUrl();
          $item_container['content'][] = [
            '#type' => 'link',
            '#title' => $item->label() != 'Media Item'? $item->label(): $file->label(),
            '#url' => Url::fromUri($file_url),
            '#attributes' => ['target' => '_blank'],
          ];
        }
        break;
      default:
        // Default case to handle any other media types not explicitly covered above
        // For example, you might simply display the media name or a generic icon
        $item_container['content'][] = ['#markup' => $media->label()];
        print_r('url ');
        break;
    }

    $edit_route = 'add_media.form';
    $delete_route = 'delete_media.form';
  }

  if(!empty($edit_route) && !empty($delete_route) && (($item->access('update') && (!$entity->hasField('field_reference_node') || $entity->get('field_reference_node')->isEmpty()) && $entity->id() === $box->get('field_parent_node')->entity->id()) || ($entity->id() == $box->id()))) {
    if ($box->id() === $item->get('field_parent_box')->entity->id()){
      $ids = [ 'current_node' => $entity->id(), 'current_box' => $box->id(), 'current_item' => $item->id()];
      $json_data = json_encode($ids);
      $ids = urlencode($json_data);

      $url = '';

      if ($edit_route == 'AddHTMLForm'){
        $array_of_objects = [(object)['name' => 'Edit HTML', 'form' => $edit_route]];
        $json_data = json_encode($array_of_objects);
        $query_param = urlencode($json_data);
        $url =  Url::fromRoute('lgmsmodule.popup_modal', [], ['query' => ['ids' => $ids, 'forms' => $query_param]]);
      }
      else if($edit_route == 'AddBookForm'){
        $array_of_objects = [(object)['name' => 'Edit Book', 'form' => $edit_route]];
        $json_data = json_encode($array_of_objects);
        $book_query_param = urlencode($json_data);
        $url =  Url::fromRoute('lgmsmodule.popup_modal', [], ['query' => ['ids' => $ids, 'forms' => $book_query_param]]);
      }
      else if($edit_route == 'AddDatabaseForm'){
        $array_of_objects = [(object)['name' => 'Edit Database', 'form' => $edit_route]];
        $json_data = json_encode($array_of_objects);
        $book_query_param = urlencode($json_data);
        $url =  Url::fromRoute('lgmsmodule.popup_modal', [], ['query' => ['ids' => $ids, 'forms' => $book_query_param]]);
      }
      else {
        $url = Url::fromRoute($edit_route, [], ['query' => [
          'current_node' => $entity->id(),
          'current_box' => $box->id(),
          'current_item' => $item->id()]
        ]);
      }

      if (!$item->get('field_lgms_reference')->value) {

        $edit_link = [
          '#type' => 'link',
          '#title' => [
            '#type' => 'html_tag',
            '#tag' => 'i',
            '#attributes' => [
              'class' => ['fa', 'fa-edit', 'edit-icon'],
              'style' => 'margin-left: 5px',
            ],
          ],
          '#url' => $url,
          '#attributes' => [
            'class' => ['use-ajax'],
            'data-dialog-type' => 'modal',
            'data-dialog-options' => Json::encode(['width' => 800]),
            'title' => 'Edit Item',
            'style' => 'text-decoration: none;',
          ],
        ];

        $item_container['edit_link'] = $edit_link;

      }
    }

    $url = Url::fromRoute($delete_route, [], ['query' => [
      'current_node' => $entity->id(),
      'current_box' => $box->id(),
      'current_item' => $item->id()]
    ]);

    $delete_link = [
      '#type' => 'link',
      '#title' => [
        '#type' => 'html_tag',
        '#tag' => 'i',
        '#attributes' => [
          'class' => ['fa', 'fa-trash', 'close-icon'],
        ],
      ],
      '#url' => $url,
      '#attributes' => [
        'class' => ['use-ajax'],
        'data-dialog-type' => 'modal',
        'data-dialog-options' => Json::encode(['width' => 800]),
        'title' => 'Delete Item',
        'style' => 'text-decoration: none;',
      ],
    ];
    $item_container['delete_link'] = $delete_link;
  }

  return $item_container;
}

function database_display(EntityInterface $entity){
  $build['db_title'] = [
    '#type' => 'markup',
    '#markup' => t('<h1><strong>'.$entity->label() . '</h1></strong>'),
  ];

  if (!$entity->get('field_database_link')->isEmpty()) {
    // Fetch the first item of the field_database_link field
    $link_item = $entity->get('field_database_link')->first();

    // Get the URL from the link field
    $url = $link_item->uri;

    // Get the link title (text) from the link field, fall back to the URL if the title is empty
    $link_text = $link_item->title ?: $url;

    $build['db_link'] = [
      '#type' => 'markup',
      '#markup' => '<h3><div class="link-icon"><i class="fa fa-link" aria-hidden="true"></i> <a href="' . $url . '">' . $link_text . '</a></div></h3>',
    ];

  }

  if (!$entity->get('field_description')->isEmpty()) {
    $desc_value = $entity->get('field_description')->value;
    $build['db_desc'] = [
      '#type' => 'markup',
      '#markup' => '<div> - ' . $desc_value . '</div><br>',
    ];
  }

  if (!$entity->get('field_database_body')->isEmpty()) {
    $body_value = $entity->get('field_database_body')->value;
    $build['db_body'] = [
      '#type' => 'markup',
      '#markup' => '<div>' . $body_value . '</div>',
    ];
  }

  return $build;
}

function html_display(EntityInterface $entity, bool $include_title = true){
  if($include_title){
    $build['html_title'] = [
      '#type' => 'markup',
      '#markup' => t('<h1><strong>'.$entity->label() . '</h1></strong>'),
    ];
  }

  if (!$entity->get('field_text_box_item2')->isEmpty()) {
    $fullText = $entity->get('field_text_box_item2')->value;

    $breakPoint = $include_title? 150 : 105; // The point at which to insert the line break

    // Check if the text is longer than your breakpoint
    if (strlen($fullText) > $breakPoint) {
      // Insert a line break at the specified breakpoint
      $textWithBreak = wordwrap($fullText, $breakPoint, "\n", true);
    } else {
      // If not longer, use the text as is
      $textWithBreak = $fullText;
    }

    $build['html_body'][] = [
      '#type' => 'processed_text',
      '#text' => $textWithBreak,
      '#format' => $entity->get('field_text_box_item2')->format,
    ];
  }

  return $build;
}

function book_display(EntityInterface $entity , bool $include_title = true){
  if($include_title){
    $build['book_title'] = [
      '#type' => 'markup',
      '#markup' => t('<h1><strong>Book: '.$entity->label() . '</h1></strong>'),
    ];
  }

  $build['book_container'] = [
    '#type' => 'html_tag',
    '#tag' => 'div',
    '#attached' => [
      'library' => [
        'lgmsmodule/lgmsmodule',
      ],
    ],
    '#attributes' => [
      'class' => 'book-container',
    ],
  ];

  $cover_picture = $entity->get('field_book_cover_picture')?->entity;
  $cover_picture_uri = $cover_picture?->getFileUri();
  if($cover_picture_uri) {
    $build['book_container']['image'] = [
      '#type' => 'container',
      '#attributes' => [
        'class' => 'book-cover-picture-container',
      ],
    ];

    $build['book_container']['image'][] = [
      '#theme' => 'image',
      '#uri' => $cover_picture_uri,
      '#attributes' => [
        'class' => 'book-cover-picture'
      ],
    ];
  }

  $build['book_container']['details'] = [
    '#type' => 'container', // Using a container for the render array
    '#attributes' => [
      'class' => 'book-details', // Render array takes remaining space
    ],
  ];

  $build['book_container']['details'][] = [
    '#type' => 'html_tag',
    '#tag' => 'div',
    '#value' => $entity->get('field_book_author_or_editor')->value . '.  ' . $entity->get('field_book_year')->value
      . '. <strong>' . $entity->get('title')->value . '. </strong> ' . $entity->get('field_book_edition')->value .' Edition. '
      . $entity->get('field_book_publisher')->value
    ,
  ];

  if($entity->get('field_book_type')->value == 'print') {
    $build['book_container']['details'][] = [
      '#type' => 'html_tag',
      '#tag' => 'div',
      '#value' => $entity->get('field_book_location')->value . '. ' . $entity->get('field_book_call_number')->value,
    ];

    $build['book_container']['details'][] = [
      '#markup' => '<div><a href="' . $entity->get('field_book_cat_record')->uri . '">' . $entity->get('field_book_cat_record')->title . '</a></div>'
    ];
  }
  else {
    $build['book_container']['details'][] = [
      '#markup' => '<div> <a href="' . $entity->get('field_book_pub_finder')->uri . '">' . $entity->get('field_book_pub_finder')->title . '</a></div>'
    ];
  }

  $build['book_container']['details'][] = [
    '#type' => 'processed_text',
    '#text' => $entity->get('field_book_description')->value,
    '#format' => $entity->get('field_book_description')->format,
  ];


  return $build;
}

function box_display(EntityInterface $entity, EntityInterface $box)
{
  $unpublished_class = '';
  if(!$box->isPublished()){
    if(!\Drupal::currentUser()->isAuthenticated()){
      return [];
    }
    $unpublished_class = 'node--unpublished';
  }

  $items = $box->get('field_box_items')->referencedEntities();

  $guide_box_build['items'] = [
    '#type' => 'container',
    '#attributes' => ['class' => ['guide-box-items-container']],
  ];

  foreach ($items as $item) {
    // Add the item container to the guide box items.
    $guide_box_build['items'][] = build_item($entity, $box, $item);
  }

  $ids = ['current_box' => $box->id(), 'current_node' => $entity->id()];
  $json_data = json_encode($ids);
  $ids = urlencode($json_data);

  $array_of_objects = [(object)['name' => 'Add HTML', 'form' => 'AddHTMLForm'],(object) ['name' => 'Reuse HTML', 'form' => 'ReuseHTMLItemForm']];
  $json_data = json_encode($array_of_objects);
  $html_query_param = urlencode($json_data);

  $array_of_objects = [(object)['name' => 'Add Book', 'form' => 'AddBookForm'],(object) ['name' => 'Reuse Book', 'form' => 'ReuseBookForm']];
  $json_data = json_encode($array_of_objects);
  $book_query_param = urlencode($json_data);

  $array_of_objects = [(object)['name' => 'Add Database', 'form' => 'AddDatabaseForm'],(object) ['name' => 'Reuse Database', 'form' => 'ReuseDatabaseForm']];
  $json_data = json_encode($array_of_objects);
  $database_query_param = urlencode($json_data);

  if($entity->access('update') && $box->access('update') && (($box->get('field_parent_node')->entity->id() == $entity->id()) || $entity->id() == $box->id()) && (!$entity->hasField('field_reference_node') || $entity->get('field_reference_node')->isEmpty())) {
    $guide_box_build['items_list'] = [
      '#type' => 'container',
      '#attributes' => ['id' => 'add-reorder-list', 'class' => ['guide-item2']],
      'children' => [
        'html_item' => [
          '#type' => 'html_tag',
          '#tag' => 'li',
          'content' => [
            '#type' => 'link',
            '#title' => ('Add/Reuse HTML'),
            '#url' => Url::fromRoute('lgmsmodule.popup_modal', [], ['query' => ['ids' => $ids, 'forms' => $html_query_param]]),
            '#attributes' => [
              'class' => ['use-ajax'],
              'data-dialog-type' => 'modal',
              'data-dialog-options' => Json::encode(['width' => 800]),
              'title' => 'Re-position Box',
              'style' => 'text-decoration: none;',
            ],
          ],
        ],
        'book_item' => [
          '#type' => 'html_tag',
          '#tag' => 'li',
          'content' => [
            '#type' => 'link',
            '#title' => ('Add/Reuse Book'),
            '#url' => Url::fromRoute('lgmsmodule.popup_modal', [], ['query' => ['ids' => $ids, 'forms' => $book_query_param]]),
            '#attributes' => [
              'class' => ['use-ajax'],
              'data-dialog-type' => 'modal',
              'data-dialog-options' => Json::encode(['width' => 800]),
              'title' => 'Re-position Box',
              'style' => 'text-decoration: none;',
            ],
          ],
        ],
        'database_item' => [
          '#type' => 'html_tag',
          '#tag' => 'li',
          'content' => [
            '#type' => 'link',
            '#title' => ('Add/Reuse Database'),
            '#url' => Url::fromRoute('lgmsmodule.popup_modal', [], ['query' => ['ids' => $ids, 'forms' => $database_query_param]]),
            '#attributes' => [
              'class' => ['use-ajax'],
              'data-dialog-type' => 'modal',
              'data-dialog-options' => Json::encode(['width' => 800]),
              'title' => 'Re-position Box',
              'style' => 'text-decoration: none;',
            ],
          ],
        ],
        'media_item' => [
          '#type' => 'html_tag',
          '#tag' => 'li',
          'content' => [
            '#type' => 'link',
            '#title' => ('Add Media'),
            '#url' => Url::fromRoute('add_media.form', [], ['query' => ['current_box' => $box->id(), 'current_node' => $entity->id()]]),
            '#attributes' => [
              'class' => ['use-ajax'],
              'data-dialog-type' => 'modal',
              'data-dialog-options' => Json::encode(['width' => 800]),
              'title' => 'Re-position Box',
              'style' => 'text-decoration: none;',
            ],
          ],
        ],
        're-order' => [
          '#type' => 'html_tag',
          '#tag' => 'li',
          'content' => [
            '#type' => 'link',
            '#title' => t('Re-Order'),
            '#url' => Url::fromRoute('re_order_box_item.form', [], ['query' => ['current_box' => $box->id(), 'current_node' => $entity->id()]]),
            '#attributes' => [
              'class' => ['use-ajax'],
              'data-dialog-type' => 'modal',
              'data-dialog-options' => Json::encode(['width' => 800]),
              'title' => 'Re-position Box',
              'style' => 'text-decoration: none;',
            ],
          ],
        ],
      ],
    ];
  }

  $build['boxes'][] = [
    '#type' => 'container',
    '#attributes' => ['class' => ['guide-box-container ' . $unpublished_class]],
    'title_wrapper' => [
      '#type' => 'html_tag',
      '#tag' => 'div',
      '#attributes' => [
        'class' => ['title-edit-wrapper'],
      ],
      'title' => [
        '#type' => 'html_tag',
        '#tag' => 'h3',
        '#value' => $box->label(),
        '#attributes' => ['class' => ['guide-box-title ' . $unpublished_class]],
      ],
      'icons' => $entity !== $box && $entity->access('update')?[
        '#type' => 'html_tag',
        '#tag' => 'div',
        '#attributes' => [
          'class' => ['icons-container'],
        ],
        're_order_icon' => [
          '#type' => 'link',
          '#title' => [
            '#type' => 'html_tag',
            '#tag' => 'i',
            '#attributes' => [
              'class' => ['fa', 'fa-sort', 're-order-icon'],
            ],
          ],
          '#url' => Url::fromRoute('re_order_guide_box.form', [], ['query' => ['current_node' => $entity->id()]]),
          '#attributes' => [
            'class' => ['use-ajax'],
            'data-dialog-type' => 'modal',
            'data-dialog-options' => Json::encode(['width' => 800]),
            'title' => 'Re-position Boxes',
            'style' => 'text-decoration: none;',
          ],
        ],
        'edit_icon' => [
          '#type' => 'link',
          '#title' => [
            '#type' => 'html_tag',
            '#tag' => 'i',
            '#attributes' => [
              'class' => ['fa', 'fa-edit', 'edit-icon'],
            ],
          ],
          '#url' => Url::fromRoute('edit_guide_box.form', [], ['query' => ['current_node' => $entity->id(), 'current_box' =>$box->id()]]),
          '#attributes' => [
            'class' => ['use-ajax'],
            'data-dialog-type' => 'modal',
            'data-dialog-options' => Json::encode(['width' => 800]),
            'title' => 'Edit Box',
            'style' => 'text-decoration: none;',
          ],
        ],
        'close_icon' => [
          '#type' => 'link',
          '#title' => [
            '#type' => 'html_tag',
            '#tag' => 'i',
            '#attributes' => [
              'class' => ['fa', 'fa-trash', 'close-icon'],
            ],
          ],
          '#url' => Url::fromRoute('delete_guide_box.form', [], ['query' => ['current_node' => $entity->id(), 'current_box' =>$box->id()]]),
          '#attributes' => [
            'class' => ['use-ajax'],
            'data-dialog-type' => 'modal',
            'data-dialog-options' => Json::encode(['width' => 800]),
            'title' => 'Delete Box',
            'style' => 'text-decoration: none;',
          ],
        ],
      ] : [],
    ],
    'body' => $guide_box_build,
  ];

  return $build;
}

/**
 * Implements hook_ENTITY_TYPE_view() for node entities.
 */
function lgmsmodule_node_view(array &$build, EntityInterface $entity, EntityViewDisplayInterface $display, $view_mode): void {
  $build['#attached']['library'][] = 'lgmsmodule/lgmsmodule';
  $build['#attached']['library'][] = 'core/drupal.dialog.ajax';

  if($view_mode === 'full'){
    if($entity->bundle() === 'guide_database_item'){
      $build['db'] = database_display($entity);
    } elseif ($entity->bundle() === 'guide_html_item'){
      $build['html'] = html_display($entity);
    } elseif ($entity->bundle() === 'guide_book_item'){
      $build['book'] = book_display($entity);
    } elseif ($entity->bundle() === 'guide_box'){
      $build['box'] = box_display($entity, $entity);
    }
  }

  if (($entity->bundle() === 'guide' || $entity->bundle() === 'guide_page') && $view_mode === 'full') {

    $reference_page = true;

    if(!$entity->hasField('field_reference_node') || $entity->get('field_reference_node')->isEmpty()){
      $reference_page = false;
    }

    // Add a custom cache tag to the build array
    $custom_cache_tag = 'lgmsmodule_node_view:' . $entity->id();
    $build['#cache']['tags'][] = $custom_cache_tag;

    $title = $entity->label();
    $description = $entity->get("field_description")->value;

    if($entity->get('field_hide_description')->value){
      $description = '';
    }
    $icons = [
      '#type' => 'container',
      '#attributes' => ['class' => ['icons-container']],
    ];

    if (\Drupal::currentUser()->isAuthenticated() && ($entity->bundle() == 'guide' || $entity->bundle() == 'guide_page')) {

      if ($entity->bundle() == 'guide_page'){
        $icons['dashboard_icon'] = [
          '#type' => 'link',
          '#title' => [
            '#type' => 'html_tag',
            '#tag' => 'i',
            '#attributes' => [
              'class' => ['fa', 'fa-house'],
              'style' => \Drupal::currentUser()->isAuthenticated() ? 'margin-right: 48px; margin-top: 11px;' : 'margin: 32px;',
            ],
          ],
          '#url' => Url::fromRoute('lgmsmodule.dashboard_overview', ['node' => $entity->id()]),
          '#attributes' => [
            'title' => 'Guide Dashboard',
            'style' => 'text-decoration: none;',
          ],
        ];
      } else {
        $icons['dashboard_icon'] = [
          '#type' => 'link',
          '#title' => [
            '#type' => 'html_tag',
            '#tag' => 'i',
            '#attributes' => [
              'class' => ['fa', 'fa-house'],
              'style' => \Drupal::currentUser()->isAuthenticated() ? 'margin-right: 12px; margin-top: 11px;' : 'margin: 32px;',
            ],
          ],
          '#url' => Url::fromRoute('lgmsmodule.dashboard_overview', ['node' => $entity->id()]),
          '#attributes' => [
            'title' => 'Guide Dashboard',
            'style' => 'text-decoration: none;',
          ],
        ];

        $icons['print_icon'] = [
          '#type' => 'link',
          '#title' => [
            '#type' => 'html_tag',
            '#tag' => 'i',
            '#attributes' => [
              'class' => ['fa', 'fa-print'],
              'style' => \Drupal::currentUser()->isAuthenticated() ? 'margin-right: 12px; margin-top: 11px;' : 'margin: 32px;',

            ],
          ],
          '#url' => Url::fromRoute('lgmsmodule.download_guide', ['node' => $entity->id()]),
          '#attributes' => [
            'title' => 'Print Guide',
            'style' => 'text-decoration: none;',
          ],
        ];

        $icons['edit_icon'] = [
          '#type' => 'link',
          '#title' => [
            '#type' => 'html_tag',
            '#tag' => 'i',
            '#attributes' => [
              'class' => ['fa', 'fa-edit'],
              'style' => \Drupal::currentUser()->isAuthenticated() ? 'margin-right: 12px; margin-top: 11px;' : 'margin: 32px;',
            ],
          ],
          '#url' => Url::fromRoute('edit_guide.form', ['guide_id' => $entity->id()]),
          '#attributes' => [
            'class' => ['use-ajax'],
            'data-dialog-type' => 'modal',
            'data-dialog-options' => json_encode(['width' => 700]),
          ],
        ];

        $icons['delete_icon'] = [
          '#type' => 'link',
          '#title' => [
            '#type' => 'html_tag',
            '#tag' => 'i',
            '#attributes' => [
              'class' => ['fa', 'fa-trash'],
              'style' => \Drupal::currentUser()->isAuthenticated() ? 'margin-right: 48px; margin-top: 11px;' : 'margin: 32px;',
            ],
          ],
          '#url' => Url::fromRoute('lgmsmodule.delete_guide', ['guide_id' => $entity->id()]),
          '#attributes' => [
            'class' => ['use-ajax'],
            'data-dialog-type' => 'modal',
            'data-dialog-options' => json_encode(['width' => 700]),
          ],
        ];
      }

    }

    $build['guide_print'][] = [
      '#type' => 'container',
      '#attributes' => ['class' => ['guide-box-2container']],
      'title_wrapper' => [
        '#type' => 'html_tag',
        '#tag' => 'div',
        '#attributes' => ['class' => ['title-edit2-wrapper']],
        'title' => [
          '#type' => 'html_tag',
          '#tag' => 'h3',
          '#value' => '<h1>'.$title.'</h1>',
          '#attributes' => ['class' => ['guide-box-title']],
        ],
        'icons' => $icons,
      ],
      'body' => [
        '#type' => 'markup',
        '#markup' => $description,
      ],
    ];



    $build['boxes']['#attached']['library'][] = 'lgmsmodule/fontawesome';
    $build['guide_print']['#attached']['library'][] = 'core/drupal.dialog.ajax';

    $boxes = $entity->get('field_child_boxes')->referencedEntities();

    foreach ($boxes as $box) {
      $build['boxes'][] = box_display($entity, $box);
    }

    if($entity->access('update') && !$reference_page) {
      // Generate the URL for the custom form route, including the query parameter for the current guide.
      $array_of_objects = [(object)['name' => 'Create Guide Box', 'form' => 'CreateGuideBoxForm'],(object) ['name' => 'Reuse Guide Box', 'form' => 'ReuseGuideBoxForm']];
      $json_data = json_encode($array_of_objects);
      $query_param = urlencode($json_data);

      $ids = ['current_node' => $entity->id()];
      $json_data = json_encode($ids);
      $ids = urlencode($json_data);

      $url = Url::fromRoute('lgmsmodule.popup_modal', [], ['query' => ['ids' => $ids, 'forms' => $query_param]]);

      // Create the link render array with AJAX attributes.
      $link = Link::fromTextAndUrl(t('Create/Reuse Guide Box'), $url)->toRenderable();
      $link['#attributes'] = [
        'class' => ['use-ajax'],
        'data-dialog-type' => 'modal',
        'data-dialog-options' => Json::encode(['width' => 800]),
      ];

      // Render the link somewhere in your build array.
      $build['guide_box_modal'] = $link;
    }

    $last_changed_timestamp = $entity->getChangedTime();

    $last_changed_formatted = \Drupal::service('date.formatter')->format($last_changed_timestamp, 'medium');

    $build['last_changed'] = [
      '#markup' => "<p>Last updated: {$last_changed_formatted}</p>",
    ];

  }
}

/**
 * Implements hook_install().
 * @throws EntityStorageException
 */
function lgmsModule_install(): void
{
  \Drupal::configFactory()->getEditable('lgmsmodule.settings')
    ->set('proxy_prefix', 'https://proxy.library.xxx.xx/login?url=')
    ->save();

  // Get the default theme.
  $default_theme = \Drupal::config('system.theme')->get('default');

  // Blocks to place
  $block_id = ['lgmsguideownerblock', 'pageviewblock'];
  $plugin = ['lgms_guide_owner_block', 'page_view_block'];
  $label = ['LGMS Guide Owner Block', 'LGMS page view Block'];
  $weight = [0,1];

  for ($i = 0; $i < 2; $i++){
    if (!\Drupal\block\Entity\Block::load($block_id[$i])) {
      $block = \Drupal\block\Entity\Block::create([
        'id' => $block_id[$i],
        'theme' => $default_theme,
        'region' => 'sidebar_first',
        'weight' => $weight[$i],
        'provider' => 'lgmsmodule',
        'plugin' => $plugin[$i],
        'label' => $label[$i],
        'label_display' => 'visible',
        'visibility' => [
          'entity_bundle:node' => [
            'id' => 'entity_bundle:node',
            'bundles' => [
              'guide' => 'guide',
              'guide_page' => 'guide_page',
            ],
            'negate' => FALSE,
            'context_mapping' => [
              'node' => '@node.node_route_context:node',
            ],
          ],
        ],
      ]);

      $block->save();

      // After the block->save() call.
      \Drupal::service('cache_tags.invalidator')->invalidateTags(['block_list']);
      \Drupal::service('router.builder')->rebuild();
    }
  }

  // Create content types with brief descriptions.
  createContentType('guide', 'Guide', 'Comprehensive collections of resources on specific subjects.');
  createContentType('guide_page', 'Guide Page', 'Segments within a Guide for organizing content.');
  createContentType('guide_box', 'Guide Box', 'Containers within Guide Pages for grouping related items.');
  createContentType('guide_item', 'Guide Box Item', 'Generic items within Guide Boxes.');
  createContentType('guide_html_item', 'HTML Box Item', 'Embeddable HTML content within Guide Boxes.');
  createContentType('guide_database_item', 'Database Box Item', 'Links to databases within Guide Boxes.');
  createContentType('guide_book_item', 'Book Box Item', 'References to books within Guide Boxes.');


  // Create taxonomies.
  create_vocab('LGMS_Guide_Type', 'Guide Type', 'Use Guide Type to group guides by their type');
  create_vocab('LGMS_Guide_Subject', 'Guide Subject', 'Use Guide Subject to group guides related to each other under the same category');
  create_vocab('LGMS_Guide_Group', 'Guide Group', 'Use Guide Group to assign a guide to a specific group and.');

  // Add terms to the Guide Type taxonomy
  $terms = array('General purpose Guide', 'Subject Guide', 'Topic Guide', 'Course Guide',);
  add_terms($terms, 'LGMS_Guide_Type');

  // Add terms to the Guide Subject taxonomy
  $terms = array('Anthropology', 'Biology ', 'Biotechnology', 'Business & Management', 'Chemistry',
    'Communication & Mass Media', 'Computer Science', 'Drama & Theater Arts', 'Earth & Atmospheric Sciences',
    'Economics', 'Education', 'Engineering', 'Environmental Sciences', 'Ethnic & Cultural Studies',
    'Geography & Cartography', 'Health & Medicine', 'History', 'Language & Linguistics', 'Law',
    'Library & Information Science', 'Literature & Writing', 'Marketing', 'Mathematics', 'Music',
    'Nursing & Allied Health', 'Nutrition & Dietetics', 'Physics', 'Political Science', 'Politics & Government',
    'Psychology', 'Religion & Philosophy', 'Science', 'Sociology', 'Sports & Leisure', 'Sports Medicine',
    'Veterinary Medicine', 'Visual Arts', 'Women\'s Studies & Feminism',
  );
  add_terms($terms, 'LGMS_Guide_Subject');

  // Add terms to the Guide Group taxonomy
  $terms = array('Group 1', 'Group 2', 'Group 3', 'Group 4',);
  add_terms($terms, 'LGMS_Guide_Group');

  // Guide fields
  createField('field_hide_description', 'node', 'guide', 'Hide Description',
    'boolean', [], [
      'default_value' => 0,
      'on_label' => 'Yes',
      'off_label' => 'No',
    ],
    'boolean_checkbox', [], TRUE, False, 1, '', False
  );

  createField('field_description', 'node', 'guide', 'Description',
    'text_long', [], [], 'text_textarea', [], True, False, 2,
    '', False
  );


  createField('field_lgms_guide_subject', 'node', 'guide', 'Subject',
    'entity_reference', ['target_type' => 'taxonomy_term',],
    [
      'handler' => 'default:taxonomy_term',
      'handler_settings' => [
        'target_bundles' => [
          'LGMS_Guide_Subject' => 'LGMS_Guide_Subject',
        ],
      ],
    ],
    'options_buttons', [], True, True, 3, ''
  );

  createField('field_lgms_guide_type', 'node', 'guide', 'Type',
    'entity_reference', ['target_type' => 'taxonomy_term',],
    [
      'handler' => 'default:taxonomy_term',
      'handler_settings' => [
        'target_bundles' => [
          'LGMS_Guide_Subject' => 'LGMS_Guide_Type',
        ],
      ],
    ],
    'options_select', [], True, False, 4, ''
  );

    createField('field_lgms_guide_group', 'node', 'guide', 'Group',
    'entity_reference', ['target_type' => 'taxonomy_term',],
    [
      'handler' => 'default:taxonomy_term',
      'handler_settings' => [
        'target_bundles' => [
          'LGMS_Guide_Subject' => 'LGMS_Guide_Group',
        ],
      ],
    ],
    'options_select', [], True, False, 5, ''
  );

  createField('field_child_pages', 'node', 'guide', 'Children Pages',
    'entity_reference', ['target_type' => 'node',],
    [
      'handler' => 'default:node',
      'handler_settings' => [
        'target_bundles' => [
          'guide_page' => 'guide_page',
        ],
      ],
      'sort' => [
        'field' => '_none',
      ],
    ], 'entity_reference_autocomplete', [], TRUE, TRUE, 6, '', False
  );

  createField('field_child_boxes', 'node', 'guide', 'Children Boxes',
    'entity_reference', ['target_type' => 'node',],
    [
      'handler' => 'default:node',
      'handler_settings' => [
        'target_bundles' => [
          'guide_box' => 'guide_box',
        ],
      ],
      'sort' => [
        'field' => '_none',
      ],
    ], 'entity_reference_autocomplete', [], TRUE, TRUE, 7, '', False
  );

  // Guide_Page content type fields
  createField('field_parent_guide', 'node', 'guide_page', 'Parent Guide',
    'entity_reference', ['target_type' => 'node',],
    [
      'handler' => 'default:node',
      'handler_settings' => [
        'target_bundles' => [
          'guide' => 'guide',
          'guide_page' => 'guide_page',
        ],
      ],
    ], 'entity_reference_autocomplete', [], TRUE, False, 1, ''
  );

  createField('field_hide_description', 'node', 'guide_page', 'Hide Description',
    'boolean', [],
    [
      'default_value' => 0,
      'on_label' => 'Yes',
      'off_label' => 'No',
    ],
    'boolean_checkbox', [], TRUE, False, 2, '', False
  );

  createField('field_description', 'node', 'guide_page', 'Description',
    'text_long', [], [], 'text_textarea',
    [
      'rows' => 5,
      'placeholder' => 'Enter the page description here...'
    ],
    TRUE, False, 3, '', False
  );

  createField('field_child_pages', 'node', 'guide_page', 'Children Pages',
    'entity_reference', ['target_type' => 'node',],
    [
      'handler' => 'default:node',
      'handler_settings' => [
        'target_bundles' => [
          'guide_page' => 'guide_page',
        ],
      ],
      'sort' => [
        'field' => '_none',
      ],
    ],
    'entity_reference_autocomplete', [], TRUE, TRUE, 4, '', False
  );

  createField('field_child_boxes', 'node', 'guide_page', 'Children Boxes',
    'entity_reference', ['target_type' => 'node',],
    [
      'handler' => 'default:node',
      'handler_settings' => [
        'target_bundles' => [
          'guide_box' => 'guide_box',
        ],
      ],
      'sort' => [
        'field' => '_none',
      ],
    ],
    'entity_reference_autocomplete', [], TRUE, TRUE, 5, '', False
  );

  createField('field_reference_node', 'node', 'guide_page', 'Reference Page',
    'entity_reference', ['target_type' => 'node',],
    [
      'handler' => 'default:node',
      'handler_settings' => [
        'target_bundles' => [
          'guide_page' => 'guide_page',
        ],
      ],
      'sort' => [
        'field' => '_none',
      ],
    ],
    'entity_reference_autocomplete', [], TRUE, False, 6, '', False
  );

  // Guide_box fields
  createField('field_parent_node', 'node', 'guide_box', 'Parent node',
    'entity_reference', ['target_type' => 'node',],
    [
      'handler' => 'default:node',
      'handler_settings' => [
        'target_bundles' => [
          'guide' => 'guide',
          'guide_page' => 'guide_page',
        ],
      ],
    ],
    'entity_reference_autocomplete', [], TRUE, False, 1, ''
  );

  createField('field_box_items', 'node', 'guide_box', 'Items List',
    'entity_reference', ['target_type' => 'node',],
    [
      'handler' => 'default:node',
      'handler_settings' => [
        'target_bundles' => [
          'guide_item' => 'guide_item',
        ],
      ],
      'sort' => [
        'field' => '_none',
      ],
    ],
    'entity_reference_autocomplete', [], TRUE, True, 2, '', False
  );

  // Guide_item fields
  createField('field_parent_box', 'node', 'guide_item', 'Parent Box',
    'entity_reference', ['target_type' => 'node',],
    [
      'handler' => 'default:node',
      'handler_settings' => [
        'target_bundles' => [
          'guide_box' => 'guide_box',
        ],
      ],
    ],
    'entity_reference_autocomplete', [], TRUE, False, 1, ''
  );

  createField('field_media_image', 'node', 'guide_item', 'Media',
    'entity_reference', ['target_type' => 'media'],
    [
      'handler' => 'default:media',
      'handler_settings' => [
        'sort' => ['field' => '_none'],
      ],
    ],
    'media_library_widget', [], TRUE, false, 2, '', False
  );

  createField('field_html_item', 'node', 'guide_item', 'html item',
    'entity_reference', ['target_type' => 'node',],
    [
      'handler' => 'default:node',
      'handler_settings' => [
        'target_bundles' => [
          'guide_html_item' => 'guide_html_item',
        ],
      ],
      'sort' => [
        'field' => '_none',
      ],
    ],
    'entity_reference_autocomplete', [], TRUE, False, 3, '', False
  );

  createField('field_database_item', 'node', 'guide_item', 'Database item',
    'entity_reference', ['target_type' => 'node',],
    [
      'handler' => 'default:node',
      'handler_settings' => [
        'target_bundles' => [
          'guide_database_item' => 'guide_database_item',
        ],
      ],
      'sort' => [
        'field' => '_none',
      ],
    ],
    'entity_reference_autocomplete', [], TRUE, False, 4, '', False
  );

  createField('field_book_item', 'node', 'guide_item', 'Book item',
    'entity_reference', ['target_type' => 'node',],
    [
      'handler' => 'default:node',
      'handler_settings' => [
        'target_bundles' => [
          'guide_book_item' => 'guide_book_item',
        ],
      ],
      'sort' => [
        'field' => '_none',
      ],
    ],
    'entity_reference_autocomplete', [], TRUE, False, 5, '', False
  );

  createField('field_lgms_reference', 'node', 'guide_item', 'Link', 'boolean',
    [], [], 'boolean_checkbox',
    [
      'settings' => [
        'display_label' => TRUE,
      ],
    ],
    FALSE, FALSE, 6, '', False
  );

  // Guide_html_item content type fields
  createField(
    'field_parent_item', 'node', 'guide_html_item', 'Parent node',
    'entity_reference', ['target_type' => 'node',],
    [
      'handler' => 'default:node',
      'handler_settings' => [
        'target_bundles' => [
          'guide_item' => 'guide_item',
        ],
      ],
    ],
    'entity_reference_autocomplete', [], TRUE, False, 1, ''
  );

  createField('field_text_box_item2', 'node', 'guide_html_item', 'Text',
    'text_long', [], [], 'text_textarea', ['rows' => 20,], TRUE, False,
    2, ''
  );

  // guide_database_item content type fields
  createField('field_parent_item', 'node', 'guide_database_item', 'Parent node',
    'entity_reference', ['target_type' => 'node',],
    [
      'handler' => 'default:node',
      'handler_settings' => [
        'target_bundles' => [
          'guide_item' => 'guide_item',
        ],
      ],
    ],
    'entity_reference_autocomplete', [], TRUE, False, 1, ''
  );

  createField('field_database_link', 'node', 'guide_database_item', 'Link',
    'link', [],
    [
      'link_type' => LinkItemInterface::LINK_GENERIC
    ],
    'link_default', [], TRUE, FALSE, 2, 'Enter the Title of the proxied content.
     All links in this field will have a proxy prefix attached to the url by the system (eg. https://proxy.library.xxx.xx
     /login?url=).so enter the URL of the content without the proxy.'
  );

  createField('field_make_proxy', 'node', 'guide_database_item', 'Make Link Proxy',
    'boolean', [], [], 'boolean_checkbox',
    [
      'settings' => [
        'display_label' => TRUE,
      ],
    ],
    FALSE, FALSE, 3, '', False
  );

  createField('field_hide_body', 'node', 'guide_database_item', 'Hide Body',
    'boolean', [],
    [
      'default_value' => 0,
      'on_label' => 'Yes',
      'off_label' => 'No',
    ],
    'boolean_checkbox', [], TRUE, 1, 4, '', False
  );

  createField('field_database_body', 'node', 'guide_database_item', 'Body',
    'text_long', [], ['text_processing' => 1], 'text_textarea', [], TRUE, FALSE,
    5, '', False
  );

  createField(
    'field_hide_description', 'node', 'guide_database_item', 'Hide Description',
    'boolean', [],
    [
      'default_value' => 0,
      'on_label' => 'Yes',
      'off_label' => 'No',
    ],
    'boolean_checkbox', [], TRUE, False, 6, '', False
  );


  createField('field_description', 'node', 'guide_database_item', 'Description',
    'text_long', [], ['text_processing' => 1], 'text_textarea', [], TRUE, False,
    7, '', False
  );

  // guide_book_item content type fields
  createField('field_parent_item', 'node', 'guide_book_item', 'Parent node',
    'entity_reference', ['target_type' => 'node',],
    [
      'handler' => 'default:node',
      'handler_settings' => [
        'target_bundles' => [
          'guide_item' => 'guide_item',
        ],
      ],
    ],
    'entity_reference_autocomplete', [], TRUE, False, 0, ''
  );

  createField('field_book_author_or_editor', 'node', 'guide_book_item',
    'Author/Editor', 'string', [], [], 'string_textfield', [], TRUE, FALSE,
    1, ''
  );

  createField('field_book_publisher', 'node', 'guide_book_item', 'Publisher',
    'string', [], [], 'string_textfield', [], TRUE, FALSE, 2, ''
  );

  createField('field_book_year', 'node', 'guide_book_item', 'Year', 'string',
    [], [], 'string_textfield', [], TRUE, FALSE, 3, ''
  );

  createField('field_book_edition', 'node', 'guide_book_item', 'Edition',
    'string', [], [], 'string_textfield', [], TRUE, FALSE, 4, ''
  );

  createField('field_book_cover_picture', 'node', 'guide_book_item', 'Cover Picture',
    'image',
    [
      'uri_scheme' => 'public',
      'file_extensions' => 'png jpg jpeg'
    ],
    [], 'image_image', ['progress_indicator' => 'throbber'], TRUE, FALSE, 5, ''
  );

  createField('field_book_description', 'node', 'guide_book_item', 'Description',
    'text_long', [], [], 'text_textarea', ['rows' => 5,], TRUE, FALSE, 7,
    ''
  );

  createField('field_book_type', 'node', 'guide_book_item', 'Book Type',
    'list_string',
    [
      'allowed_values' => [
        'print' => 'Print',
        'eBook' => 'eBook',
      ],
    ],
    [], 'options_select', [], True, False, 8, ''
  );


  createField('field_book_call_number', 'node', 'guide_book_item', 'Call Number',
    'string', [], [], 'string_textfield', [], TRUE, FALSE, 9,
    '', False
  );

  createField('field_book_location', 'node', 'guide_book_item', 'Location',
    'string', [], [], 'string_textfield', [], TRUE, FALSE, 10,
    '', False
  );

  createField('field_book_cat_record', 'node', 'guide_book_item', 'Cat Record',
    'link', [],
    [
      'link_type' => LinkItemInterface::LINK_EXTERNAL
    ],
    'link_default', [], TRUE, FALSE, 11, '', False
  );

  createField('field_book_pub_finder', 'node', 'guide_book_item', 'Pub Finder',
    'link', [],
    [
      'link_type' => LinkItemInterface::LINK_EXTERNAL
    ],
    'link_default', [], TRUE, FALSE, 12, '', False
  );

  // User fields
  createField('field_lgms_first_name', 'user', 'user', 'First Name', 'string',
    [], [], 'string_textfield', ['size' => 20], TRUE, FALSE, 1, '', False
  );

  createField('field_lgms_last_name', 'user', 'user', 'Last Name', 'string',
    [], [], 'string_textfield', ['size' => 20], TRUE, FALSE, 2, '', False
  );

  createField('field_lgms_phone_number', 'user', 'user', 'Phone Number', 'string',
    [], [], 'string_textfield', ['size' => 20], TRUE, FALSE, 3, '', False
  );

  createField('field_lgms_body', 'user', 'user', 'Body', 'text_long',
    [], [], 'text_textarea', [], TRUE, FALSE, 4, '', False
  );

  createField('field_lgms_user_subjects', 'user', 'user', 'Subjects',
    'entity_reference', ['target_type' => 'taxonomy_term',],
    [
      'handler' => 'default:taxonomy_term',
      'handler_settings' => [
        'target_bundles' => [
          'LGMS_Guide_Subject' => 'LGMS_Guide_Subject',
        ],
      ],
    ],
    'options_buttons', [], False, True, 5, '', False
  );

  // Disable the display of author and date information for guide, guide_page and guide_box.
  disable_field('guide', 'display_submitted');
  disable_field('guide_page', 'display_submitted');
  disable_field('guide_box', 'display_submitted');
  disable_field('guide_item', 'display_submitted');
  disable_field('guide_html_item', 'display_submitted');
  disable_field('guide_database_item', 'display_submitted');
  disable_field('guide_book_item', 'display_submitted');

  createHelpGuide();
}


function createNodeOfType($type, $title, array $fields) {
  $node = Node::create(array_merge([
    'type' => $type,
    'title' => $title,
  ], $fields));
  $node->save();
  return $node;
}

function createHelpGuideNode() {
  return createNodeOfType('guide', 'Help Guide', [
    'field_description' => [
      'value' => 'This is a helper guide to assist users in creating guides and using the module.',
      'format' => 'full_html',
    ],
    'field_hide_description' => FALSE,
  ]);
}

function createGuidePageNode($guideNodeId, $title, $description) {
  return createNodeOfType('guide_page', $title, [
    'field_description' => [
      'value' => $description,
      'format' => 'full_html',
    ],
    'field_parent_guide' => [
      'target_id' => $guideNodeId,
    ],
    'field_hide_description' => TRUE,
  ]);
}

function createGuideBoxNode($guidePageId, $title) {
  return createNodeOfType('guide_box', $title, [
    'field_parent_node' => [
      'target_id' => $guidePageId,
    ],
  ]);
}

function createGuideBoxItemNode($guideBoxId, $title) {
  return createNodeOfType('guide_item', $title, [
    'field_parent_box' => [
      'target_id' => $guideBoxId,
    ],
  ]);
}

function createHtmlItemNode($guideBoxItemId, $title, $html) {
  return createNodeOfType('guide_html_item', $title, [
    'field_text_box_item2' => [
      'value' => $html,
      'format' => 'full_html',
    ],
    'field_parent_item' => [
      'target_id' => $guideBoxItemId,
    ],
  ]);
}

function attachChildNodes($parentNode, $field_name, $childNodeIds) {
  foreach ($childNodeIds as $childNodeId) {
    $parentNode->{$field_name}[] = ['target_id' => $childNodeId];
  }
  $parentNode->save();
}


function createHelpGuide(): array {
  // Create main help guide node
  $help_guide = createHelpGuideNode();

  // Create guide pages
  $guide_page = createGuidePageNode($help_guide->id(), 'Guide', 'Tutorial for guide creation and reuse.');
  $guide_page_page = createGuidePageNode($help_guide->id(), 'Guide Page', 'Tutorial for guide page creation and reuse.');
  $guide_box_page = createGuidePageNode($help_guide->id(), 'Guide Box', 'Tutorial for guide box creation and reuse.');
  $html_page = createGuidePageNode($help_guide->id(), 'HTML', 'Tutorial for HTML creation and reuse.');
  $book_page = createGuidePageNode($help_guide->id(), 'Book', 'Tutorial for book creation and reuse.');
  $database_page = createGuidePageNode($help_guide->id(), 'Database', 'Tutorial for database creation and reuse.');
  $media_page = createGuidePageNode($help_guide->id(), 'Media', 'Tutorial for media creation.');


  // Create guide boxes
  $create_guide_box = createGuideBoxNode($guide_page->id(), 'Create Guide Box');
  $reuse_guide_box = createGuideBoxNode($guide_page->id(), 'Reuse Guide Box');

  $create_page_guide_box = createGuideBoxNode($guide_page_page->id(), 'Create Page Guide Box');
  $reuse_page_guide_box = createGuideBoxNode($guide_page_page->id(), 'Reuse Page Guide Box');

  $create_box_guide_box = createGuideBoxNode($guide_box_page->id(), 'Create a Guide Box');
  $reuse_box_guide_box = createGuideBoxNode($guide_box_page->id(), 'Reuse a Guide Box');

  $html_guide_box = createGuideBoxNode($html_page->id(), 'HTML Guide Box');
  $reuse_html_guide_box = createGuideBoxNode($html_page->id(), 'Reuse HTML Guide Box');

  $book_guide_box = createGuideBoxNode($book_page->id(), 'Book Guide Box');
  $reuse_book_guide_box = createGuideBoxNode($book_page->id(), 'Reuse Book Guide Box');

  $database_guide_box = createGuideBoxNode($database_page->id(), 'Database Guide Box');
  $reuse_database_guide_box = createGuideBoxNode($database_page->id(), 'Reuse Database Guide Box');

  $media_guide_box = createGuideBoxNode($media_page->id(), 'Media Guide Box');

  // Attach guide boxes to pages
  attachChildNodes($guide_page, 'field_child_boxes', [$create_guide_box->id()]);
  attachChildNodes($guide_page, 'field_child_boxes', [$reuse_guide_box->id()]);

  attachChildNodes($guide_page_page, 'field_child_boxes', [$create_page_guide_box->id()]);
  attachChildNodes($guide_page_page, 'field_child_boxes', [$reuse_page_guide_box->id()]);

  attachChildNodes($guide_box_page, 'field_child_boxes', [$create_box_guide_box->id()]);
  attachChildNodes($guide_box_page, 'field_child_boxes', [$reuse_box_guide_box->id()]);

  attachChildNodes($html_page, 'field_child_boxes', [$html_guide_box->id()]);
  attachChildNodes($html_page, 'field_child_boxes', [$reuse_html_guide_box->id()]);

  attachChildNodes($book_page, 'field_child_boxes', [$book_guide_box->id()]);
  attachChildNodes($book_page, 'field_child_boxes', [$reuse_book_guide_box->id()]);

  attachChildNodes($database_page, 'field_child_boxes', [$database_guide_box->id()]);
  attachChildNodes($database_page, 'field_child_boxes', [$reuse_database_guide_box->id()]);

  attachChildNodes($media_page, 'field_child_boxes', [$media_guide_box->id()]);

  // Create guide box items
  $html_box_item = createGuideBoxItemNode($html_guide_box->id(), 'HTML Item');
  $book_box_item = createGuideBoxItemNode($book_guide_box->id(), 'Book Item');
  $database_box_item = createGuideBoxItemNode($database_guide_box->id(), 'Database Item');
  $media_box_item = createGuideBoxItemNode($media_guide_box->id(), 'Media Item');
  $create_box_box_item = createGuideBoxItemNode($create_box_guide_box->id(), 'Create Box Item');
  $create_guide_box_item = createGuideBoxItemNode($create_guide_box->id(), 'Create Guide Item');
  $create_page_box_item = createGuideBoxItemNode($create_page_guide_box->id(), 'Create Page Item');
  $reuse_guide_box_item = createGuideBoxItemNode($reuse_guide_box->id(), 'Reuse Guide Item');
  $reuse_html_box_item = createGuideBoxItemNode($reuse_html_guide_box->id(), 'Reuse HTML Item');
  $reuse_page_box_item = createGuideBoxItemNode($reuse_page_guide_box->id(), 'Reuse Page Item');
  $reuse_database_box_item = createGuideBoxItemNode($reuse_database_guide_box->id(), 'Reuse Database Item');
  $reuse_book_box_item = createGuideBoxItemNode($reuse_book_guide_box->id(), 'Reuse Book Item');

  // Create HTML items

  $add_html = '<h1><a href="https://app.tango.us/app/workflow/80425ed0-4b37-44c7-8f41-bbe19d009ed3?utm_source=magicCopy&utm_medium=magicCopy&utm_campaign=workflow%20export%20links" target="_blank">Adding HTML/ Text Content to Your Box</a></h1>
<div><b>Creation Date:</b> March 31, 2024</div>
<div><b>Created By:</b> Mohammed Amaan</div>
<div><a href="https://app.tango.us/app/workflow/80425ed0-4b37-44c7-8f41-bbe19d009ed3?utm_source=magicCopy&utm_medium=magicCopy&utm_campaign=workflow%20export%20links" target="_blank">View most recent version on Tango.us</a></div>
<div style="height: 24px">&#8203;</div>
<hr />
<div style="height: 24px">&#8203;</div>


<div><h2><a href="http://localhost/LGMS/psychology/finding-books-psychology"># Navigate to the required Page and then the box</a></h2></div>

<div><h3>1. This is what the Box will Look like without any content in it</h3>
<img src="https://images.tango.us/workflows/80425ed0-4b37-44c7-8f41-bbe19d009ed3/steps/c0b98ecd-f9f8-43aa-a971-63d35b97feb7/82e7c59b-c95f-4e20-8745-c66e6e414c96.png?fm=png&crop=focalpoint&fit=crop&fp-x=0.6214&fp-y=0.6066&fp-z=1.4224&w=1200&border=2%2CF4F2F7&border-radius=8%2C8%2C8%2C8&border-radius-inner=8%2C8%2C8%2C8&blend-align=bottom&blend-mode=normal&blend-x=0&blend-w=1200&blend64=aHR0cHM6Ly9pbWFnZXMudGFuZ28udXMvc3RhdGljL21hZGUtd2l0aC10YW5nby13YXRlcm1hcmstdjIucG5n&mark-x=46&mark-y=303&m64=aHR0cHM6Ly9pbWFnZXMudGFuZ28udXMvc3RhdGljL2JsYW5rLnBuZz9tYXNrPWNvcm5lcnMmYm9yZGVyPTYlMkNGRjc0NDImdz0xMTA4Jmg9Mzc0JmZpdD1jcm9wJmNvcm5lci1yYWRpdXM9MTA%3D" style="border-radius: 8px; border: 1px solid #F4F2F7;" width="600" alt="This is what the Box will Look like without any content in it" />
</div>

<div><h3>2. Click on Add/Reuse HTML to add Plain text or HTML content </h3>
<img src="https://images.tango.us/workflows/80425ed0-4b37-44c7-8f41-bbe19d009ed3/steps/bee8f840-00d2-4541-83b3-5520fa5ca621/7933b6a5-2776-450d-983d-1e2864e3509d.png?fm=png&crop=focalpoint&fit=crop&fp-x=0.3932&fp-y=0.5976&fp-z=2.3651&w=1200&border=2%2CF4F2F7&border-radius=8%2C8%2C8%2C8&border-radius-inner=8%2C8%2C8%2C8&blend-align=bottom&blend-mode=normal&blend-x=0&blend-w=1200&blend64=aHR0cHM6Ly9pbWFnZXMudGFuZ28udXMvc3RhdGljL21hZGUtd2l0aC10YW5nby13YXRlcm1hcmstdjIucG5n&mark-x=426&mark-y=455&m64=aHR0cHM6Ly9pbWFnZXMudGFuZ28udXMvc3RhdGljL2JsYW5rLnBuZz9tYXNrPWNvcm5lcnMmYm9yZGVyPTYlMkNGRjc0NDImdz0zNDkmaD03MCZmaXQ9Y3JvcCZjb3JuZXItcmFkaXVzPTEw" style="border-radius: 8px; border: 1px solid #F4F2F7;" width="600" alt="Click on Add/Reuse HTML to add Plain text or HTML content " />
</div>

<div><h3>3. Add Title </h3>
<img src="https://images.tango.us/workflows/80425ed0-4b37-44c7-8f41-bbe19d009ed3/steps/bdc2bb58-3fbc-4c8e-bc3c-8bd4c63ed45a/8015f4ef-4dbc-456a-832e-181d9466b4ec.png?fm=png&crop=focalpoint&fit=crop&fp-x=0.5005&fp-y=0.2576&fp-z=1.1706&w=1200&border=2%2CF4F2F7&border-radius=8%2C8%2C8%2C8&border-radius-inner=8%2C8%2C8%2C8&blend-align=bottom&blend-mode=normal&blend-x=0&blend-w=1200&blend64=aHR0cHM6Ly9pbWFnZXMudGFuZ28udXMvc3RhdGljL21hZGUtd2l0aC10YW5nby13YXRlcm1hcmstdjIucG5n&mark-x=102&mark-y=265&m64=aHR0cHM6Ly9pbWFnZXMudGFuZ28udXMvc3RhdGljL2JsYW5rLnBuZz9tYXNrPWNvcm5lcnMmYm9yZGVyPTYlMkNGRjc0NDImdz05OTcmaD02MSZmaXQ9Y3JvcCZjb3JuZXItcmFkaXVzPTEw" style="border-radius: 8px; border: 1px solid #F4F2F7;" width="600" alt="Add Title " />
</div>

<div><h3>4. In the Body text box is where you will add the content.</h3>
<p>By Default Basic HTML is selected</p>
<img src="https://images.tango.us/workflows/80425ed0-4b37-44c7-8f41-bbe19d009ed3/steps/097a09ac-c363-42af-835b-242b6cebfbe2/1a01e8b3-83b1-4848-8a3d-18d1be3f366d.png?fm=png&crop=focalpoint&fit=crop&fp-x=0.5005&fp-y=0.4826&fp-z=1.1706&w=1200&border=2%2CF4F2F7&border-radius=8%2C8%2C8%2C8&border-radius-inner=8%2C8%2C8%2C8&blend-align=bottom&blend-mode=normal&blend-x=0&blend-w=1200&blend64=aHR0cHM6Ly9pbWFnZXMudGFuZ28udXMvc3RhdGljL21hZGUtd2l0aC10YW5nby13YXRlcm1hcmstdjIucG5n&mark-x=102&mark-y=356&m64=aHR0cHM6Ly9pbWFnZXMudGFuZ28udXMvc3RhdGljL2JsYW5rLnBuZz9tYXNrPWNvcm5lcnMmYm9yZGVyPTYlMkNGRjc0NDImdz05OTcmaD0yNjgmZml0PWNyb3AmY29ybmVyLXJhZGl1cz0xMA%3D%3D" style="border-radius: 8px; border: 1px solid #F4F2F7;" width="600" alt="In the Body text box is where you will add the content." />
</div>

<div><h3>5. You have the option to change it to full HTML or Restricted HTML</h3>
<img src="https://images.tango.us/workflows/80425ed0-4b37-44c7-8f41-bbe19d009ed3/steps/464ed90c-35f9-4900-b93a-f26c88470c42/6ca23239-c171-44dd-8e4a-54967b3c48b8.png?fm=png&crop=focalpoint&fit=crop&fp-x=0.5005&fp-y=0.5932&fp-z=1.1706&w=1200&border=2%2CF4F2F7&border-radius=8%2C8%2C8%2C8&border-radius-inner=8%2C8%2C8%2C8&blend-align=bottom&blend-mode=normal&blend-x=0&blend-w=1200&blend64=aHR0cHM6Ly9pbWFnZXMudGFuZ28udXMvc3RhdGljL21hZGUtd2l0aC10YW5nby13YXRlcm1hcmstdjIucG5n&mark-x=102&mark-y=483&m64=aHR0cHM6Ly9pbWFnZXMudGFuZ28udXMvc3RhdGljL2JsYW5rLnBuZz9tYXNrPWNvcm5lcnMmYm9yZGVyPTYlMkNGRjc0NDImdz05OTcmaD02MSZmaXQ9Y3JvcCZjb3JuZXItcmFkaXVzPTEw" style="border-radius: 8px; border: 1px solid #F4F2F7;" width="600" alt="You have the option to change it to full HTML or Restricted HTML" />
</div>

<div><h3>6. Click on Save</h3>
<img src="https://images.tango.us/workflows/80425ed0-4b37-44c7-8f41-bbe19d009ed3/steps/086224cf-3251-45c6-a184-d20bf7e4800e/735bf073-ed2a-4656-938c-e7f063f4ec14.png?fm=png&crop=focalpoint&fit=crop&fp-x=0.1962&fp-y=0.8692&fp-z=2.6918&w=1200&border=2%2CF4F2F7&border-radius=8%2C8%2C8%2C8&border-radius-inner=8%2C8%2C8%2C8&blend-align=bottom&blend-mode=normal&blend-x=0&blend-w=1200&blend64=aHR0cHM6Ly9pbWFnZXMudGFuZ28udXMvc3RhdGljL21hZGUtd2l0aC10YW5nby13YXRlcm1hcmstdjIucG5n&mark-x=485&mark-y=557&m64=aHR0cHM6Ly9pbWFnZXMudGFuZ28udXMvc3RhdGljL2JsYW5rLnBuZz9tYXNrPWNvcm5lcnMmYm9yZGVyPTYlMkNGRjc0NDImdz0yMzEmaD0xNTcmZml0PWNyb3AmY29ybmVyLXJhZGl1cz0xMA%3D%3D" style="border-radius: 8px; border: 1px solid #F4F2F7;" width="600" alt="Click on Save" />
</div>

<br/>
<hr/>
<div>
</div>';

  $add_book = '<h1><a href="https://app.tango.us/app/workflow/e33598e0-bfe8-49e0-83f0-fa057bbb015f?utm_source=magicCopy&utm_medium=magicCopy&utm_campaign=workflow%20export%20links" target="_blank">Adding a Book to a Box</a></h1>
<div><b>Creation Date:</b> March 31, 2024</div>
<div><b>Created By:</b> Mohammed Amaan</div>
<div><a href="https://app.tango.us/app/workflow/e33598e0-bfe8-49e0-83f0-fa057bbb015f?utm_source=magicCopy&utm_medium=magicCopy&utm_campaign=workflow%20export%20links" target="_blank">View most recent version on Tango.us</a></div>
<div style="height: 24px">&#8203;</div>
<hr />
<div style="height: 24px">&#8203;</div>
<div><h2><a href="http://localhost/LGMS/psychology/finding-books-psychology"># Navigate to the required box</a></h2></div>

<div><h3>1. Click on Add/Reuse Book</h3>
<img src="https://images.tango.us/workflows/e33598e0-bfe8-49e0-83f0-fa057bbb015f/steps/07da3f50-9fc4-4084-a4f5-7b7bda143000/ca18dfb2-b084-46b7-90a5-af2ed85157ab.png?fm=png&crop=focalpoint&fit=crop&fp-x=0.3900&fp-y=0.7626&fp-z=2.4015&w=1200&border=2%2CF4F2F7&border-radius=8%2C8%2C8%2C8&border-radius-inner=8%2C8%2C8%2C8&blend-align=bottom&blend-mode=normal&blend-x=0&blend-w=1200&blend64=aHR0cHM6Ly9pbWFnZXMudGFuZ28udXMvc3RhdGljL21hZGUtd2l0aC10YW5nby13YXRlcm1hcmstdjIucG5n&mark-x=432&mark-y=454&m64=aHR0cHM6Ly9pbWFnZXMudGFuZ28udXMvc3RhdGljL2JsYW5rLnBuZz9tYXNrPWNvcm5lcnMmYm9yZGVyPTYlMkNGRjc0NDImdz0zMzUmaD03MSZmaXQ9Y3JvcCZjb3JuZXItcmFkaXVzPTEw" style="border-radius: 8px; border: 1px solid #F4F2F7;" width="600" alt="Click on Add/Reuse Book" />
</div>

<div><h3>2. Enter the Title</h3>
<img src="https://images.tango.us/workflows/e33598e0-bfe8-49e0-83f0-fa057bbb015f/steps/caa24488-411d-4c2b-9d91-3a2ea2e71931/e2bb6d54-1032-4ff9-b44b-ed2eddc6defa.png?fm=png&crop=focalpoint&fit=crop&fp-x=0.5005&fp-y=0.2565&fp-z=1.1706&w=1200&border=2%2CF4F2F7&border-radius=8%2C8%2C8%2C8&border-radius-inner=8%2C8%2C8%2C8&blend-align=bottom&blend-mode=normal&blend-x=0&blend-w=1200&blend64=aHR0cHM6Ly9pbWFnZXMudGFuZ28udXMvc3RhdGljL21hZGUtd2l0aC10YW5nby13YXRlcm1hcmstdjIucG5n&mark-x=102&mark-y=264&m64=aHR0cHM6Ly9pbWFnZXMudGFuZ28udXMvc3RhdGljL2JsYW5rLnBuZz9tYXNrPWNvcm5lcnMmYm9yZGVyPTYlMkNGRjc0NDImdz05OTcmaD02MSZmaXQ9Y3JvcCZjb3JuZXItcmFkaXVzPTEw" style="border-radius: 8px; border: 1px solid #F4F2F7;" width="600" alt="Enter the Title" />
</div>

<div><h3>3. Enter the  Author/Editor</h3>
<img src="https://images.tango.us/workflows/e33598e0-bfe8-49e0-83f0-fa057bbb015f/steps/3d96fff4-6d47-472a-8f59-528fb0fb8bbf/16b8d8a0-9f8b-4a9f-a512-ae33bcc3de3f.png?fm=png&crop=focalpoint&fit=crop&fp-x=0.5005&fp-y=0.3462&fp-z=1.1706&w=1200&border=2%2CF4F2F7&border-radius=8%2C8%2C8%2C8&border-radius-inner=8%2C8%2C8%2C8&blend-align=bottom&blend-mode=normal&blend-x=0&blend-w=1200&blend64=aHR0cHM6Ly9pbWFnZXMudGFuZ28udXMvc3RhdGljL21hZGUtd2l0aC10YW5nby13YXRlcm1hcmstdjIucG5n&mark-x=102&mark-y=367&m64=aHR0cHM6Ly9pbWFnZXMudGFuZ28udXMvc3RhdGljL2JsYW5rLnBuZz9tYXNrPWNvcm5lcnMmYm9yZGVyPTYlMkNGRjc0NDImdz05OTcmaD02MSZmaXQ9Y3JvcCZjb3JuZXItcmFkaXVzPTEw" style="border-radius: 8px; border: 1px solid #F4F2F7;" width="600" alt="Enter the  Author/Editor" />
</div>

<div><h3>4. Enter the Publisher</h3>
<img src="https://images.tango.us/workflows/e33598e0-bfe8-49e0-83f0-fa057bbb015f/steps/8e95a740-ba8b-41a5-907a-55cd531ee7bd/fd37f8b0-8cad-4cd8-be31-4f72b6fdc689.png?fm=png&crop=focalpoint&fit=crop&fp-x=0.5005&fp-y=0.4360&fp-z=1.1706&w=1200&border=2%2CF4F2F7&border-radius=8%2C8%2C8%2C8&border-radius-inner=8%2C8%2C8%2C8&blend-align=bottom&blend-mode=normal&blend-x=0&blend-w=1200&blend64=aHR0cHM6Ly9pbWFnZXMudGFuZ28udXMvc3RhdGljL21hZGUtd2l0aC10YW5nby13YXRlcm1hcmstdjIucG5n&mark-x=102&mark-y=460&m64=aHR0cHM6Ly9pbWFnZXMudGFuZ28udXMvc3RhdGljL2JsYW5rLnBuZz9tYXNrPWNvcm5lcnMmYm9yZGVyPTYlMkNGRjc0NDImdz05OTcmaD02MSZmaXQ9Y3JvcCZjb3JuZXItcmFkaXVzPTEw" style="border-radius: 8px; border: 1px solid #F4F2F7;" width="600" alt="Enter the Publisher" />
</div>

<div><h3>5. Enter the Year</h3>
<img src="https://images.tango.us/workflows/e33598e0-bfe8-49e0-83f0-fa057bbb015f/steps/38d38619-9e38-4d0e-8134-fa733154ce9b/ec01bd18-092e-45e6-a562-5e2cf55ea75e.png?fm=png&crop=focalpoint&fit=crop&fp-x=0.5005&fp-y=0.5258&fp-z=1.1706&w=1200&border=2%2CF4F2F7&border-radius=8%2C8%2C8%2C8&border-radius-inner=8%2C8%2C8%2C8&blend-align=bottom&blend-mode=normal&blend-x=0&blend-w=1200&blend64=aHR0cHM6Ly9pbWFnZXMudGFuZ28udXMvc3RhdGljL21hZGUtd2l0aC10YW5nby13YXRlcm1hcmstdjIucG5n&mark-x=102&mark-y=460&m64=aHR0cHM6Ly9pbWFnZXMudGFuZ28udXMvc3RhdGljL2JsYW5rLnBuZz9tYXNrPWNvcm5lcnMmYm9yZGVyPTYlMkNGRjc0NDImdz05OTcmaD02MSZmaXQ9Y3JvcCZjb3JuZXItcmFkaXVzPTEw" style="border-radius: 8px; border: 1px solid #F4F2F7;" width="600" alt="Enter the Year" />
</div>

<div><h3>6. Enter the Edition</h3>
<img src="https://images.tango.us/workflows/e33598e0-bfe8-49e0-83f0-fa057bbb015f/steps/25ea8b9c-2371-40a2-90ce-cc41bfc4323f/44b06cf2-fa64-40f7-8200-7b2764f90f17.png?fm=png&crop=focalpoint&fit=crop&fp-x=0.5005&fp-y=0.4360&fp-z=1.1706&w=1200&border=2%2CF4F2F7&border-radius=8%2C8%2C8%2C8&border-radius-inner=8%2C8%2C8%2C8&blend-align=bottom&blend-mode=normal&blend-x=0&blend-w=1200&blend64=aHR0cHM6Ly9pbWFnZXMudGFuZ28udXMvc3RhdGljL21hZGUtd2l0aC10YW5nby13YXRlcm1hcmstdjIucG5n&mark-x=102&mark-y=460&m64=aHR0cHM6Ly9pbWFnZXMudGFuZ28udXMvc3RhdGljL2JsYW5rLnBuZz9tYXNrPWNvcm5lcnMmYm9yZGVyPTYlMkNGRjc0NDImdz05OTcmaD02MSZmaXQ9Y3JvcCZjb3JuZXItcmFkaXVzPTEw" style="border-radius: 8px; border: 1px solid #F4F2F7;" width="600" alt="Enter the Edition" />
</div>

<div><h3>7. Click on Cover Picture to add a cover picture ( optional )</h3>
<img src="https://images.tango.us/workflows/e33598e0-bfe8-49e0-83f0-fa057bbb015f/steps/f7806d55-30dc-437b-a4de-bc9d201e19fa/0db5112d-40de-4745-8ec8-29ff452d103b.png?fm=png&crop=focalpoint&fit=crop&fp-x=0.5005&fp-y=0.3805&fp-z=1.1706&w=1200&border=2%2CF4F2F7&border-radius=8%2C8%2C8%2C8&border-radius-inner=8%2C8%2C8%2C8&blend-align=bottom&blend-mode=normal&blend-x=0&blend-w=1200&blend64=aHR0cHM6Ly9pbWFnZXMudGFuZ28udXMvc3RhdGljL21hZGUtd2l0aC10YW5nby13YXRlcm1hcmstdjIucG5n&mark-x=102&mark-y=416&m64=aHR0cHM6Ly9pbWFnZXMudGFuZ28udXMvc3RhdGljL2JsYW5rLnBuZz9tYXNrPWNvcm5lcnMmYm9yZGVyPTYlMkNGRjc0NDImdz05OTcmaD00MSZmaXQ9Y3JvcCZjb3JuZXItcmFkaXVzPTEw" style="border-radius: 8px; border: 1px solid #F4F2F7;" width="600" alt="Click on Cover Picture to add a cover picture ( optional )" />
</div>

<div><h3>8. Enter a discription of the book</h3>
<img src="https://images.tango.us/workflows/e33598e0-bfe8-49e0-83f0-fa057bbb015f/steps/b229e287-b7e7-40f0-9f42-763541029b40/455c7d25-aec1-426e-aff3-72ec76a5ef8b.png?fm=png&crop=focalpoint&fit=crop&fp-x=0.5005&fp-y=0.4175&fp-z=1.1706&w=1200&border=2%2CF4F2F7&border-radius=8%2C8%2C8%2C8&border-radius-inner=8%2C8%2C8%2C8&blend-align=bottom&blend-mode=normal&blend-x=0&blend-w=1200&blend64=aHR0cHM6Ly9pbWFnZXMudGFuZ28udXMvc3RhdGljL21hZGUtd2l0aC10YW5nby13YXRlcm1hcmstdjIucG5n&mark-x=102&mark-y=345&m64=aHR0cHM6Ly9pbWFnZXMudGFuZ28udXMvc3RhdGljL2JsYW5rLnBuZz9tYXNrPWNvcm5lcnMmYm9yZGVyPTYlMkNGRjc0NDImdz05OTcmaD0yNjgmZml0PWNyb3AmY29ybmVyLXJhZGl1cz0xMA%3D%3D" style="border-radius: 8px; border: 1px solid #F4F2F7;" width="600" alt="Enter a discription of the book" />
</div>

<div><h2>ðŸ–¨ï¸ If the type is Print follow the instructions below</h2></div>

<div><h3>9. Enter the Call Number</h3>
<img src="https://images.tango.us/workflows/e33598e0-bfe8-49e0-83f0-fa057bbb015f/steps/c460dbf7-2587-4390-915a-40b69b33b5e1/3b455d73-3dce-485e-a3eb-adbe6273fef4.png?fm=png&crop=focalpoint&fit=crop&fp-x=0.5005&fp-y=0.3844&fp-z=1.1706&w=1200&border=2%2CF4F2F7&border-radius=8%2C8%2C8%2C8&border-radius-inner=8%2C8%2C8%2C8&blend-align=bottom&blend-mode=normal&blend-x=0&blend-w=1200&blend64=aHR0cHM6Ly9pbWFnZXMudGFuZ28udXMvc3RhdGljL21hZGUtd2l0aC10YW5nby13YXRlcm1hcmstdjIucG5n&mark-x=102&mark-y=411&m64=aHR0cHM6Ly9pbWFnZXMudGFuZ28udXMvc3RhdGljL2JsYW5rLnBuZz9tYXNrPWNvcm5lcnMmYm9yZGVyPTYlMkNGRjc0NDImdz05OTcmaD02MSZmaXQ9Y3JvcCZjb3JuZXItcmFkaXVzPTEw" style="border-radius: 8px; border: 1px solid #F4F2F7;" width="600" alt="Enter the Call Number" />
</div>

<div><h3>10. Enter the Location</h3>
<img src="https://images.tango.us/workflows/e33598e0-bfe8-49e0-83f0-fa057bbb015f/steps/87976202-c905-436b-841b-640ca9706531/918cd941-02c1-4ba0-ac83-05778521f4ee.png?fm=png&crop=focalpoint&fit=crop&fp-x=0.5005&fp-y=0.4742&fp-z=1.1706&w=1200&border=2%2CF4F2F7&border-radius=8%2C8%2C8%2C8&border-radius-inner=8%2C8%2C8%2C8&blend-align=bottom&blend-mode=normal&blend-x=0&blend-w=1200&blend64=aHR0cHM6Ly9pbWFnZXMudGFuZ28udXMvc3RhdGljL21hZGUtd2l0aC10YW5nby13YXRlcm1hcmstdjIucG5n&mark-x=102&mark-y=460&m64=aHR0cHM6Ly9pbWFnZXMudGFuZ28udXMvc3RhdGljL2JsYW5rLnBuZz9tYXNrPWNvcm5lcnMmYm9yZGVyPTYlMkNGRjc0NDImdz05OTcmaD02MSZmaXQ9Y3JvcCZjb3JuZXItcmFkaXVzPTEw" style="border-radius: 8px; border: 1px solid #F4F2F7;" width="600" alt="Enter the Location" />
</div>

<div><h3>11. Enter the Link Link Text</h3>
<img src="https://images.tango.us/workflows/e33598e0-bfe8-49e0-83f0-fa057bbb015f/steps/d650afb6-3ea3-4dc2-bb78-ea5ea8ce8881/7dbaa728-5356-4b07-9577-5ef8954727d1.png?fm=png&crop=focalpoint&fit=crop&fp-x=0.5005&fp-y=0.6190&fp-z=1.1706&w=1200&border=2%2CF4F2F7&border-radius=8%2C8%2C8%2C8&border-radius-inner=8%2C8%2C8%2C8&blend-align=bottom&blend-mode=normal&blend-x=0&blend-w=1200&blend64=aHR0cHM6Ly9pbWFnZXMudGFuZ28udXMvc3RhdGljL21hZGUtd2l0aC10YW5nby13YXRlcm1hcmstdjIucG5n&mark-x=102&mark-y=513&m64=aHR0cHM6Ly9pbWFnZXMudGFuZ28udXMvc3RhdGljL2JsYW5rLnBuZz9tYXNrPWNvcm5lcnMmYm9yZGVyPTYlMkNGRjc0NDImdz05OTcmaD02MSZmaXQ9Y3JvcCZjb3JuZXItcmFkaXVzPTEw" style="border-radius: 8px; border: 1px solid #F4F2F7;" width="600" alt="Enter the Link Link Text" />
</div>

<div><h3>12. Enter the URL</h3>
<img src="https://images.tango.us/workflows/e33598e0-bfe8-49e0-83f0-fa057bbb015f/steps/91b3fd2d-e36a-42be-9fa3-3eef35ef7f15/b6d52c58-abe4-4d25-8380-f5fc7233a80c.png?fm=png&crop=focalpoint&fit=crop&fp-x=0.5005&fp-y=0.7088&fp-z=1.1706&w=1200&border=2%2CF4F2F7&border-radius=8%2C8%2C8%2C8&border-radius-inner=8%2C8%2C8%2C8&blend-align=bottom&blend-mode=normal&blend-x=0&blend-w=1200&blend64=aHR0cHM6Ly9pbWFnZXMudGFuZ28udXMvc3RhdGljL21hZGUtd2l0aC10YW5nby13YXRlcm1hcmstdjIucG5n&mark-x=102&mark-y=616&m64=aHR0cHM6Ly9pbWFnZXMudGFuZ28udXMvc3RhdGljL2JsYW5rLnBuZz9tYXNrPWNvcm5lcnMmYm9yZGVyPTYlMkNGRjc0NDImdz05OTcmaD02MSZmaXQ9Y3JvcCZjb3JuZXItcmFkaXVzPTEw" style="border-radius: 8px; border: 1px solid #F4F2F7;" width="600" alt="Enter the URL" />
</div>

<div><h2>ðŸ“” If the type is an Ebook, follow the instructions below.</h2></div>

<div><h3>13. Select eBook from Type</h3>
<img src="https://images.tango.us/workflows/e33598e0-bfe8-49e0-83f0-fa057bbb015f/steps/9df83f36-beff-4488-975b-d624f9daa7c5/8f1058fa-322e-470d-9281-5afddff28550.png?fm=png&crop=focalpoint&fit=crop&fp-x=0.5005&fp-y=0.4574&fp-z=1.1706&w=1200&border=2%2CF4F2F7&border-radius=8%2C8%2C8%2C8&border-radius-inner=8%2C8%2C8%2C8&blend-align=bottom&blend-mode=normal&blend-x=0&blend-w=1200&blend64=aHR0cHM6Ly9pbWFnZXMudGFuZ28udXMvc3RhdGljL21hZGUtd2l0aC10YW5nby13YXRlcm1hcmstdjIucG5n&mark-x=102&mark-y=460&m64=aHR0cHM6Ly9pbWFnZXMudGFuZ28udXMvc3RhdGljL2JsYW5rLnBuZz9tYXNrPWNvcm5lcnMmYm9yZGVyPTYlMkNGRjc0NDImdz05OTcmaD02MSZmaXQ9Y3JvcCZjb3JuZXItcmFkaXVzPTEw" style="border-radius: 8px; border: 1px solid #F4F2F7;" width="600" alt="Select eBook from Type" />
</div>

<div><h3>14. Enter the  Link Text</h3>
<img src="https://images.tango.us/workflows/e33598e0-bfe8-49e0-83f0-fa057bbb015f/steps/ab459363-f65c-4414-9ca5-6a930fb43906/949646a7-49e8-4d8d-ac27-d2bd3552a8fa.png?fm=png&crop=focalpoint&fit=crop&fp-x=0.5005&fp-y=0.6190&fp-z=1.1706&w=1200&border=2%2CF4F2F7&border-radius=8%2C8%2C8%2C8&border-radius-inner=8%2C8%2C8%2C8&blend-align=bottom&blend-mode=normal&blend-x=0&blend-w=1200&blend64=aHR0cHM6Ly9pbWFnZXMudGFuZ28udXMvc3RhdGljL21hZGUtd2l0aC10YW5nby13YXRlcm1hcmstdjIucG5n&mark-x=102&mark-y=513&m64=aHR0cHM6Ly9pbWFnZXMudGFuZ28udXMvc3RhdGljL2JsYW5rLnBuZz9tYXNrPWNvcm5lcnMmYm9yZGVyPTYlMkNGRjc0NDImdz05OTcmaD02MSZmaXQ9Y3JvcCZjb3JuZXItcmFkaXVzPTEw" style="border-radius: 8px; border: 1px solid #F4F2F7;" width="600" alt="Enter the  Link Text" />
</div>

<div><h3>15. Enter the URL to the Book</h3>
<img src="https://images.tango.us/workflows/e33598e0-bfe8-49e0-83f0-fa057bbb015f/steps/a0137618-881e-407c-a2f5-4423235a3b86/b0194519-0e3c-4952-bb4a-a04833cb8bcd.png?fm=png&crop=focalpoint&fit=crop&fp-x=0.5005&fp-y=0.7088&fp-z=1.1706&w=1200&border=2%2CF4F2F7&border-radius=8%2C8%2C8%2C8&border-radius-inner=8%2C8%2C8%2C8&blend-align=bottom&blend-mode=normal&blend-x=0&blend-w=1200&blend64=aHR0cHM6Ly9pbWFnZXMudGFuZ28udXMvc3RhdGljL21hZGUtd2l0aC10YW5nby13YXRlcm1hcmstdjIucG5n&mark-x=102&mark-y=616&m64=aHR0cHM6Ly9pbWFnZXMudGFuZ28udXMvc3RhdGljL2JsYW5rLnBuZz9tYXNrPWNvcm5lcnMmYm9yZGVyPTYlMkNGRjc0NDImdz05OTcmaD02MSZmaXQ9Y3JvcCZjb3JuZXItcmFkaXVzPTEw" style="border-radius: 8px; border: 1px solid #F4F2F7;" width="600" alt="Enter the URL to the Book" />
</div>

<div><h3>16. Click on Save to add the book to your box.</h3>
<img src="https://images.tango.us/workflows/e33598e0-bfe8-49e0-83f0-fa057bbb015f/steps/18a01da9-d8e7-49d7-9b6b-398214fe418b/b70d1a09-8d43-4fdb-870a-8e2fa0ef7fc1.png?fm=png&crop=focalpoint&fit=crop&fp-x=0.1962&fp-y=0.8704&fp-z=2.6918&w=1200&border=2%2CF4F2F7&border-radius=8%2C8%2C8%2C8&border-radius-inner=8%2C8%2C8%2C8&blend-align=bottom&blend-mode=normal&blend-x=0&blend-w=1200&blend64=aHR0cHM6Ly9pbWFnZXMudGFuZ28udXMvc3RhdGljL21hZGUtd2l0aC10YW5nby13YXRlcm1hcmstdjIucG5n&mark-x=485&mark-y=560&m64=aHR0cHM6Ly9pbWFnZXMudGFuZ28udXMvc3RhdGljL2JsYW5rLnBuZz9tYXNrPWNvcm5lcnMmYm9yZGVyPTYlMkNGRjc0NDImdz0yMzEmaD0xNTcmZml0PWNyb3AmY29ybmVyLXJhZGl1cz0xMA%3D%3D" style="border-radius: 8px; border: 1px solid #F4F2F7;" width="600" alt="Click on Save to add the book to your box." />
</div>

<br/>
<hr/>
<div>
<span>Created with </span><a href="https://tango.us?utm_source=magicCopy&utm_medium=magicCopy&utm_campaign=workflow%20export%20links" target="_blank" style="color: #256EFF">Tango.us
    </a>
</div>';

  $reuse_book = '<h1><a href="https://app.tango.us/app/workflow/6da44a15-c065-4681-84b7-74fe6cd3b91f?utm_source=magicCopy&utm_medium=magicCopy&utm_campaign=workflow%20export%20links" target="_blank">Reuse A book</a></h1>
<div><b>Creation Date:</b> April 6, 2024</div>
<div><b>Created By:</b> Mohammed Amaan</div>
<div><a href="https://app.tango.us/app/workflow/6da44a15-c065-4681-84b7-74fe6cd3b91f?utm_source=magicCopy&utm_medium=magicCopy&utm_campaign=workflow%20export%20links" target="_blank">View most recent version on Tango.us</a></div>
<div style="height: 24px">&#8203;</div>
<hr />
<div style="height: 24px">&#8203;</div>


<div><h2><a href="http://localhost/LGMS/psychology"># Navigate to the Required section</a></h2></div>

<div><h3>1. Click on Add/Reuse Book</h3>
<img src="https://images.tango.us/workflows/6da44a15-c065-4681-84b7-74fe6cd3b91f/steps/511defd6-5c4f-4925-ac02-cdd76e61b9c4/b3c498c3-eb3e-489b-b2bf-d545f8e862dc.png?fm=png&crop=focalpoint&fit=crop&fp-x=0.3900&fp-y=0.6246&fp-z=2.4015&w=1200&border=2%2CF4F2F7&border-radius=8%2C8%2C8%2C8&border-radius-inner=8%2C8%2C8%2C8&blend-align=bottom&blend-mode=normal&blend-x=0&blend-w=1200&blend64=aHR0cHM6Ly9pbWFnZXMudGFuZ28udXMvc3RhdGljL21hZGUtd2l0aC10YW5nby13YXRlcm1hcmstdjIucG5n&mark-x=432&mark-y=454&m64=aHR0cHM6Ly9pbWFnZXMudGFuZ28udXMvc3RhdGljL2JsYW5rLnBuZz9tYXNrPWNvcm5lcnMmYm9yZGVyPTYlMkNGRjc0NDImdz0zMzUmaD03MSZmaXQ9Y3JvcCZjb3JuZXItcmFkaXVzPTEw" style="border-radius: 8px; border: 1px solid #F4F2F7;" width="600" alt="Click on Add/Reuse Book" />
</div>

<div><h3>2. Click on Reuse Book</h3>
<img src="https://images.tango.us/workflows/6da44a15-c065-4681-84b7-74fe6cd3b91f/steps/22db2bc8-2aec-4802-9866-be971d197265/435d0d45-ed51-493f-9777-18437e3741c0.png?fm=png&crop=focalpoint&fit=crop&fp-x=0.2864&fp-y=0.1661&fp-z=2.4445&w=1200&border=2%2CF4F2F7&border-radius=8%2C8%2C8%2C8&border-radius-inner=8%2C8%2C8%2C8&blend-align=bottom&blend-mode=normal&blend-x=0&blend-w=1200&blend64=aHR0cHM6Ly9pbWFnZXMudGFuZ28udXMvc3RhdGljL21hZGUtd2l0aC10YW5nby13YXRlcm1hcmstdjIucG5n&mark-x=440&mark-y=336&m64=aHR0cHM6Ly9pbWFnZXMudGFuZ28udXMvc3RhdGljL2JsYW5rLnBuZz9tYXNrPWNvcm5lcnMmYm9yZGVyPTYlMkNGRjc0NDImdz0zMjAmaD0xMjQmZml0PWNyb3AmY29ybmVyLXJhZGl1cz0xMA%3D%3D" style="border-radius: 8px; border: 1px solid #F4F2F7;" width="600" alt="Click on Reuse Book" />
</div>

<div><h3>3. Select the book item from the drop down</h3>
<img src="https://images.tango.us/workflows/6da44a15-c065-4681-84b7-74fe6cd3b91f/steps/d7b76074-7363-4de8-be06-0bb708525ed1/952c84b9-2dfd-4617-a2c5-9d5e21403f2e.png?fm=png&crop=focalpoint&fit=crop&fp-x=0.5005&fp-y=0.2565&fp-z=1.1706&w=1200&border=2%2CF4F2F7&border-radius=8%2C8%2C8%2C8&border-radius-inner=8%2C8%2C8%2C8&blend-align=bottom&blend-mode=normal&blend-x=0&blend-w=1200&blend64=aHR0cHM6Ly9pbWFnZXMudGFuZ28udXMvc3RhdGljL21hZGUtd2l0aC10YW5nby13YXRlcm1hcmstdjIucG5n&mark-x=102&mark-y=264&m64=aHR0cHM6Ly9pbWFnZXMudGFuZ28udXMvc3RhdGljL2JsYW5rLnBuZz9tYXNrPWNvcm5lcnMmYm9yZGVyPTYlMkNGRjc0NDImdz05OTcmaD02MSZmaXQ9Y3JvcCZjb3JuZXItcmFkaXVzPTEw" style="border-radius: 8px; border: 1px solid #F4F2F7;" width="600" alt="Select the book item from the drop down" />
</div>

<div><h3>4. Click on Save to add the book to your box</h3>
<img src="https://images.tango.us/workflows/6da44a15-c065-4681-84b7-74fe6cd3b91f/steps/e0732c17-c2f1-49c7-887c-40df8795614f/e494fd73-3fec-457a-bcfd-4e26b5312ca9.png?fm=png&crop=focalpoint&fit=crop&fp-x=0.1962&fp-y=0.8704&fp-z=2.6918&w=1200&border=2%2CF4F2F7&border-radius=8%2C8%2C8%2C8&border-radius-inner=8%2C8%2C8%2C8&blend-align=bottom&blend-mode=normal&blend-x=0&blend-w=1200&blend64=aHR0cHM6Ly9pbWFnZXMudGFuZ28udXMvc3RhdGljL21hZGUtd2l0aC10YW5nby13YXRlcm1hcmstdjIucG5n&mark-x=485&mark-y=560&m64=aHR0cHM6Ly9pbWFnZXMudGFuZ28udXMvc3RhdGljL2JsYW5rLnBuZz9tYXNrPWNvcm5lcnMmYm9yZGVyPTYlMkNGRjc0NDImdz0yMzEmaD0xNTcmZml0PWNyb3AmY29ybmVyLXJhZGl1cz0xMA%3D%3D" style="border-radius: 8px; border: 1px solid #F4F2F7;" width="600" alt="Click on Save to add the book to your box" />
</div>

<br/>
<hr/>
<div>
<span>Created with </span><a href="https://tango.us?utm_source=magicCopy&utm_medium=magicCopy&utm_campaign=workflow%20export%20links" target="_blank" style="color: #256EFF">Tango.us
    </a>
</div>';

  $add_database = '<h1><a href="https://app.tango.us/app/workflow/1c359512-d3ef-4064-ac76-b549ee754a93?utm_source=magicCopy&utm_medium=magicCopy&utm_campaign=workflow%20export%20links" target="_blank">Adding a DataBase to the Box</a></h1>
<div><b>Creation Date:</b> March 31, 2024</div>
<div><b>Created By:</b> Mohammed Amaan</div>
<div><a href="https://app.tango.us/app/workflow/1c359512-d3ef-4064-ac76-b549ee754a93?utm_source=magicCopy&utm_medium=magicCopy&utm_campaign=workflow%20export%20links" target="_blank">View most recent version on Tango.us</a></div>
<div style="height: 24px">&#8203;</div>
<hr />
<div style="height: 24px">&#8203;</div>


<div><h2><a href="http://localhost/LGMS/psychology/finding-books-psychology"># Navigate to the Box where the database is to be added </a></h2></div>

<div><h3>1. Click on Add/Reuse Database</h3>
<img src="https://images.tango.us/workflows/1c359512-d3ef-4064-ac76-b549ee754a93/steps/6f935eaf-3cdf-4aa1-9a3d-facef694bec6/70c2d897-1595-43b5-a909-65cd11866854.png?fm=png&crop=focalpoint&fit=crop&fp-x=0.4042&fp-y=0.6515&fp-z=2.2481&w=1200&border=2%2CF4F2F7&border-radius=8%2C8%2C8%2C8&border-radius-inner=8%2C8%2C8%2C8&blend-align=bottom&blend-mode=normal&blend-x=0&blend-w=1200&blend64=aHR0cHM6Ly9pbWFnZXMudGFuZ28udXMvc3RhdGljL21hZGUtd2l0aC10YW5nby13YXRlcm1hcmstdjIucG5n&mark-x=405&mark-y=457&m64=aHR0cHM6Ly9pbWFnZXMudGFuZ28udXMvc3RhdGljL2JsYW5rLnBuZz9tYXNrPWNvcm5lcnMmYm9yZGVyPTYlMkNGRjc0NDImdz0zOTEmaD02NyZmaXQ9Y3JvcCZjb3JuZXItcmFkaXVzPTEw" style="border-radius: 8px; border: 1px solid #F4F2F7;" width="600" alt="Click on Add/Reuse Database" />
</div>

<div><h3>2. Click on Database Title: </h3>
<p>Enter the Title</p>
<img src="https://images.tango.us/workflows/1c359512-d3ef-4064-ac76-b549ee754a93/steps/7a1b7889-c4f1-4bfd-b190-77998ce095a4/2db26591-ae26-4ee8-be9b-e49ea23fd239.png?fm=png&crop=focalpoint&fit=crop&fp-x=0.5005&fp-y=0.2565&fp-z=1.1706&w=1200&border=2%2CF4F2F7&border-radius=8%2C8%2C8%2C8&border-radius-inner=8%2C8%2C8%2C8&blend-align=bottom&blend-mode=normal&blend-x=0&blend-w=1200&blend64=aHR0cHM6Ly9pbWFnZXMudGFuZ28udXMvc3RhdGljL21hZGUtd2l0aC10YW5nby13YXRlcm1hcmstdjIucG5n&mark-x=102&mark-y=264&m64=aHR0cHM6Ly9pbWFnZXMudGFuZ28udXMvc3RhdGljL2JsYW5rLnBuZz9tYXNrPWNvcm5lcnMmYm9yZGVyPTYlMkNGRjc0NDImdz05OTcmaD02MSZmaXQ9Y3JvcCZjb3JuZXItcmFkaXVzPTEw" style="border-radius: 8px; border: 1px solid #F4F2F7;" width="600" alt="Click on Database Title: " />
</div>

<div><h3>3. Click on Link Text:</h3>
<p>Enter the Link text</p>
<img src="https://images.tango.us/workflows/1c359512-d3ef-4064-ac76-b549ee754a93/steps/08de9ad7-7656-4906-9766-4ae9a9d55800/abba0851-38e0-4a6d-9c45-0fe7dbec801a.png?fm=png&crop=focalpoint&fit=crop&fp-x=0.5005&fp-y=0.3462&fp-z=1.1706&w=1200&border=2%2CF4F2F7&border-radius=8%2C8%2C8%2C8&border-radius-inner=8%2C8%2C8%2C8&blend-align=bottom&blend-mode=normal&blend-x=0&blend-w=1200&blend64=aHR0cHM6Ly9pbWFnZXMudGFuZ28udXMvc3RhdGljL21hZGUtd2l0aC10YW5nby13YXRlcm1hcmstdjIucG5n&mark-x=102&mark-y=367&m64=aHR0cHM6Ly9pbWFnZXMudGFuZ28udXMvc3RhdGljL2JsYW5rLnBuZz9tYXNrPWNvcm5lcnMmYm9yZGVyPTYlMkNGRjc0NDImdz05OTcmaD02MSZmaXQ9Y3JvcCZjb3JuZXItcmFkaXVzPTEw" style="border-radius: 8px; border: 1px solid #F4F2F7;" width="600" alt="Click on Link Text:" />
</div>

<div><h3>4. Click on Database Link</h3>
<p>Enter the Database Link</p>
<img src="https://images.tango.us/workflows/1c359512-d3ef-4064-ac76-b549ee754a93/steps/d8cacaaa-fef5-4042-9fe2-8fe4444939a2/3c98833e-cf75-4b3d-811d-cfc95cc57a11.png?fm=png&crop=focalpoint&fit=crop&fp-x=0.5005&fp-y=0.4360&fp-z=1.1706&w=1200&border=2%2CF4F2F7&border-radius=8%2C8%2C8%2C8&border-radius-inner=8%2C8%2C8%2C8&blend-align=bottom&blend-mode=normal&blend-x=0&blend-w=1200&blend64=aHR0cHM6Ly9pbWFnZXMudGFuZ28udXMvc3RhdGljL21hZGUtd2l0aC10YW5nby13YXRlcm1hcmstdjIucG5n&mark-x=102&mark-y=460&m64=aHR0cHM6Ly9pbWFnZXMudGFuZ28udXMvc3RhdGljL2JsYW5rLnBuZz9tYXNrPWNvcm5lcnMmYm9yZGVyPTYlMkNGRjc0NDImdz05OTcmaD02MSZmaXQ9Y3JvcCZjb3JuZXItcmFkaXVzPTEw" style="border-radius: 8px; border: 1px solid #F4F2F7;" width="600" alt="Click on Database Link" />
</div>

<div><h3>5. Check Include Proxy</h3>
<p>Proxy gives the you the ability to add a url proxy before being redirected to the database.</p>
<img src="https://images.tango.us/workflows/1c359512-d3ef-4064-ac76-b549ee754a93/steps/fdaf0d51-477b-4401-be0c-dd6e949f807b/e02ddcaf-bfaf-4dcd-b102-f560a462454d.png?fm=png&crop=focalpoint&fit=crop&fp-x=0.1554&fp-y=0.5292&fp-z=3.0905&w=1200&border=2%2CF4F2F7&border-radius=8%2C8%2C8%2C8&border-radius-inner=8%2C8%2C8%2C8&blend-align=bottom&blend-mode=normal&blend-x=0&blend-w=1200&blend64=aHR0cHM6Ly9pbWFnZXMudGFuZ28udXMvc3RhdGljL21hZGUtd2l0aC10YW5nby13YXRlcm1hcmstdjIucG5n&mark-x=540&mark-y=454&m64=aHR0cHM6Ly9pbWFnZXMudGFuZ28udXMvc3RhdGljL2JsYW5rLnBuZz9tYXNrPWNvcm5lcnMmYm9yZGVyPTYlMkNGRjc0NDImdz03MSZoPTcxJmZpdD1jcm9wJmNvcm5lci1yYWRpdXM9MTA%3D" style="border-radius: 8px; border: 1px solid #F4F2F7;" width="600" alt="Check Include Proxy" />
</div>

<div><h3>6. Click on Brief Description</h3>
<p>Enter a Description</p>
<img src="https://images.tango.us/workflows/1c359512-d3ef-4064-ac76-b549ee754a93/steps/71ddb844-ffe3-4eb4-93f3-65036c7b8f5a/96dac1a6-d441-4e56-afa9-5d9d48347a19.png?fm=png&crop=focalpoint&fit=crop&fp-x=0.5005&fp-y=0.5651&fp-z=1.1706&w=1200&border=2%2CF4F2F7&border-radius=8%2C8%2C8%2C8&border-radius-inner=8%2C8%2C8%2C8&blend-align=bottom&blend-mode=normal&blend-x=0&blend-w=1200&blend64=aHR0cHM6Ly9pbWFnZXMudGFuZ28udXMvc3RhdGljL21hZGUtd2l0aC10YW5nby13YXRlcm1hcmstdjIucG5n&mark-x=102&mark-y=460&m64=aHR0cHM6Ly9pbWFnZXMudGFuZ28udXMvc3RhdGljL2JsYW5rLnBuZz9tYXNrPWNvcm5lcnMmYm9yZGVyPTYlMkNGRjc0NDImdz05OTcmaD02MSZmaXQ9Y3JvcCZjb3JuZXItcmFkaXVzPTEw" style="border-radius: 8px; border: 1px solid #F4F2F7;" width="600" alt="Click on Brief Description" />
</div>

<div><h3>7. Click on Editor editing area</h3>
<p>Here you can add additional instructions or details about the database</p>
<img src="https://images.tango.us/workflows/1c359512-d3ef-4064-ac76-b549ee754a93/steps/12b80f61-7823-416e-b780-492f425f60fe/ea707a1c-4b41-48f5-8a7c-a0228fd42a7e.png?fm=png&crop=focalpoint&fit=crop&fp-x=0.5005&fp-y=0.6229&fp-z=1.1706&w=1200&border=2%2CF4F2F7&border-radius=8%2C8%2C8%2C8&border-radius-inner=8%2C8%2C8%2C8&blend-align=bottom&blend-mode=normal&blend-x=0&blend-w=1200&blend64=aHR0cHM6Ly9pbWFnZXMudGFuZ28udXMvc3RhdGljL21hZGUtd2l0aC10YW5nby13YXRlcm1hcmstdjIucG5n&mark-x=102&mark-y=413&m64=aHR0cHM6Ly9pbWFnZXMudGFuZ28udXMvc3RhdGljL2JsYW5rLnBuZz9tYXNrPWNvcm5lcnMmYm9yZGVyPTYlMkNGRjc0NDImdz05OTcmaD0yNjgmZml0PWNyb3AmY29ybmVyLXJhZGl1cz0xMA%3D%3D" style="border-radius: 8px; border: 1px solid #F4F2F7;" width="600" alt="Click on Editor editing area" />
</div>

<div><h3>8. Click on Save to add the guide to your box</h3>
<img src="https://images.tango.us/workflows/1c359512-d3ef-4064-ac76-b549ee754a93/steps/3390ce20-f74b-4c65-aea3-a41ba36cd732/06e5e58b-b44a-4e45-993c-2ca409b8af09.png?fm=png&crop=focalpoint&fit=crop&fp-x=0.1962&fp-y=0.8704&fp-z=2.6918&w=1200&border=2%2CF4F2F7&border-radius=8%2C8%2C8%2C8&border-radius-inner=8%2C8%2C8%2C8&blend-align=bottom&blend-mode=normal&blend-x=0&blend-w=1200&blend64=aHR0cHM6Ly9pbWFnZXMudGFuZ28udXMvc3RhdGljL21hZGUtd2l0aC10YW5nby13YXRlcm1hcmstdjIucG5n&mark-x=485&mark-y=560&m64=aHR0cHM6Ly9pbWFnZXMudGFuZ28udXMvc3RhdGljL2JsYW5rLnBuZz9tYXNrPWNvcm5lcnMmYm9yZGVyPTYlMkNGRjc0NDImdz0yMzEmaD0xNTcmZml0PWNyb3AmY29ybmVyLXJhZGl1cz0xMA%3D%3D" style="border-radius: 8px; border: 1px solid #F4F2F7;" width="600" alt="Click on Save to add the guide to your box" />
</div>

<br/>
<hr/>
<div>
<span>Created with </span><a href="https://tango.us?utm_source=magicCopy&utm_medium=magicCopy&utm_campaign=workflow%20export%20links" target="_blank" style="color: #256EFF">Tango.us
    </a>
</div>';

  $reuse_database = '<h1><a href="https://app.tango.us/app/workflow/83387a65-9c51-46cf-8b06-236e0217b73d?utm_source=magicCopy&utm_medium=magicCopy&utm_campaign=workflow%20export%20links" target="_blank">Reuse Database</a></h1>
<div><p>Allows one to Reuse and existing database content type from a box</p></div>
<div><b>Creation Date:</b> March 31, 2024</div>
<div><b>Created By:</b> Mohammed Amaan</div>
<div><a href="https://app.tango.us/app/workflow/83387a65-9c51-46cf-8b06-236e0217b73d?utm_source=magicCopy&utm_medium=magicCopy&utm_campaign=workflow%20export%20links" target="_blank">View most recent version on Tango.us</a></div>
<div style="height: 24px">&#8203;</div>
<hr />
<div style="height: 24px">&#8203;</div>


<div><h2><a href="http://localhost/LGMS/business-administration/finding-journal-articles-business-administration"># Navigate to the required box.</a></h2></div>

<div><h3>1. Click on Add/Reuse Database</h3>
<img src="https://images.tango.us/workflows/83387a65-9c51-46cf-8b06-236e0217b73d/steps/77f3babc-86eb-4a6b-8041-bc94518459c2/2d9326be-af1d-4922-9bd3-9022393744bd.png?fm=png&crop=focalpoint&fit=crop&fp-x=0.4042&fp-y=0.6515&fp-z=2.2481&w=1200&border=2%2CF4F2F7&border-radius=8%2C8%2C8%2C8&border-radius-inner=8%2C8%2C8%2C8&blend-align=bottom&blend-mode=normal&blend-x=0&blend-w=1200&blend64=aHR0cHM6Ly9pbWFnZXMudGFuZ28udXMvc3RhdGljL21hZGUtd2l0aC10YW5nby13YXRlcm1hcmstdjIucG5n&mark-x=405&mark-y=457&m64=aHR0cHM6Ly9pbWFnZXMudGFuZ28udXMvc3RhdGljL2JsYW5rLnBuZz9tYXNrPWNvcm5lcnMmYm9yZGVyPTYlMkNGRjc0NDImdz0zOTEmaD02NyZmaXQ9Y3JvcCZjb3JuZXItcmFkaXVzPTEw" style="border-radius: 8px; border: 1px solid #F4F2F7;" width="600" alt="Click on Add/Reuse Database" />
</div>

<div><h3>2. Click on Reuse Database</h3>
<img src="https://images.tango.us/workflows/83387a65-9c51-46cf-8b06-236e0217b73d/steps/a797e346-ff25-40bf-b640-bce414d4bc07/cd901e96-1d97-4579-9df9-8dbd559800c6.png?fm=png&crop=focalpoint&fit=crop&fp-x=0.3304&fp-y=0.1661&fp-z=2.2810&w=1200&border=2%2CF4F2F7&border-radius=8%2C8%2C8%2C8&border-radius-inner=8%2C8%2C8%2C8&blend-align=bottom&blend-mode=normal&blend-x=0&blend-w=1200&blend64=aHR0cHM6Ly9pbWFnZXMudGFuZ28udXMvc3RhdGljL21hZGUtd2l0aC10YW5nby13YXRlcm1hcmstdjIucG5n&mark-x=411&mark-y=314&m64=aHR0cHM6Ly9pbWFnZXMudGFuZ28udXMvc3RhdGljL2JsYW5rLnBuZz9tYXNrPWNvcm5lcnMmYm9yZGVyPTYlMkNGRjc0NDImdz0zNzkmaD0xMTUmZml0PWNyb3AmY29ybmVyLXJhZGl1cz0xMA%3D%3D" style="border-radius: 8px; border: 1px solid #F4F2F7;" width="600" alt="Click on Reuse Database" />
</div>

<div><h3>3. Select the desired Database</h3>
<img src="https://images.tango.us/workflows/83387a65-9c51-46cf-8b06-236e0217b73d/steps/974de293-1d00-4c4f-bdb1-0cd60dce2953/b0ac0663-6d83-4f40-93ee-be8d193a4da0.png?fm=png&crop=focalpoint&fit=crop&fp-x=0.5005&fp-y=0.2565&fp-z=1.1706&w=1200&border=2%2CF4F2F7&border-radius=8%2C8%2C8%2C8&border-radius-inner=8%2C8%2C8%2C8&blend-align=bottom&blend-mode=normal&blend-x=0&blend-w=1200&blend64=aHR0cHM6Ly9pbWFnZXMudGFuZ28udXMvc3RhdGljL21hZGUtd2l0aC10YW5nby13YXRlcm1hcmstdjIucG5n&mark-x=102&mark-y=264&m64=aHR0cHM6Ly9pbWFnZXMudGFuZ28udXMvc3RhdGljL2JsYW5rLnBuZz9tYXNrPWNvcm5lcnMmYm9yZGVyPTYlMkNGRjc0NDImdz05OTcmaD02MSZmaXQ9Y3JvcCZjb3JuZXItcmFkaXVzPTEw" style="border-radius: 8px; border: 1px solid #F4F2F7;" width="600" alt="Select the desired Database" />
</div>

<div><h3>4. Click on Save</h3>
<img src="https://images.tango.us/workflows/83387a65-9c51-46cf-8b06-236e0217b73d/steps/ed00fcca-8f9e-4927-a1e8-3300a0c70d6f/fe8d172e-8f15-4f90-abdf-a9ec9b9d75fb.png?fm=png&crop=focalpoint&fit=crop&fp-x=0.1962&fp-y=0.8704&fp-z=2.6918&w=1200&border=2%2CF4F2F7&border-radius=8%2C8%2C8%2C8&border-radius-inner=8%2C8%2C8%2C8&blend-align=bottom&blend-mode=normal&blend-x=0&blend-w=1200&blend64=aHR0cHM6Ly9pbWFnZXMudGFuZ28udXMvc3RhdGljL21hZGUtd2l0aC10YW5nby13YXRlcm1hcmstdjIucG5n&mark-x=485&mark-y=560&m64=aHR0cHM6Ly9pbWFnZXMudGFuZ28udXMvc3RhdGljL2JsYW5rLnBuZz9tYXNrPWNvcm5lcnMmYm9yZGVyPTYlMkNGRjc0NDImdz0yMzEmaD0xNTcmZml0PWNyb3AmY29ybmVyLXJhZGl1cz0xMA%3D%3D" style="border-radius: 8px; border: 1px solid #F4F2F7;" width="600" alt="Click on Save" />
</div>

<br/>
<hr/>
<div>
<span>Created with </span><a href="https://tango.us?utm_source=magicCopy&utm_medium=magicCopy&utm_campaign=workflow%20export%20links" target="_blank" style="color: #256EFF">Tango.us
    </a>
</div>';

  $add_media = '<h1><a href="https://app.tango.us/app/workflow/9fea3130-e2fc-4ed2-9d52-fbf31825c9f5?utm_source=magicCopy&utm_medium=magicCopy&utm_campaign=workflow%20export%20links" target="_blank">Adding Media</a></h1>
<div><p>The Adding Media uses another module to add libraries so the instructions on how to found on their page.</p></div>
<div><b>Creation Date:</b> March 31, 2024</div>
<div><b>Created By:</b> Mohammed Amaan</div>
<div><a href="https://app.tango.us/app/workflow/9fea3130-e2fc-4ed2-9d52-fbf31825c9f5?utm_source=magicCopy&utm_medium=magicCopy&utm_campaign=workflow%20export%20links" target="_blank">View most recent version on Tango.us</a></div>
<div style="height: 24px">&#8203;</div>
<hr />
<div style="height: 24px">&#8203;</div>


<div><h2><a href="http://localhost/LGMS/psychology/finding-books-psychology"># Navigate to the required box</a></h2></div>

<div><h3>1. Click on Add Media</h3>
<img src="https://images.tango.us/workflows/9fea3130-e2fc-4ed2-9d52-fbf31825c9f5/steps/b7ade9c2-35ac-4a75-894f-17eb917be732/c1ad845a-0c14-4434-adb9-603115414357.png?fm=png&crop=focalpoint&fit=crop&fp-x=0.3708&fp-y=0.7637&fp-z=2.6461&w=1200&border=2%2CF4F2F7&border-radius=8%2C8%2C8%2C8&border-radius-inner=8%2C8%2C8%2C8&blend-align=bottom&blend-mode=normal&blend-x=0&blend-w=1200&blend64=aHR0cHM6Ly9pbWFnZXMudGFuZ28udXMvc3RhdGljL21hZGUtd2l0aC10YW5nby13YXRlcm1hcmstdjIucG5n&mark-x=476&mark-y=451&m64=aHR0cHM6Ly9pbWFnZXMudGFuZ28udXMvc3RhdGljL2JsYW5rLnBuZz9tYXNrPWNvcm5lcnMmYm9yZGVyPTYlMkNGRjc0NDImdz0yNDcmaD03OSZmaXQ9Y3JvcCZjb3JuZXItcmFkaXVzPTEw" style="border-radius: 8px; border: 1px solid #F4F2F7;" width="600" alt="Click on Add Media" />
</div>

<div><h3>2. Select the media you would like to upload by name</h3>
<p>Additionally if you do not have any media uploaded click on create new media and then the box the says " + add new media"</p><p></p><p>The Media can be of the type </p><ul><li><p> <a target="_blank" rel="noopener noreferrer nofollow" class="admin-item__link" href="http://localhost/LGMS/media/add/audio"><strong>Audio </strong></a> A locally hosted audio file.</p></li><li><p><a target="_blank" rel="noopener noreferrer nofollow" class="admin-item__link" href="http://localhost/LGMS/media/add/document"><strong>Document </strong></a>An uploaded file or document, such as a PDF.</p></li><li><p><a target="_blank" rel="noopener noreferrer nofollow" class="admin-item__link" href="http://localhost/LGMS/media/add/image"><strong>Image </strong></a>Use local images for reusable media.</p></li><li><p><a target="_blank" rel="noopener noreferrer nofollow" class="admin-item__link" href="http://localhost/LGMS/media/add/remote_video"><strong>Remote video </strong></a>A remotely hosted video from YouTube or Vimeo.</p></li><li><p><a target="_blank" rel="noopener noreferrer nofollow" class="admin-item__link" href="http://localhost/LGMS/media/add/video"><strong>Video </strong></a>A locally hosted video file.</p></li></ul>
<img src="https://images.tango.us/workflows/9fea3130-e2fc-4ed2-9d52-fbf31825c9f5/steps/4e604438-3a05-4f8e-b075-fde56e527e87/b00e41e1-0c52-41eb-bcca-7a1a1423f3f9.png?fm=png&crop=focalpoint&fit=crop&fp-x=0.5005&fp-y=0.4091&fp-z=1.1706&w=1200&border=2%2CF4F2F7&border-radius=8%2C8%2C8%2C8&border-radius-inner=8%2C8%2C8%2C8&blend-align=bottom&blend-mode=normal&blend-x=0&blend-w=1200&blend64=aHR0cHM6Ly9pbWFnZXMudGFuZ28udXMvc3RhdGljL21hZGUtd2l0aC10YW5nby13YXRlcm1hcmstdjIucG5n&mark-x=102&mark-y=439&m64=aHR0cHM6Ly9pbWFnZXMudGFuZ28udXMvc3RhdGljL2JsYW5rLnBuZz9tYXNrPWNvcm5lcnMmYm9yZGVyPTYlMkNGRjc0NDImdz05OTcmaD02MSZmaXQ9Y3JvcCZjb3JuZXItcmFkaXVzPTEw" style="border-radius: 8px; border: 1px solid #F4F2F7;" width="600" alt="Select the media you would like to upload by name" />
</div>

<div><h3>3. Uncheck Use Media Default name</h3>
<img src="https://images.tango.us/workflows/9fea3130-e2fc-4ed2-9d52-fbf31825c9f5/steps/dce3754c-485c-4091-b85f-dc1bee1113f3/8e3bb108-5ecb-4dde-a0df-c361d28879a4.png?fm=png&crop=focalpoint&fit=crop&fp-x=0.1554&fp-y=0.5022&fp-z=3.0905&w=1200&border=2%2CF4F2F7&border-radius=8%2C8%2C8%2C8&border-radius-inner=8%2C8%2C8%2C8&blend-align=bottom&blend-mode=normal&blend-x=0&blend-w=1200&blend64=aHR0cHM6Ly9pbWFnZXMudGFuZ28udXMvc3RhdGljL21hZGUtd2l0aC10YW5nby13YXRlcm1hcmstdjIucG5n&mark-x=540&mark-y=454&m64=aHR0cHM6Ly9pbWFnZXMudGFuZ28udXMvc3RhdGljL2JsYW5rLnBuZz9tYXNrPWNvcm5lcnMmYm9yZGVyPTYlMkNGRjc0NDImdz03MSZoPTcxJmZpdD1jcm9wJmNvcm5lci1yYWRpdXM9MTA%3D" style="border-radius: 8px; border: 1px solid #F4F2F7;" width="600" alt="Uncheck Use Media Default name" />
</div>

<div><h3>4. Add a different tittle if you wish to</h3>
<img src="https://images.tango.us/workflows/9fea3130-e2fc-4ed2-9d52-fbf31825c9f5/steps/1ed70726-9407-41a5-89fa-25887d833df5/5e3d27a3-2be5-4f8c-80a0-cbaa4f7ae66a.png?fm=png&crop=focalpoint&fit=crop&fp-x=0.5005&fp-y=0.5954&fp-z=1.1706&w=1200&border=2%2CF4F2F7&border-radius=8%2C8%2C8%2C8&border-radius-inner=8%2C8%2C8%2C8&blend-align=bottom&blend-mode=normal&blend-x=0&blend-w=1200&blend64=aHR0cHM6Ly9pbWFnZXMudGFuZ28udXMvc3RhdGljL21hZGUtd2l0aC10YW5nby13YXRlcm1hcmstdjIucG5n&mark-x=102&mark-y=486&m64=aHR0cHM6Ly9pbWFnZXMudGFuZ28udXMvc3RhdGljL2JsYW5rLnBuZz9tYXNrPWNvcm5lcnMmYm9yZGVyPTYlMkNGRjc0NDImdz05OTcmaD02MSZmaXQ9Y3JvcCZjb3JuZXItcmFkaXVzPTEw" style="border-radius: 8px; border: 1px solid #F4F2F7;" width="600" alt="Add a different tittle if you wish to" />
</div>

<div><h3>5. Click on Save</h3>
<img src="https://images.tango.us/workflows/9fea3130-e2fc-4ed2-9d52-fbf31825c9f5/steps/8ca8087f-0fdd-448c-abe1-7bee4ffa5ecc/8e2dd2cd-c544-4e48-8be7-9a14122ac3bb.png?fm=png&crop=focalpoint&fit=crop&fp-x=0.8130&fp-y=0.7637&fp-z=3.7595&w=1200&border=2%2CF4F2F7&border-radius=8%2C8%2C8%2C8&border-radius-inner=8%2C8%2C8%2C8&blend-align=bottom&blend-mode=normal&blend-x=0&blend-w=1200&blend64=aHR0cHM6Ly9pbWFnZXMudGFuZ28udXMvc3RhdGljL21hZGUtd2l0aC10YW5nby13YXRlcm1hcmstdjIucG5n&mark-x=439&mark-y=380&m64=aHR0cHM6Ly9pbWFnZXMudGFuZ28udXMvc3RhdGljL2JsYW5rLnBuZz9tYXNrPWNvcm5lcnMmYm9yZGVyPTYlMkNGRjc0NDImdz0zMjMmaD0yMTkmZml0PWNyb3AmY29ybmVyLXJhZGl1cz0xMA%3D%3D" style="border-radius: 8px; border: 1px solid #F4F2F7;" width="600" alt="Click on Save" />
</div>

<br/>
<hr/>
<div>
<span>Created with </span><a href="https://tango.us?utm_source=magicCopy&utm_medium=magicCopy&utm_campaign=workflow%20export%20links" target="_blank" style="color: #256EFF">Tango.us
    </a>
</div>';

  $add_guide = '<h1><a href="https://app.tango.us/app/workflow/2433334b-218b-449e-ac47-cad62f893575?utm_source=magicCopy&utm_medium=magicCopy&utm_campaign=workflow%20export%20links" target="_blank">Creating a Guide</a></h1>
<div><b>Creation Date:</b> March 25, 2024</div>
<div><b>Created By:</b> Mohammed Amaan</div>
<div><a href="https://app.tango.us/app/workflow/2433334b-218b-449e-ac47-cad62f893575?utm_source=magicCopy&utm_medium=magicCopy&utm_campaign=workflow%20export%20links" target="_blank">View most recent version on Tango.us</a></div>
<div style="height: 24px">&#8203;</div>
<hr />
<div style="height: 24px">&#8203;</div>


<div><h2><a href="http://localhost/LGMS/lgms"># LGMS Module Landing Page | lgms</a></h2><p>Welcome to Library Guide Management System Setting up a new guide Help. Follow the steps below to create your first guide. </p>
</div>

<div><h3>1. Click on My Dashboard</h3>
<img src="https://images.tango.us/workflows/2433334b-218b-449e-ac47-cad62f893575/steps/d9e4bfb7-83b3-4425-94e2-5f60d9776602/a1194031-e14f-473b-ba43-431915d1ca37.png?fm=png&crop=focalpoint&fit=crop&fp-x=0.8818&fp-y=0.3743&fp-z=2.8169&w=1200&border=2%2CF4F2F7&border-radius=8%2C8%2C8%2C8&border-radius-inner=8%2C8%2C8%2C8&blend-align=bottom&blend-mode=normal&blend-x=0&blend-w=1200&blend64=aHR0cHM6Ly9pbWFnZXMudGFuZ28udXMvc3RhdGljL21hZGUtd2l0aC10YW5nby13YXRlcm1hcmstdjIucG5n&mark-x=614&mark-y=414&m64=aHR0cHM6Ly9pbWFnZXMudGFuZ28udXMvc3RhdGljL2JsYW5rLnBuZz9tYXNrPWNvcm5lcnMmYm9yZGVyPTYlMkNGRjc0NDImdz0zNzImaD0xNTImZml0PWNyb3AmY29ybmVyLXJhZGl1cz0xMA%3D%3D" style="border-radius: 8px; border: 1px solid #F4F2F7;" width="600" alt="Click on My Dashboard" />
</div>

<div><h3>2. Click on New</h3>
<img src="https://images.tango.us/workflows/2433334b-218b-449e-ac47-cad62f893575/steps/705953b7-6adc-4787-b923-6b1b050d6398/973e0e93-ff3e-484f-ad14-86bcb0b18772.png?fm=png&crop=focalpoint&fit=crop&fp-x=0.1329&fp-y=0.2593&fp-z=2.7599&w=1200&border=2%2CF4F2F7&border-radius=8%2C8%2C8%2C8&border-radius-inner=8%2C8%2C8%2C8&blend-align=bottom&blend-mode=normal&blend-x=0&blend-w=1200&blend64=aHR0cHM6Ly9pbWFnZXMudGFuZ28udXMvc3RhdGljL21hZGUtd2l0aC10YW5nby13YXRlcm1hcmstdjIucG5n&mark-x=337&mark-y=429&m64=aHR0cHM6Ly9pbWFnZXMudGFuZ28udXMvc3RhdGljL2JsYW5rLnBuZz9tYXNrPWNvcm5lcnMmYm9yZGVyPTYlMkNGRjc0NDImdz0yMDYmaD0xMjEmZml0PWNyb3AmY29ybmVyLXJhZGl1cz0xMA%3D%3D" style="border-radius: 8px; border: 1px solid #F4F2F7;" width="600" alt="Click on New" />
</div>

<div><h3>3. Type the name of the Subject in our case we will add Psychology </h3>
<img src="https://images.tango.us/workflows/2433334b-218b-449e-ac47-cad62f893575/steps/893b7b96-7bf7-4994-aca4-fbc4f5fc230a/bdd969e3-9a31-477c-85a5-444c3662c3bf.png?fm=png&crop=focalpoint&fit=crop&fp-x=0.5000&fp-y=0.4731&fp-z=1.0521&w=1200&border=2%2CF4F2F7&border-radius=8%2C8%2C8%2C8&border-radius-inner=8%2C8%2C8%2C8&blend-align=bottom&blend-mode=normal&blend-x=0&blend-w=1200&blend64=aHR0cHM6Ly9pbWFnZXMudGFuZ28udXMvc3RhdGljL21hZGUtd2l0aC10YW5nby13YXRlcm1hcmstdjIucG5n&mark-x=31&mark-y=461&m64=aHR0cHM6Ly9pbWFnZXMudGFuZ28udXMvc3RhdGljL2JsYW5rLnBuZz9tYXNrPWNvcm5lcnMmYm9yZGVyPTYlMkNGRjc0NDImdz0xMTM4Jmg9NTQmZml0PWNyb3AmY29ybmVyLXJhZGl1cz0xMA%3D%3D" style="border-radius: 8px; border: 1px solid #F4F2F7;" width="600" alt="Type the name of the Subject in our case we will add Psychology " />
</div>

<div><h3>4. Type or Paste selected text into element</h3>
<img src="https://images.tango.us/workflows/2433334b-218b-449e-ac47-cad62f893575/steps/50972923-a3cd-4d80-a107-371bd3cb1905/6532afde-cae7-4c6d-bd47-5ef34f5ae694.png?fm=png&crop=focalpoint&fit=crop&fp-x=0.5000&fp-y=0.5039&fp-z=1.0521&w=1200&border=2%2CF4F2F7&border-radius=8%2C8%2C8%2C8&border-radius-inner=8%2C8%2C8%2C8&blend-align=bottom&blend-mode=normal&blend-x=0&blend-w=1200&blend64=aHR0cHM6Ly9pbWFnZXMudGFuZ28udXMvc3RhdGljL21hZGUtd2l0aC10YW5nby13YXRlcm1hcmstdjIucG5n&mark-x=31&mark-y=370&m64=aHR0cHM6Ly9pbWFnZXMudGFuZ28udXMvc3RhdGljL2JsYW5rLnBuZz9tYXNrPWNvcm5lcnMmYm9yZGVyPTYlMkNGRjc0NDImdz0xMTM4Jmg9MjQxJmZpdD1jcm9wJmNvcm5lci1yYWRpdXM9MTA%3D" style="border-radius: 8px; border: 1px solid #F4F2F7;" width="600" alt="Type or Paste selected text into element" />
</div>

<div><h3>5. Check The Relevant subjects Psychology. Do not remember all you ? No problem you can add them later in the Edit tab.</h3>
<img src="https://images.tango.us/workflows/2433334b-218b-449e-ac47-cad62f893575/steps/23f88a2d-c6d1-400f-9baa-c46979dd5724/cc1a8d57-37ba-43dc-b81d-b16c48ab1414.png?fm=png&crop=focalpoint&fit=crop&fp-x=0.0591&fp-y=0.4618&fp-z=3.0905&w=1200&border=2%2CF4F2F7&border-radius=8%2C8%2C8%2C8&border-radius-inner=8%2C8%2C8%2C8&blend-align=bottom&blend-mode=normal&blend-x=0&blend-w=1200&blend64=aHR0cHM6Ly9pbWFnZXMudGFuZ28udXMvc3RhdGljL21hZGUtd2l0aC10YW5nby13YXRlcm1hcmstdjIucG5n&mark-x=184&mark-y=454&m64=aHR0cHM6Ly9pbWFnZXMudGFuZ28udXMvc3RhdGljL2JsYW5rLnBuZz9tYXNrPWNvcm5lcnMmYm9yZGVyPTYlMkNGRjc0NDImdz03MSZoPTcxJmZpdD1jcm9wJmNvcm5lci1yYWRpdXM9MTA%3D" style="border-radius: 8px; border: 1px solid #F4F2F7;" width="600" alt="Check The Relevant subjects Psychology. Do not remember all you ? No problem you can add them later in the Edit tab." />
</div>

<div><h3>6. Check Economics</h3>
<img src="https://images.tango.us/workflows/2433334b-218b-449e-ac47-cad62f893575/steps/175cc0f7-1f45-4e3b-bb50-53f706637d9a/b0ee66dc-38a7-4d77-8e87-4004aa1c354b.png?fm=png&crop=focalpoint&fit=crop&fp-x=0.0591&fp-y=0.2250&fp-z=3.0905&w=1200&border=2%2CF4F2F7&border-radius=8%2C8%2C8%2C8&border-radius-inner=8%2C8%2C8%2C8&blend-align=bottom&blend-mode=normal&blend-x=0&blend-w=1200&blend64=aHR0cHM6Ly9pbWFnZXMudGFuZ28udXMvc3RhdGljL21hZGUtd2l0aC10YW5nby13YXRlcm1hcmstdjIucG5n&mark-x=184&mark-y=454&m64=aHR0cHM6Ly9pbWFnZXMudGFuZ28udXMvc3RhdGljL2JsYW5rLnBuZz9tYXNrPWNvcm5lcnMmYm9yZGVyPTYlMkNGRjc0NDImdz03MSZoPTcxJmZpdD1jcm9wJmNvcm5lci1yYWRpdXM9MTA%3D" style="border-radius: 8px; border: 1px solid #F4F2F7;" width="600" alt="Check Economics" />
</div>

<div><h3>7. Select The Type of the guide</h3>
<p>There are 4 options here to choose from </p><ul><li><p>Course Guide </p></li><li><p>General Purpose Guide</p></li><li><p>Subject Guide </p></li><li><p>Topic Guide </p></li></ul><p>These are not mandatory but helpful.</p>
<img src="https://images.tango.us/workflows/2433334b-218b-449e-ac47-cad62f893575/steps/255f65fd-8186-4858-9f66-d1c2853f1f5f/381f1d88-d933-4e27-8065-c334c623eb70.png?fm=png&crop=focalpoint&fit=crop&fp-x=0.5000&fp-y=0.4304&fp-z=1.0521&w=1200&border=2%2CF4F2F7&border-radius=8%2C8%2C8%2C8&border-radius-inner=8%2C8%2C8%2C8&blend-align=bottom&blend-mode=normal&blend-x=0&blend-w=1200&blend64=aHR0cHM6Ly9pbWFnZXMudGFuZ28udXMvc3RhdGljL21hZGUtd2l0aC10YW5nby13YXRlcm1hcmstdjIucG5n&mark-x=31&mark-y=417&m64=aHR0cHM6Ly9pbWFnZXMudGFuZ28udXMvc3RhdGljL2JsYW5rLnBuZz9tYXNrPWNvcm5lcnMmYm9yZGVyPTYlMkNGRjc0NDImdz0xMTM4Jmg9NTQmZml0PWNyb3AmY29ybmVyLXJhZGl1cz0xMA%3D%3D" style="border-radius: 8px; border: 1px solid #F4F2F7;" width="600" alt="Select The Type of the guide" />
</div>

<div><h3>8. You can Also add them to a group for better organization</h3>
<p>You will have the option to choose from Group 1-4</p>
<img src="https://images.tango.us/workflows/2433334b-218b-449e-ac47-cad62f893575/steps/09f63e99-e410-4446-90f5-f252bc0c1862/a83770b5-b6f2-4455-a2b6-ef9258c9fc0c.png?fm=png&crop=focalpoint&fit=crop&fp-x=0.5000&fp-y=0.5382&fp-z=1.0521&w=1200&border=2%2CF4F2F7&border-radius=8%2C8%2C8%2C8&border-radius-inner=8%2C8%2C8%2C8&blend-align=bottom&blend-mode=normal&blend-x=0&blend-w=1200&blend64=aHR0cHM6Ly9pbWFnZXMudGFuZ28udXMvc3RhdGljL21hZGUtd2l0aC10YW5nby13YXRlcm1hcmstdjIucG5n&mark-x=31&mark-y=477&m64=aHR0cHM6Ly9pbWFnZXMudGFuZ28udXMvc3RhdGljL2JsYW5rLnBuZz9tYXNrPWNvcm5lcnMmYm9yZGVyPTYlMkNGRjc0NDImdz0xMTM4Jmg9NTQmZml0PWNyb3AmY29ybmVyLXJhZGl1cz0xMA%3D%3D" style="border-radius: 8px; border: 1px solid #F4F2F7;" width="600" alt="You can Also add them to a group for better organization" />
</div>

<div><h3>9. Lastly click save to publish the guide</h3>
<img src="https://images.tango.us/workflows/2433334b-218b-449e-ac47-cad62f893575/steps/9ad58dab-5350-47b8-ade9-9496a64d7a40/2ba9f428-b133-4ea6-9f08-8c0789f00b25.png?fm=png&crop=focalpoint&fit=crop&fp-x=0.0797&fp-y=0.8075&fp-z=2.7740&w=1200&border=2%2CF4F2F7&border-radius=8%2C8%2C8%2C8&border-radius-inner=8%2C8%2C8%2C8&blend-align=bottom&blend-mode=normal&blend-x=0&blend-w=1200&blend64=aHR0cHM6Ly9pbWFnZXMudGFuZ28udXMvc3RhdGljL21hZGUtd2l0aC10YW5nby13YXRlcm1hcmstdjIucG5n&mark-x=165&mark-y=415&m64=aHR0cHM6Ly9pbWFnZXMudGFuZ28udXMvc3RhdGljL2JsYW5rLnBuZz9tYXNrPWNvcm5lcnMmYm9yZGVyPTYlMkNGRjc0NDImdz0yMDEmaD0xNTAmZml0PWNyb3AmY29ybmVyLXJhZGl1cz0xMA%3D%3D" style="border-radius: 8px; border: 1px solid #F4F2F7;" width="600" alt="Lastly click save to publish the guide" />
</div>

<br/>
<hr/>
<div>
<span>Created with </span><a href="https://tango.us?utm_source=magicCopy&utm_medium=magicCopy&utm_campaign=workflow%20export%20links" target="_blank" style="color: #256EFF">Tango.us
    </a>
</div>';

  $reuse_guide = '<h1><a href="https://app.tango.us/app/workflow/1215df59-c463-41b0-8598-f61e3c9ebf86?utm_source=magicCopy&utm_medium=magicCopy&utm_campaign=workflow%20export%20links" target="_blank">Reuse a Guide</a></h1>
<div><b>Creation Date:</b> March 31, 2024</div>
<div><b>Created By:</b> Mohammed Amaan</div>
<div><a href="https://app.tango.us/app/workflow/1215df59-c463-41b0-8598-f61e3c9ebf86?utm_source=magicCopy&utm_medium=magicCopy&utm_campaign=workflow%20export%20links" target="_blank">View most recent version on Tango.us</a></div>
<div style="height: 24px">&#8203;</div>
<hr />
<div style="height: 24px">&#8203;</div>


<div><h2><a href="http://localhost/LGMS/lgms/dashboard"># Navigate to the Dashboard Overview</a></h2></div>

<div><h3>1. Click on Reuse Guide</h3>
<img src="https://images.tango.us/workflows/1215df59-c463-41b0-8598-f61e3c9ebf86/steps/99096531-94fe-4499-b913-b68bca5c73c6/a9a64162-3459-467a-bd4c-f3b745675475.png?fm=png&crop=focalpoint&fit=crop&fp-x=0.2191&fp-y=0.2593&fp-z=2.4500&w=1200&border=2%2CF4F2F7&border-radius=8%2C8%2C8%2C8&border-radius-inner=8%2C8%2C8%2C8&blend-align=bottom&blend-mode=normal&blend-x=0&blend-w=1200&blend64=aHR0cHM6Ly9pbWFnZXMudGFuZ28udXMvc3RhdGljL21hZGUtd2l0aC10YW5nby13YXRlcm1hcmstdjIucG5n&mark-x=441&mark-y=436&m64=aHR0cHM6Ly9pbWFnZXMudGFuZ28udXMvc3RhdGljL2JsYW5rLnBuZz9tYXNrPWNvcm5lcnMmYm9yZGVyPTYlMkNGRjc0NDImdz0zMTgmaD0xMDgmZml0PWNyb3AmY29ybmVyLXJhZGl1cz0xMA%3D%3D" style="border-radius: 8px; border: 1px solid #F4F2F7;" width="600" alt="Click on Reuse Guide" />
</div>

<div><h3>2. Select the guide to be reused</h3>
<img src="https://images.tango.us/workflows/1215df59-c463-41b0-8598-f61e3c9ebf86/steps/fd1b5b98-905d-464b-b24f-bff1aee2f7ad/3ec04f52-0b86-4156-b61d-e69222e3ad33.png?fm=png&crop=focalpoint&fit=crop&fp-x=0.5000&fp-y=0.4035&fp-z=1.0521&w=1200&border=2%2CF4F2F7&border-radius=8%2C8%2C8%2C8&border-radius-inner=8%2C8%2C8%2C8&blend-align=bottom&blend-mode=normal&blend-x=0&blend-w=1200&blend64=aHR0cHM6Ly9pbWFnZXMudGFuZ28udXMvc3RhdGljL21hZGUtd2l0aC10YW5nby13YXRlcm1hcmstdjIucG5n&mark-x=31&mark-y=389&m64=aHR0cHM6Ly9pbWFnZXMudGFuZ28udXMvc3RhdGljL2JsYW5rLnBuZz9tYXNrPWNvcm5lcnMmYm9yZGVyPTYlMkNGRjc0NDImdz0xMTM4Jmg9NTQmZml0PWNyb3AmY29ybmVyLXJhZGl1cz0xMA%3D%3D" style="border-radius: 8px; border: 1px solid #F4F2F7;" width="600" alt="Select the guide to be reused" />
</div>

<div><h3>3. Click on Reuse Guide</h3>
<img src="https://images.tango.us/workflows/1215df59-c463-41b0-8598-f61e3c9ebf86/steps/4810fb0e-bed3-4bc9-91f2-656df3eba043/28cf6125-1c84-4507-bf09-b9df17770514.png?fm=png&crop=focalpoint&fit=crop&fp-x=0.1123&fp-y=0.4843&fp-z=2.5006&w=1200&border=2%2CF4F2F7&border-radius=8%2C8%2C8%2C8&border-radius-inner=8%2C8%2C8%2C8&blend-align=bottom&blend-mode=normal&blend-x=0&blend-w=1200&blend64=aHR0cHM6Ly9pbWFnZXMudGFuZ28udXMvc3RhdGljL21hZGUtd2l0aC10YW5nby13YXRlcm1hcmstdjIucG5n&mark-x=187&mark-y=423&m64=aHR0cHM6Ly9pbWFnZXMudGFuZ28udXMvc3RhdGljL2JsYW5rLnBuZz9tYXNrPWNvcm5lcnMmYm9yZGVyPTYlMkNGRjc0NDImdz0zMDAmaD0xMzUmZml0PWNyb3AmY29ybmVyLXJhZGl1cz0xMA%3D%3D" style="border-radius: 8px; border: 1px solid #F4F2F7;" width="600" alt="Click on Reuse Guide" />
</div>

<div><h3>4. Here you can change the title as well as description of the guide before reusing it.</h3>
<img src="https://images.tango.us/workflows/1215df59-c463-41b0-8598-f61e3c9ebf86/steps/4ef2a40c-72bf-4df9-a483-840adec33a2e/803cc487-8c30-4b2c-ab5a-0f6e6d0f5a4c.png?fm=png&crop=focalpoint&fit=crop&fp-x=0.5000&fp-y=0.3406&fp-z=1.0521&w=1200&border=2%2CF4F2F7&border-radius=8%2C8%2C8%2C8&border-radius-inner=8%2C8%2C8%2C8&blend-align=bottom&blend-mode=normal&blend-x=0&blend-w=1200&blend64=aHR0cHM6Ly9pbWFnZXMudGFuZ28udXMvc3RhdGljL21hZGUtd2l0aC10YW5nby13YXRlcm1hcmstdjIucG5n&mark-x=31&mark-y=324&m64=aHR0cHM6Ly9pbWFnZXMudGFuZ28udXMvc3RhdGljL2JsYW5rLnBuZz9tYXNrPWNvcm5lcnMmYm9yZGVyPTYlMkNGRjc0NDImdz0xMTM4Jmg9NTQmZml0PWNyb3AmY29ybmVyLXJhZGl1cz0xMA%3D%3D" style="border-radius: 8px; border: 1px solid #F4F2F7;" width="600" alt="Here you can change the title as well as description of the guide before reusing it." />
</div>

<div><h3>5. Check or uncheck subjects that are related to the guide</h3>
<img src="https://images.tango.us/workflows/1215df59-c463-41b0-8598-f61e3c9ebf86/steps/a1a0171a-d478-4885-b923-788791eb3d51/35481831-914a-4abb-aeef-9dd4771b6c07.png?fm=png&crop=focalpoint&fit=crop&fp-x=0.0591&fp-y=0.3114&fp-z=3.0905&w=1200&border=2%2CF4F2F7&border-radius=8%2C8%2C8%2C8&border-radius-inner=8%2C8%2C8%2C8&blend-align=bottom&blend-mode=normal&blend-x=0&blend-w=1200&blend64=aHR0cHM6Ly9pbWFnZXMudGFuZ28udXMvc3RhdGljL21hZGUtd2l0aC10YW5nby13YXRlcm1hcmstdjIucG5n&mark-x=184&mark-y=454&m64=aHR0cHM6Ly9pbWFnZXMudGFuZ28udXMvc3RhdGljL2JsYW5rLnBuZz9tYXNrPWNvcm5lcnMmYm9yZGVyPTYlMkNGRjc0NDImdz03MSZoPTcxJmZpdD1jcm9wJmNvcm5lci1yYWRpdXM9MTA%3D" style="border-radius: 8px; border: 1px solid #F4F2F7;" width="600" alt="Check or uncheck subjects that are related to the guide" />
</div>

<div><h3>6. Click on URL alias</h3>
<img src="https://images.tango.us/workflows/1215df59-c463-41b0-8598-f61e3c9ebf86/steps/30b4d61e-e7fa-4bdc-8734-3f3ca7ebf448/bb7bf288-e6c7-4d29-8c01-962135fe58ec.png?fm=png&crop=focalpoint&fit=crop&fp-x=0.1641&fp-y=0.4826&fp-z=1.9030&w=1200&border=2%2CF4F2F7&border-radius=8%2C8%2C8%2C8&border-radius-inner=8%2C8%2C8%2C8&blend-align=bottom&blend-mode=normal&blend-x=0&blend-w=1200&blend64=aHR0cHM6Ly9pbWFnZXMudGFuZ28udXMvc3RhdGljL21hZGUtd2l0aC10YW5nby13YXRlcm1hcmstdjIucG5n&mark-x=117&mark-y=398&m64=aHR0cHM6Ly9pbWFnZXMudGFuZ28udXMvc3RhdGljL2JsYW5rLnBuZz9tYXNrPWNvcm5lcnMmYm9yZGVyPTYlMkNGRjc0NDImdz01MTUmaD0xODQmZml0PWNyb3AmY29ybmVyLXJhZGl1cz0xMA%3D%3D" style="border-radius: 8px; border: 1px solid #F4F2F7;" width="600" alt="Click on URL alias" />
</div>

<div><h3>7. Type new url alias as the previous one is in use by the original guide</h3>
<img src="https://images.tango.us/workflows/1215df59-c463-41b0-8598-f61e3c9ebf86/steps/d2e2f1b7-ced9-4882-8ac5-d0a3bf741e28/2b0f411b-042e-41a2-92a5-fa6afeb32a9e.png?fm=png&crop=focalpoint&fit=crop&fp-x=0.6100&fp-y=0.3283&fp-z=1.4132&w=1200&border=2%2CF4F2F7&border-radius=8%2C8%2C8%2C8&border-radius-inner=8%2C8%2C8%2C8&blend-align=bottom&blend-mode=normal&blend-x=0&blend-w=1200&blend64=aHR0cHM6Ly9pbWFnZXMudGFuZ28udXMvc3RhdGljL21hZGUtd2l0aC10YW5nby13YXRlcm1hcmstdjIucG5n&mark-x=61&mark-y=418&m64=aHR0cHM6Ly9pbWFnZXMudGFuZ28udXMvc3RhdGljL2JsYW5rLnBuZz9tYXNrPWNvcm5lcnMmYm9yZGVyPTYlMkNGRjc0NDImdz0xMDc3Jmg9NzMmZml0PWNyb3AmY29ybmVyLXJhZGl1cz0xMA%3D%3D" style="border-radius: 8px; border: 1px solid #F4F2F7;" width="600" alt="Type new url alias as the previous one is in use by the original guide" />
</div>

<div><h3>8. Click on Save to publish the guide.</h3>
<img src="https://images.tango.us/workflows/1215df59-c463-41b0-8598-f61e3c9ebf86/steps/bbc293e9-d200-4581-9ed4-8b30306667ca/5dd39d3c-b242-48fe-a25a-144f6872227f.png?fm=png&crop=focalpoint&fit=crop&fp-x=0.0797&fp-y=0.7626&fp-z=2.7740&w=1200&border=2%2CF4F2F7&border-radius=8%2C8%2C8%2C8&border-radius-inner=8%2C8%2C8%2C8&blend-align=bottom&blend-mode=normal&blend-x=0&blend-w=1200&blend64=aHR0cHM6Ly9pbWFnZXMudGFuZ28udXMvc3RhdGljL21hZGUtd2l0aC10YW5nby13YXRlcm1hcmstdjIucG5n&mark-x=165&mark-y=415&m64=aHR0cHM6Ly9pbWFnZXMudGFuZ28udXMvc3RhdGljL2JsYW5rLnBuZz9tYXNrPWNvcm5lcnMmYm9yZGVyPTYlMkNGRjc0NDImdz0yMDEmaD0xNTAmZml0PWNyb3AmY29ybmVyLXJhZGl1cz0xMA%3D%3D" style="border-radius: 8px; border: 1px solid #F4F2F7;" width="600" alt="Click on Save to publish the guide." />
</div>

<br/>
<hr/>
<div>
<span>Created with </span><a href="https://tango.us?utm_source=magicCopy&utm_medium=magicCopy&utm_campaign=workflow%20export%20links" target="_blank" style="color: #256EFF">Tango.us
    </a>
</div>';

  $add_page = '<h1><a href="https://app.tango.us/app/workflow/718b2df1-f17d-40cc-8359-44062a5011d8?utm_source=magicCopy&utm_medium=magicCopy&utm_campaign=workflow%20export%20links" target="_blank">How to Add a Page To a Guide</a></h1>
<div><b>Creation Date:</b> March 31, 2024</div>
<div><b>Created By:</b> Mohammed Amaan</div>
<div><a href="https://app.tango.us/app/workflow/718b2df1-f17d-40cc-8359-44062a5011d8?utm_source=magicCopy&utm_medium=magicCopy&utm_campaign=workflow%20export%20links" target="_blank">View most recent version on Tango.us</a></div>
<div style="height: 24px">&#8203;</div>
<hr />
<div style="height: 24px">&#8203;</div>


<div><h2><a href="http://localhost/LGMS/psychology"># Navigate to the Guide from the Dashboard or Create a new guide</a></h2></div>

<div><h3>1. Click on Create/Reuse Guide Page</h3>
<img src="https://images.tango.us/workflows/718b2df1-f17d-40cc-8359-44062a5011d8/steps/8b7fe742-3586-4071-a7ba-93e05b2bb710/ad7725ff-6685-4be4-bc3a-217deb2d92d6.png?fm=png&crop=focalpoint&fit=crop&fp-x=0.1425&fp-y=0.3827&fp-z=1.9754&w=1200&border=2%2CF4F2F7&border-radius=8%2C8%2C8%2C8&border-radius-inner=8%2C8%2C8%2C8&blend-align=bottom&blend-mode=normal&blend-x=0&blend-w=1200&blend64=aHR0cHM6Ly9pbWFnZXMudGFuZ28udXMvc3RhdGljL21hZGUtd2l0aC10YW5nby13YXRlcm1hcmstdjIucG5n&mark-x=93&mark-y=455&m64=aHR0cHM6Ly9pbWFnZXMudGFuZ28udXMvc3RhdGljL2JsYW5rLnBuZz9tYXNrPWNvcm5lcnMmYm9yZGVyPTYlMkNGRjc0NDImdz00ODkmaD03MCZmaXQ9Y3JvcCZjb3JuZXItcmFkaXVzPTEw" style="border-radius: 8px; border: 1px solid #F4F2F7;" width="600" alt="Click on Create/Reuse Guide Page" />
</div>

<div><h3>2. Input your title</h3>
<img src="https://images.tango.us/workflows/718b2df1-f17d-40cc-8359-44062a5011d8/steps/5581320d-59d1-4609-9c5f-15d1aabc60ba/c8dbbd8f-1137-4b8f-8083-7b01a4a14b7a.png?fm=png&crop=focalpoint&fit=crop&fp-x=0.5005&fp-y=0.3013&fp-z=1.1706&w=1200&border=2%2CF4F2F7&border-radius=8%2C8%2C8%2C8&border-radius-inner=8%2C8%2C8%2C8&blend-align=bottom&blend-mode=normal&blend-x=0&blend-w=1200&blend64=aHR0cHM6Ly9pbWFnZXMudGFuZ28udXMvc3RhdGljL21hZGUtd2l0aC10YW5nby13YXRlcm1hcmstdjIucG5n&mark-x=102&mark-y=315&m64=aHR0cHM6Ly9pbWFnZXMudGFuZ28udXMvc3RhdGljL2JsYW5rLnBuZz9tYXNrPWNvcm5lcnMmYm9yZGVyPTYlMkNGRjc0NDImdz05OTcmaD02MSZmaXQ9Y3JvcCZjb3JuZXItcmFkaXVzPTEw" style="border-radius: 8px; border: 1px solid #F4F2F7;" width="600" alt="Input your title" />
</div>

<div><h3>3. Input the Description</h3>
<p>If you would like no description for the page select the Hide Description option.</p>
<img src="https://images.tango.us/workflows/718b2df1-f17d-40cc-8359-44062a5011d8/steps/9b4377ca-aa3b-440f-8246-68f6ab18a1eb/9b75dae1-d207-43f6-9d18-8b5c3a428c19.png?fm=png&crop=focalpoint&fit=crop&fp-x=0.5005&fp-y=0.5814&fp-z=1.1706&w=1200&border=2%2CF4F2F7&border-radius=8%2C8%2C8%2C8&border-radius-inner=8%2C8%2C8%2C8&blend-align=bottom&blend-mode=normal&blend-x=0&blend-w=1200&blend64=aHR0cHM6Ly9pbWFnZXMudGFuZ28udXMvc3RhdGljL21hZGUtd2l0aC10YW5nby13YXRlcm1hcmstdjIucG5n&mark-x=102&mark-y=366&m64=aHR0cHM6Ly9pbWFnZXMudGFuZ28udXMvc3RhdGljL2JsYW5rLnBuZz9tYXNrPWNvcm5lcnMmYm9yZGVyPTYlMkNGRjc0NDImdz05OTcmaD0yNjgmZml0PWNyb3AmY29ybmVyLXJhZGl1cz0xMA%3D%3D" style="border-radius: 8px; border: 1px solid #F4F2F7;" width="600" alt="Input the Description" />
</div>

<div><h3>4. Click on Create Page to Have your Page Created</h3>
<img src="https://images.tango.us/workflows/718b2df1-f17d-40cc-8359-44062a5011d8/steps/d387f0dd-6d40-4b87-a65d-af8a4b1130b0/c756c83f-c8ec-4213-a5b6-31961f2883d3.png?fm=png&crop=focalpoint&fit=crop&fp-x=0.2209&fp-y=0.8704&fp-z=2.3754&w=1200&border=2%2CF4F2F7&border-radius=8%2C8%2C8%2C8&border-radius-inner=8%2C8%2C8%2C8&blend-align=bottom&blend-mode=normal&blend-x=0&blend-w=1200&blend64=aHR0cHM6Ly9pbWFnZXMudGFuZ28udXMvc3RhdGljL21hZGUtd2l0aC10YW5nby13YXRlcm1hcmstdjIucG5n&mark-x=428&mark-y=609&m64=aHR0cHM6Ly9pbWFnZXMudGFuZ28udXMvc3RhdGljL2JsYW5rLnBuZz9tYXNrPWNvcm5lcnMmYm9yZGVyPTYlMkNGRjc0NDImdz0zNDUmaD0xMzgmZml0PWNyb3AmY29ybmVyLXJhZGl1cz0xMA%3D%3D" style="border-radius: 8px; border: 1px solid #F4F2F7;" width="600" alt="Click on Create Page to Have your Page Created" />
</div>

<div><h3>5. Navigation to Recently Created Page </h3>
<p>To navigate to the recently created page click on the the page title to be redirected to the page.</p>
<img src="https://images.tango.us/workflows/718b2df1-f17d-40cc-8359-44062a5011d8/steps/7713af79-8b1b-4b3a-b7be-87e7d171033e/e1c585a9-1865-4271-91d5-8f76ee54bc4d.png?fm=png&crop=focalpoint&fit=crop&fp-x=0.1370&fp-y=0.6033&fp-z=2.1634&w=1200&border=2%2CF4F2F7&border-radius=8%2C8%2C8%2C8&border-radius-inner=8%2C8%2C8%2C8&blend-align=bottom&blend-mode=normal&blend-x=0&blend-w=1200&blend64=aHR0cHM6Ly9pbWFnZXMudGFuZ28udXMvc3RhdGljL21hZGUtd2l0aC10YW5nby13YXRlcm1hcmstdjIucG5n&mark-x=145&mark-y=458&m64=aHR0cHM6Ly9pbWFnZXMudGFuZ28udXMvc3RhdGljL2JsYW5rLnBuZz9tYXNrPWNvcm5lcnMmYm9yZGVyPTYlMkNGRjc0NDImdz00MjEmaD02NCZmaXQ9Y3JvcCZjb3JuZXItcmFkaXVzPTEw" style="border-radius: 8px; border: 1px solid #F4F2F7;" width="600" alt="Navigation to Recently Created Page " />
</div>

<div><h3>6. Here is what the Page looks Like after creation</h3>
<p>You can start adding More Content by adding boxes. </p>
<img src="https://images.tango.us/workflows/718b2df1-f17d-40cc-8359-44062a5011d8/steps/ad66da39-5d27-4803-9a5d-f56bc2bcce1c/178159ef-3e67-431a-96a4-9b47bc9a053d.png?fm=png&crop=focalpoint&fit=crop&fp-x=0.5000&fp-y=0.5982&fp-z=1.0037&w=1200&border=2%2CF4F2F7&border-radius=8%2C8%2C8%2C8&border-radius-inner=8%2C8%2C8%2C8&blend-align=bottom&blend-mode=normal&blend-x=0&blend-w=1200&blend64=aHR0cHM6Ly9pbWFnZXMudGFuZ28udXMvc3RhdGljL21hZGUtd2l0aC10YW5nby13YXRlcm1hcmstdjIucG5n&mark-x=2&mark-y=285&m64=aHR0cHM6Ly9pbWFnZXMudGFuZ28udXMvc3RhdGljL2JsYW5rLnBuZz9tYXNrPWNvcm5lcnMmYm9yZGVyPTYlMkNGRjc0NDImdz0xMTk2Jmg9NjAxJmZpdD1jcm9wJmNvcm5lci1yYWRpdXM9MTA%3D" style="border-radius: 8px; border: 1px solid #F4F2F7;" width="600" alt="Here is what the Page looks Like after creation" />
</div>

<br/>
<hr/>
<div>
<span>Created with </span><a href="https://tango.us?utm_source=magicCopy&utm_medium=magicCopy&utm_campaign=workflow%20export%20links" target="_blank" style="color: #256EFF">Tango.us
    </a>
</div>';

  $reuse_page = '<h1><a href="https://app.tango.us/app/workflow/a964e0e7-53e1-4f98-929a-13ffbcc002e2?utm_source=magicCopy&utm_medium=magicCopy&utm_campaign=workflow%20export%20links" target="_blank">Reuse a Page</a></h1>
<div><p>A page that is existing in some other guide can be reused again by doing the steps below. <br>Reusing the Page gives you the option to import all the exiting content of a page.</p></div>
<div><b>Creation Date:</b> March 31, 2024</div>
<div><b>Created By:</b> Mohammed Amaan</div>
<div><a href="https://app.tango.us/app/workflow/a964e0e7-53e1-4f98-929a-13ffbcc002e2?utm_source=magicCopy&utm_medium=magicCopy&utm_campaign=workflow%20export%20links" target="_blank">View most recent version on Tango.us</a></div>
<div style="height: 24px">&#8203;</div>
<hr />
<div style="height: 24px">&#8203;</div>


<div><h2><a href="http://localhost/LGMS/psychology"># Navigate to the Required guide</a></h2></div>

<div><h3>1. Click on Create/Reuse Guide Page</h3>
<img src="https://images.tango.us/workflows/a964e0e7-53e1-4f98-929a-13ffbcc002e2/steps/b2924888-5eb4-4bb6-9a77-95c87a377eea/3fadcaba-127c-4cea-b6f9-90973f6a1049.png?fm=png&crop=focalpoint&fit=crop&fp-x=0.1425&fp-y=0.6947&fp-z=1.9754&w=1200&border=2%2CF4F2F7&border-radius=8%2C8%2C8%2C8&border-radius-inner=8%2C8%2C8%2C8&blend-align=bottom&blend-mode=normal&blend-x=0&blend-w=1200&blend64=aHR0cHM6Ly9pbWFnZXMudGFuZ28udXMvc3RhdGljL21hZGUtd2l0aC10YW5nby13YXRlcm1hcmstdjIucG5n&mark-x=93&mark-y=455&m64=aHR0cHM6Ly9pbWFnZXMudGFuZ28udXMvc3RhdGljL2JsYW5rLnBuZz9tYXNrPWNvcm5lcnMmYm9yZGVyPTYlMkNGRjc0NDImdz00ODkmaD03MCZmaXQ9Y3JvcCZjb3JuZXItcmFkaXVzPTEw" style="border-radius: 8px; border: 1px solid #F4F2F7;" width="600" alt="Click on Create/Reuse Guide Page" />
</div>

<div><h3>2. Click on Reuse Guide Page</h3>
<img src="https://images.tango.us/workflows/a964e0e7-53e1-4f98-929a-13ffbcc002e2/steps/fec62b3f-32ea-422b-a5c8-ecd889f7e64f/ff76b24e-a179-4272-9fe4-092a13d3fc4f.png?fm=png&crop=focalpoint&fit=crop&fp-x=0.3698&fp-y=0.1661&fp-z=2.2072&w=1200&border=2%2CF4F2F7&border-radius=8%2C8%2C8%2C8&border-radius-inner=8%2C8%2C8%2C8&blend-align=bottom&blend-mode=normal&blend-x=0&blend-w=1200&blend64=aHR0cHM6Ly9pbWFnZXMudGFuZ28udXMvc3RhdGljL21hZGUtd2l0aC10YW5nby13YXRlcm1hcmstdjIucG5n&mark-x=397&mark-y=303&m64=aHR0cHM6Ly9pbWFnZXMudGFuZ28udXMvc3RhdGljL2JsYW5rLnBuZz9tYXNrPWNvcm5lcnMmYm9yZGVyPTYlMkNGRjc0NDImdz00MDUmaD0xMTImZml0PWNyb3AmY29ybmVyLXJhZGl1cz0xMA%3D%3D" style="border-radius: 8px; border: 1px solid #F4F2F7;" width="600" alt="Click on Reuse Guide Page" />
</div>

<div><h3>3. Select The page to reused from existing guides</h3>
<img src="https://images.tango.us/workflows/a964e0e7-53e1-4f98-929a-13ffbcc002e2/steps/83ac1753-1633-481d-874d-587e6092ea0d/00e4f53e-c52e-4f71-af74-f23f8658fec7.png?fm=png&crop=focalpoint&fit=crop&fp-x=0.5005&fp-y=0.2565&fp-z=1.1706&w=1200&border=2%2CF4F2F7&border-radius=8%2C8%2C8%2C8&border-radius-inner=8%2C8%2C8%2C8&blend-align=bottom&blend-mode=normal&blend-x=0&blend-w=1200&blend64=aHR0cHM6Ly9pbWFnZXMudGFuZ28udXMvc3RhdGljL21hZGUtd2l0aC10YW5nby13YXRlcm1hcmstdjIucG5n&mark-x=102&mark-y=264&m64=aHR0cHM6Ly9pbWFnZXMudGFuZ28udXMvc3RhdGljL2JsYW5rLnBuZz9tYXNrPWNvcm5lcnMmYm9yZGVyPTYlMkNGRjc0NDImdz05OTcmaD02MSZmaXQ9Y3JvcCZjb3JuZXItcmFkaXVzPTEw" style="border-radius: 8px; border: 1px solid #F4F2F7;" width="600" alt="Select The page to reused from existing guides" />
</div>

<div><h3>4. check Include Subpages if you would also like to import the subpages of the page</h3>
<p>Note: This option will not be available if the importing page is a subpage already.</p>
<img src="https://images.tango.us/workflows/a964e0e7-53e1-4f98-929a-13ffbcc002e2/steps/3b9137fe-0d10-44b1-96b6-0d5c1d0e4091/6b9546db-e22e-41d1-9e92-441aee6878a0.png?fm=png&crop=focalpoint&fit=crop&fp-x=0.1554&fp-y=0.4371&fp-z=3.0905&w=1200&border=2%2CF4F2F7&border-radius=8%2C8%2C8%2C8&border-radius-inner=8%2C8%2C8%2C8&blend-align=bottom&blend-mode=normal&blend-x=0&blend-w=1200&blend64=aHR0cHM6Ly9pbWFnZXMudGFuZ28udXMvc3RhdGljL21hZGUtd2l0aC10YW5nby13YXRlcm1hcmstdjIucG5n&mark-x=540&mark-y=454&m64=aHR0cHM6Ly9pbWFnZXMudGFuZ28udXMvc3RhdGljL2JsYW5rLnBuZz9tYXNrPWNvcm5lcnMmYm9yZGVyPTYlMkNGRjc0NDImdz03MSZoPTcxJmZpdD1jcm9wJmNvcm5lci1yYWRpdXM9MTA%3D" style="border-radius: 8px; border: 1px solid #F4F2F7;" width="600" alt="check Include Subpages if you would also like to import the subpages of the page" />
</div>

<div><h3>5. Select Link: By selecting this, a link to the HTML item will be created. it will be un-editable from this box</h3>
<img src="https://images.tango.us/workflows/a964e0e7-53e1-4f98-929a-13ffbcc002e2/steps/0d1fdfe0-f036-4562-8870-2794e06568d9/bd7831df-380e-4c2e-8997-0992380921ac.png?fm=png&crop=focalpoint&fit=crop&fp-x=0.1554&fp-y=0.4933&fp-z=3.0905&w=1200&border=2%2CF4F2F7&border-radius=8%2C8%2C8%2C8&border-radius-inner=8%2C8%2C8%2C8&blend-align=bottom&blend-mode=normal&blend-x=0&blend-w=1200&blend64=aHR0cHM6Ly9pbWFnZXMudGFuZ28udXMvc3RhdGljL21hZGUtd2l0aC10YW5nby13YXRlcm1hcmstdjIucG5n&mark-x=540&mark-y=454&m64=aHR0cHM6Ly9pbWFnZXMudGFuZ28udXMvc3RhdGljL2JsYW5rLnBuZz9tYXNrPWNvcm5lcnMmYm9yZGVyPTYlMkNGRjc0NDImdz03MSZoPTcxJmZpdD1jcm9wJmNvcm5lci1yYWRpdXM9MTA%3D" style="border-radius: 8px; border: 1px solid #F4F2F7;" width="600" alt="Select Link: By selecting this, a link to the HTML item will be created. it will be un-editable from this box" />
</div>

<div><h3>6. Enter a Title </h3>
<img src="https://images.tango.us/workflows/a964e0e7-53e1-4f98-929a-13ffbcc002e2/steps/686aaef5-7263-412c-a615-50cfce8ebebb/2e8b41ef-2c8d-40ac-b306-4cfe3d68062b.png?fm=png&crop=focalpoint&fit=crop&fp-x=0.5005&fp-y=0.5864&fp-z=1.1706&w=1200&border=2%2CF4F2F7&border-radius=8%2C8%2C8%2C8&border-radius-inner=8%2C8%2C8%2C8&blend-align=bottom&blend-mode=normal&blend-x=0&blend-w=1200&blend64=aHR0cHM6Ly9pbWFnZXMudGFuZ28udXMvc3RhdGljL21hZGUtd2l0aC10YW5nby13YXRlcm1hcmstdjIucG5n&mark-x=102&mark-y=475&m64=aHR0cHM6Ly9pbWFnZXMudGFuZ28udXMvc3RhdGljL2JsYW5rLnBuZz9tYXNrPWNvcm5lcnMmYm9yZGVyPTYlMkNGRjc0NDImdz05OTcmaD02MSZmaXQ9Y3JvcCZjb3JuZXItcmFkaXVzPTEw" style="border-radius: 8px; border: 1px solid #F4F2F7;" width="600" alt="Enter a Title " />
</div>

<div><h3>7. Use Position to determine if it is a top level page or if it goes under an existing page.</h3>
<img src="https://images.tango.us/workflows/a964e0e7-53e1-4f98-929a-13ffbcc002e2/steps/02ab8089-0e69-43ba-97bd-87eb4bae54c6/9db85022-2f86-4f55-966c-5674a95f97d3.png?fm=png&crop=focalpoint&fit=crop&fp-x=0.5000&fp-y=0.5000&w=1200&border=2%2CF4F2F7&border-radius=8%2C8%2C8%2C8&border-radius-inner=8%2C8%2C8%2C8&blend-align=bottom&blend-mode=normal&blend-x=0&blend-w=1200&blend64=aHR0cHM6Ly9pbWFnZXMudGFuZ28udXMvc3RhdGljL21hZGUtd2l0aC10YW5nby13YXRlcm1hcmstdjIucG5n" style="border-radius: 8px; border: 1px solid #F4F2F7;" width="600" alt="Use Position to determine if it is a top level page or if it goes under an existing page." />
</div>

<div><h3>8. Click on Reuse Guide Page</h3>
<img src="https://images.tango.us/workflows/a964e0e7-53e1-4f98-929a-13ffbcc002e2/steps/2d103856-4f4f-4d16-9b20-08f28797827a/b7995999-1441-49fe-a8c0-04cebb285a2a.png?fm=png&crop=focalpoint&fit=crop&fp-x=0.2415&fp-y=0.7593&fp-z=2.1634&w=1200&border=2%2CF4F2F7&border-radius=8%2C8%2C8%2C8&border-radius-inner=8%2C8%2C8%2C8&blend-align=bottom&blend-mode=normal&blend-x=0&blend-w=1200&blend64=aHR0cHM6Ly9pbWFnZXMudGFuZ28udXMvc3RhdGljL21hZGUtd2l0aC10YW5nby13YXRlcm1hcmstdjIucG5n&mark-x=389&mark-y=427&m64=aHR0cHM6Ly9pbWFnZXMudGFuZ28udXMvc3RhdGljL2JsYW5rLnBuZz9tYXNrPWNvcm5lcnMmYm9yZGVyPTYlMkNGRjc0NDImdz00MjEmaD0xMjYmZml0PWNyb3AmY29ybmVyLXJhZGl1cz0xMA%3D%3D" style="border-radius: 8px; border: 1px solid #F4F2F7;" width="600" alt="Click on Reuse Guide Page" />
</div>

<br/>
<hr/>
<div>
<span>Created with </span><a href="https://tango.us?utm_source=magicCopy&utm_medium=magicCopy&utm_campaign=workflow%20export%20links" target="_blank" style="color: #256EFF">Tango.us
    </a>
</div>';

  $add_box = '<h1><a href="https://app.tango.us/app/workflow/a7aa6b7d-ab80-4419-ad9f-6463322ad59f?utm_source=magicCopy&utm_medium=magicCopy&utm_campaign=workflow%20export%20links" target="_blank">Creating A Box</a></h1>
<div><b>Creation Date:</b> March 31, 2024</div>
<div><b>Created By:</b> Mohammed Amaan</div>
<div><a href="https://app.tango.us/app/workflow/a7aa6b7d-ab80-4419-ad9f-6463322ad59f?utm_source=magicCopy&utm_medium=magicCopy&utm_campaign=workflow%20export%20links" target="_blank">View most recent version on Tango.us</a></div>
<div style="height: 24px">&#8203;</div>
<hr />
<div style="height: 24px">&#8203;</div>


<div><h2><a href="http://localhost/LGMS/psychology/finding-books-psychology"># Navigate to the Page where you would like to add the box </a></h2></div>

<div><h3>1. Click on Create/Reuse Guide Box</h3>
<img src="https://images.tango.us/workflows/a7aa6b7d-ab80-4419-ad9f-6463322ad59f/steps/079255f6-0e9f-4e02-8bc2-8182bf4035c5/3932ac41-b021-4cff-bf65-79a90b26c61e.png?fm=png&crop=focalpoint&fit=crop&fp-x=0.3799&fp-y=0.6919&fp-z=2.1464&w=1200&border=2%2CF4F2F7&border-radius=8%2C8%2C8%2C8&border-radius-inner=8%2C8%2C8%2C8&blend-align=bottom&blend-mode=normal&blend-x=0&blend-w=1200&blend64=aHR0cHM6Ly9pbWFnZXMudGFuZ28udXMvc3RhdGljL21hZGUtd2l0aC10YW5nby13YXRlcm1hcmstdjIucG5n&mark-x=386&mark-y=458&m64=aHR0cHM6Ly9pbWFnZXMudGFuZ28udXMvc3RhdGljL2JsYW5rLnBuZz9tYXNrPWNvcm5lcnMmYm9yZGVyPTYlMkNGRjc0NDImdz00MjcmaD02NCZmaXQ9Y3JvcCZjb3JuZXItcmFkaXVzPTEw" style="border-radius: 8px; border: 1px solid #F4F2F7;" width="600" alt="Click on Create/Reuse Guide Box" />
</div>

<div><h3>2. Enter Your Title</h3>
<img src="https://images.tango.us/workflows/a7aa6b7d-ab80-4419-ad9f-6463322ad59f/steps/a102b58f-4d40-47b1-9ad0-2c7c56cb0c29/9fb9745b-ec03-471c-97da-63e41182e860.png?fm=png&crop=focalpoint&fit=crop&fp-x=0.5005&fp-y=0.4910&fp-z=1.1706&w=1200&border=2%2CF4F2F7&border-radius=8%2C8%2C8%2C8&border-radius-inner=8%2C8%2C8%2C8&blend-align=bottom&blend-mode=normal&blend-x=0&blend-w=1200&blend64=aHR0cHM6Ly9pbWFnZXMudGFuZ28udXMvc3RhdGljL21hZGUtd2l0aC10YW5nby13YXRlcm1hcmstdjIucG5n&mark-x=102&mark-y=460&m64=aHR0cHM6Ly9pbWFnZXMudGFuZ28udXMvc3RhdGljL2JsYW5rLnBuZz9tYXNrPWNvcm5lcnMmYm9yZGVyPTYlMkNGRjc0NDImdz05OTcmaD02MSZmaXQ9Y3JvcCZjb3JuZXItcmFkaXVzPTEw" style="border-radius: 8px; border: 1px solid #F4F2F7;" width="600" alt="Enter Your Title" />
</div>

<div><h3>3. Click on Save</h3>
<img src="https://images.tango.us/workflows/a7aa6b7d-ab80-4419-ad9f-6463322ad59f/steps/46454f15-21e6-4e36-ae18-b073fda169be/c3bc9739-3f8a-4113-a962-e35790afc6c4.png?fm=png&crop=focalpoint&fit=crop&fp-x=0.1962&fp-y=0.6347&fp-z=2.6918&w=1200&border=2%2CF4F2F7&border-radius=8%2C8%2C8%2C8&border-radius-inner=8%2C8%2C8%2C8&blend-align=bottom&blend-mode=normal&blend-x=0&blend-w=1200&blend64=aHR0cHM6Ly9pbWFnZXMudGFuZ28udXMvc3RhdGljL21hZGUtd2l0aC10YW5nby13YXRlcm1hcmstdjIucG5n&mark-x=485&mark-y=412&m64=aHR0cHM6Ly9pbWFnZXMudGFuZ28udXMvc3RhdGljL2JsYW5rLnBuZz9tYXNrPWNvcm5lcnMmYm9yZGVyPTYlMkNGRjc0NDImdz0yMzEmaD0xNTcmZml0PWNyb3AmY29ybmVyLXJhZGl1cz0xMA%3D%3D" style="border-radius: 8px; border: 1px solid #F4F2F7;" width="600" alt="Click on Save" />
</div>

<br/>
<hr/>
<div>
<span>Created with </span><a href="https://tango.us?utm_source=magicCopy&utm_medium=magicCopy&utm_campaign=workflow%20export%20links" target="_blank" style="color: #256EFF">Tango.us
    </a>
</div>';

  $reuse_html = '<h1><a href="https://app.tango.us/app/workflow/196d5909-5060-4564-b332-cfb65402a66e?utm_source=magicCopy&utm_medium=magicCopy&utm_campaign=workflow%20export%20links" target="_blank">Reuse an HTML</a></h1>
<div><p>This is the place where text block or HTML blocks can be reused from the same guide or some other guide</p></div>
<div><b>Creation Date:</b> March 31, 2024</div>
<div><b>Created By:</b> Mohammed Amaan</div>
<div><a href="https://app.tango.us/app/workflow/196d5909-5060-4564-b332-cfb65402a66e?utm_source=magicCopy&utm_medium=magicCopy&utm_campaign=workflow%20export%20links" target="_blank">View most recent version on Tango.us</a></div>
<div style="height: 24px">&#8203;</div>
<hr />
<div style="height: 24px">&#8203;</div>


<div><h2><a href="http://localhost/LGMS/business-administration/finding-journal-articles-business-administration"># Navigate to the box that is going to reuse the content</a></h2></div>

<div><h3>1. Click on Add/Reuse HTML</h3>
<img src="https://images.tango.us/workflows/196d5909-5060-4564-b332-cfb65402a66e/steps/de79b58d-8260-44bf-a7ff-e34dcb308b7d/ef79f322-1097-46b3-8bc1-bd576499a772.png?fm=png&crop=focalpoint&fit=crop&fp-x=0.3932&fp-y=0.6470&fp-z=2.3651&w=1200&border=2%2CF4F2F7&border-radius=8%2C8%2C8%2C8&border-radius-inner=8%2C8%2C8%2C8&blend-align=bottom&blend-mode=normal&blend-x=0&blend-w=1200&blend64=aHR0cHM6Ly9pbWFnZXMudGFuZ28udXMvc3RhdGljL21hZGUtd2l0aC10YW5nby13YXRlcm1hcmstdjIucG5n&mark-x=426&mark-y=455&m64=aHR0cHM6Ly9pbWFnZXMudGFuZ28udXMvc3RhdGljL2JsYW5rLnBuZz9tYXNrPWNvcm5lcnMmYm9yZGVyPTYlMkNGRjc0NDImdz0zNDkmaD03MCZmaXQ9Y3JvcCZjb3JuZXItcmFkaXVzPTEw" style="border-radius: 8px; border: 1px solid #F4F2F7;" width="600" alt="Click on Add/Reuse HTML" />
</div>

<div><h3>2. Click on Reuse HTML</h3>
<img src="https://images.tango.us/workflows/196d5909-5060-4564-b332-cfb65402a66e/steps/adbf34b6-94fb-43c4-9c60-ab8b99d59864/db7f8c99-558f-4d9a-90e2-d5c00c2c846f.png?fm=png&crop=focalpoint&fit=crop&fp-x=0.2961&fp-y=0.1672&fp-z=2.4068&w=1200&border=2%2CF4F2F7&border-radius=8%2C8%2C8%2C8&border-radius-inner=8%2C8%2C8%2C8&blend-align=bottom&blend-mode=normal&blend-x=0&blend-w=1200&blend64=aHR0cHM6Ly9pbWFnZXMudGFuZ28udXMvc3RhdGljL21hZGUtd2l0aC10YW5nby13YXRlcm1hcmstdjIucG5n&mark-x=433&mark-y=334&m64=aHR0cHM6Ly9pbWFnZXMudGFuZ28udXMvc3RhdGljL2JsYW5rLnBuZz9tYXNrPWNvcm5lcnMmYm9yZGVyPTYlMkNGRjc0NDImdz0zMzQmaD0xMjImZml0PWNyb3AmY29ybmVyLXJhZGl1cz0xMA%3D%3D" style="border-radius: 8px; border: 1px solid #F4F2F7;" width="600" alt="Click on Reuse HTML" />
</div>

<div><h3>3. Select the required block from Select HTML Item</h3>
<img src="https://images.tango.us/workflows/196d5909-5060-4564-b332-cfb65402a66e/steps/8b801791-daba-4836-bc28-829ea0311d5b/fae176e5-57f5-40c5-a332-14b02cb6f2b8.png?fm=png&crop=focalpoint&fit=crop&fp-x=0.5005&fp-y=0.2576&fp-z=1.1706&w=1200&border=2%2CF4F2F7&border-radius=8%2C8%2C8%2C8&border-radius-inner=8%2C8%2C8%2C8&blend-align=bottom&blend-mode=normal&blend-x=0&blend-w=1200&blend64=aHR0cHM6Ly9pbWFnZXMudGFuZ28udXMvc3RhdGljL21hZGUtd2l0aC10YW5nby13YXRlcm1hcmstdjIucG5n&mark-x=102&mark-y=265&m64=aHR0cHM6Ly9pbWFnZXMudGFuZ28udXMvc3RhdGljL2JsYW5rLnBuZz9tYXNrPWNvcm5lcnMmYm9yZGVyPTYlMkNGRjc0NDImdz05OTcmaD02MSZmaXQ9Y3JvcCZjb3JuZXItcmFkaXVzPTEw" style="border-radius: 8px; border: 1px solid #F4F2F7;" width="600" alt="Select the required block from Select HTML Item" />
</div>

<div><h3>4. Click on Save</h3>
<img src="https://images.tango.us/workflows/196d5909-5060-4564-b332-cfb65402a66e/steps/505fb517-5c70-47f9-b546-01dc0dd85435/73023423-ec38-4a6f-8cb5-21d92aa779ef.png?fm=png&crop=focalpoint&fit=crop&fp-x=0.1962&fp-y=0.8861&fp-z=2.6918&w=1200&border=2%2CF4F2F7&border-radius=8%2C8%2C8%2C8&border-radius-inner=8%2C8%2C8%2C8&blend-align=bottom&blend-mode=normal&blend-x=0&blend-w=1200&blend64=aHR0cHM6Ly9pbWFnZXMudGFuZ28udXMvc3RhdGljL21hZGUtd2l0aC10YW5nby13YXRlcm1hcmstdjIucG5n&mark-x=485&mark-y=601&m64=aHR0cHM6Ly9pbWFnZXMudGFuZ28udXMvc3RhdGljL2JsYW5rLnBuZz9tYXNrPWNvcm5lcnMmYm9yZGVyPTYlMkNGRjc0NDImdz0yMzEmaD0xNTcmZml0PWNyb3AmY29ybmVyLXJhZGl1cz0xMA%3D%3D" style="border-radius: 8px; border: 1px solid #F4F2F7;" width="600" alt="Click on Save" />
</div>

<br/>
<hr/>
<div>
<span>Created with </span><a href="https://tango.us?utm_source=magicCopy&utm_medium=magicCopy&utm_campaign=workflow%20export%20links" target="_blank" style="color: #256EFF">Tango.us
    </a>
</div>';

  $the_html_content_node = createHtmlItemNode($html_box_item->id(), 'Add HTML Content', $add_html);
  $book_html_content_node = createHtmlItemNode($book_box_item->id(), 'Add Book HTML Content', $add_book);
  $database_html_content_node = createHtmlItemNode($database_box_item->id(), 'Add Database HTML Content', $add_database);
  $media_html_content_node = createHtmlItemNode($media_box_item->id(), 'Add Media HTML Content', $add_media);
  $create_box_html_content_node = createHtmlItemNode($create_box_box_item->id(), 'Create Box HTML Content', $add_box);
  $create_guide_html_content_node = createHtmlItemNode($create_guide_box_item->id(), 'Create Guide HTML Content', $add_guide);
  $create_page_html_content_node = createHtmlItemNode($create_page_box_item->id(), 'Create Page HTML Content', $add_page);
  $reuse_guide_html_content_node = createHtmlItemNode($reuse_guide_box_item->id(), 'Reuse Guide HTML Content', $reuse_guide);
  $reuse_html_html_content_node = createHtmlItemNode($reuse_html_box_item->id(), 'Reuse HTML HTML Content', $reuse_html);
  $reuse_page_html_content_node = createHtmlItemNode($reuse_page_box_item->id(), 'Reuse Page HTML Content', $reuse_page);
  $reuse_database_html_content_node = createHtmlItemNode($reuse_database_box_item->id(), 'Reuse Database HTML Content', $reuse_database);
  $reuse_book_html_content_node = createHtmlItemNode($reuse_book_box_item->id(), 'Reuse Book HTML Content', $reuse_book);


  $add_html_node = $the_html_content_node->id();
  $reuse_html_node = $reuse_html_html_content_node->id();
  $add_book_node = $book_html_content_node->id();
  $reuse_book_node = $reuse_book_html_content_node->id();
  $add_database_node = $database_html_content_node->id();
  $reuse_database_node = $reuse_database_html_content_node->id();
  $add_media_node = $media_html_content_node->id();
  $add_guide_node = $create_guide_html_content_node->id();
  $reuse_guide_node = $reuse_guide_html_content_node->id();
  $add_guide_page_node = $create_page_html_content_node->id();
  $reuse_guide_page_node = $reuse_page_html_content_node->id();
  $add_box_node = $create_box_html_content_node->id();
  // reuse box needed left

  $the_html_content = createHtmlItemNode($html_box_item->id(), 'HTML Content', '<p><a href="/node/' . $add_html_node . '">"Add an HTML" tutorial</a></p>');
  $book_html_content = createHtmlItemNode($book_box_item->id(), 'Book HTML Content', '<p><a href="/node/' . $add_book_node . '">"Add a Book" tutorial</a></p>');
  $database_html_content = createHtmlItemNode($database_box_item->id(), 'Database HTML Content', '<p><a href="/node/' . $add_database_node . '">"Add a Database" tutorial</a></p>');
  $media_html_content = createHtmlItemNode($media_box_item->id(), 'Media HTML Content', '<p><a href="/node/' . $add_media_node . '">"Add a Media" tutorial</a></p>');
  $create_box_html_content = createHtmlItemNode($create_box_box_item->id(), 'Create Box HTML Content', '<p><a href="/node/' . $add_box_node . '">"Add a Box" tutorial</a></p>' );
  $create_guide_html_content = createHtmlItemNode($create_guide_box_item->id(), 'Create Guide HTML Content', '<p><a href="/node/' . $add_guide_node . '">"Add a Guide" tutorial</a></p>');
  $create_page_html_content = createHtmlItemNode($create_page_box_item->id(), 'Create Page HTML Content', '<p><a href="/node/' . $add_guide_page_node . '">"Add a Page" tutorial</a></p>');
  $reuse_guide_html_content = createHtmlItemNode($reuse_guide_box_item->id(), 'Reuse Guide HTML Content', '<p><a href="/node/' . $reuse_guide_node . '">"Reuse a Guide" tutorial</a></p>');
  $reuse_html_html_content = createHtmlItemNode($reuse_html_box_item->id(), 'Reuse HTML HTML Content', '<p><a href="/node/' . $reuse_html_node . '">"Reuse an HTML" tutorial</a></p>');
  $reuse_page_html_content = createHtmlItemNode($reuse_page_box_item->id(), 'Reuse Page HTML Content', '<p><a href="/node/' . $reuse_guide_page_node . '">"Reuse a Page" tutorial</a></p>');
  $reuse_database_html_content = createHtmlItemNode($reuse_database_box_item->id(), 'Reuse Database HTML Content', '<p><a href="/node/' . $reuse_database_node . '">"Reuse a Database" tutorial</a></p>');
  $reuse_book_html_content = createHtmlItemNode($reuse_book_box_item->id(), 'Reuse Book HTML Content', '<p><a href="/node/' . $reuse_book_node . '">"Reuse a Book" tutorial</a></p>');

  // Attach HTML items to box items
  attachChildNodes($html_box_item, 'field_html_item', [$the_html_content->id()]);
  attachChildNodes($book_box_item, 'field_html_item', [$book_html_content->id()]);
  attachChildNodes($database_box_item, 'field_html_item', [$database_html_content->id()]);
  attachChildNodes($media_box_item, 'field_html_item', [$media_html_content->id()]);
  attachChildNodes($create_box_box_item, 'field_html_item', [$create_box_html_content->id()]);
  attachChildNodes($create_guide_box_item, 'field_html_item', [$create_guide_html_content->id()]);
  attachChildNodes($create_page_box_item, 'field_html_item', [$create_page_html_content->id()]);
  attachChildNodes($reuse_guide_box_item, 'field_html_item', [$reuse_guide_html_content->id()]);
  attachChildNodes($reuse_html_box_item, 'field_html_item', [$reuse_html_html_content->id()]);
  attachChildNodes($reuse_page_box_item, 'field_html_item', [$reuse_page_html_content->id()]);
  attachChildNodes($reuse_database_box_item, 'field_html_item', [$reuse_database_html_content->id()]);
  attachChildNodes($reuse_book_box_item, 'field_html_item', [$reuse_book_html_content->id()]);


  // Update 'Guide Box' with the newly created 'Guide Box Items'
  attachChildNodes($html_guide_box, 'field_box_items', [$html_box_item->id()]);
  attachChildNodes($book_guide_box, 'field_box_items', [$book_box_item->id()]);
  attachChildNodes($database_guide_box, 'field_box_items', [$database_box_item->id()]);
  attachChildNodes($media_guide_box, 'field_box_items', [$media_box_item->id()]);
  attachChildNodes($create_box_guide_box, 'field_box_items', [$create_box_box_item->id()]);
  attachChildNodes($create_guide_box, 'field_box_items', [$create_guide_box_item->id()]);
  attachChildNodes($create_page_guide_box, 'field_box_items', [$create_page_box_item->id()]);
  attachChildNodes($reuse_guide_box, 'field_box_items', [$reuse_guide_box_item->id()]);
  attachChildNodes($reuse_html_guide_box, 'field_box_items', [$reuse_html_box_item->id()]);
  attachChildNodes($reuse_page_guide_box, 'field_box_items', [$reuse_page_box_item->id()]);
  attachChildNodes($reuse_database_guide_box, 'field_box_items', [$reuse_database_box_item->id()]);
  attachChildNodes($reuse_book_guide_box, 'field_box_items', [$reuse_book_box_item->id()]);


  // Update the 'Help Guide' with the new guide pages
  attachChildNodes($help_guide, 'field_child_pages', [
    $guide_page->id(),
    $guide_page_page->id(),
    $guide_box_page->id(),
    $html_page->id(),
    $book_page->id(),
    $database_page->id(),
    $media_page->id(),
  ]);

  $help_guide->set('status', 0);
  $help_guide->save();

  return [
    'help_guide_id' => $help_guide->id(),
    'add_html_page_id' => $html_page->id(),
    'html_guide_box_id' => $html_guide_box->id(),
    'html_box_item_id' => $html_box_item->id(),
    'html_content_id' => $the_html_content->id(),
    'add_book_page_id' => $book_page->id(),
    'book_guide_box_id' => $book_guide_box->id(),
    'book_box_item_id' => $book_box_item->id(),
    'book_html_content_id' => $book_html_content->id(),
    'add_database_page_id' => $book_page->id(),
    'database_guide_box_id' => $database_guide_box->id(),
    'database_box_item_id' => $database_box_item->id(),
    'database_html_content_id' => $database_html_content->id(),
    'add_media_page_id' => $media_page->id(),
    'media_guide_box_id' => $media_guide_box->id(),
    'media_box_item_id' => $media_box_item->id(),
    'media_html_content_id' => $media_html_content->id(),
    'create_box_page_id' => $guide_box_page->id(),
    'create_box_guide_box_id' => $create_box_guide_box->id(),
    'create_box_box_item_id' => $create_box_box_item->id(),
    'create_box_html_content_id' => $create_box_html_content->id(),
    'create_guide_page_id' => $guide_page->id(),
    'create_guide_box_id' => $create_guide_box->id(),
    'create_guide_box_item_id' => $create_guide_box_item->id(),
    'create_guide_html_content_id' => $create_guide_html_content->id(),
    'create_page_page_id' => $guide_page_page->id(),
    'create_page_guide_box_id' => $create_page_guide_box->id(),
    'create_page_box_item_id' => $create_page_box_item->id(),
    'create_page_html_content_id' => $create_page_html_content->id(),
    'reuse_guide_page_id' => $guide_page->id(),
    'reuse_guide_box_id' => $reuse_guide_box->id(),
    'reuse_guide_box_item_id' => $reuse_guide_box_item->id(),
    'reuse_guide_html_content_id' => $reuse_guide_html_content->id(),
    'reuse_html_page_id' => $html_page->id(),
    'reuse_html_guide_box_id' => $reuse_html_guide_box->id(),
    'reuse_html_box_item_id' => $reuse_html_box_item->id(),
    'reuse_html_html_content_id' => $reuse_html_html_content->id(),
    'reuse_page_page_id' => $guide_page_page->id(),
    'reuse_page_guide_box_id' => $reuse_page_guide_box->id(),
    'reuse_page_box_item_id' => $reuse_page_box_item->id(),
    'reuse_page_html_content_id' => $reuse_page_html_content->id(),
    'reuse_database_page_id' => $database_page->id(),
    'reuse_database_guide_box_id' => $reuse_database_guide_box->id(),
    'reuse_database_box_item_id' => $reuse_database_box_item->id(),
    'reuse_database_html_content_id' => $reuse_database_html_content->id(),
    'reuse_book_page_id' => $book_page->id(),
    'reuse_book_guide_box_id' => $reuse_book_guide_box->id(),
    'reuse_book_box_item_id' => $reuse_book_box_item->id(),
    'reuse_book_html_content_id' => $reuse_book_html_content->id(),
  ];
}


/**
 * Implements hook_entity_presave().
 */
function lgmsmodule_entity_presave(Drupal\Core\Entity\EntityInterface $entity) {
  if ($entity instanceof NodeInterface && $entity->bundle() == 'guide_database_item') {
    // Load the proxy prefix setting.
    $proxy_prefix = \Drupal::config('lgmsmodule.settings')->get('proxy_prefix');

    // Check if the 'field_make_proxy' is checked and the field exists.
    if ($entity->hasField('field_make_proxy') && $entity->get('field_make_proxy')->value && $entity->hasField('field_database_link')) {
      $items = $entity->get('field_database_link');
      foreach ($items as $item) {
        // Get the current value of the URL.
        $current_value = $item->uri;
        // If the proxy prefix is not already there, prepend it.
        if ($current_value !== NULL && strpos($current_value, $proxy_prefix) !== 0) {
          $item->uri = $proxy_prefix . $current_value;
        }
      }
    } elseif ($entity->hasField('field_database_link')) {
      // If the 'field_make_proxy' is not checked, ensure the proxy prefix is not there.
      $items = $entity->get('field_database_link');
      foreach ($items as $item) {
        // Get the current value of the URL.
        $current_value = $item->uri;
        // If the proxy prefix is there, remove it.
        if ($current_value !== NULL && strpos($current_value, $proxy_prefix) === 0) {
          $item->uri = substr($current_value, strlen($proxy_prefix));
        }
      }
    }
  }
}

function guide_validation(array &$form, FormStateInterface $form_state) {
  $hide_description = $form_state->getValue(['field_hide_description', 'value']);
  $description = $form_state->getValue(['field_description', 0, 'value']);

  // Check if hide_description is unchecked and description is empty.
  if (empty($hide_description) && empty($description)) {
    // Set an error for field_description since it's required when hide_description is unchecked.
    $form_state->setErrorByName('field_description', t('Description is required when it is not hidden.'));
  }
}

function database_validation(array &$form, FormStateInterface $form_state) {
  $hide_body = $form_state->getValue(['field_hide_body', 'value']);
  $body = $form_state->getValue(['field_database_body', 0, 'value']);

  // Check if hide_description is unchecked and description is empty.
  if (empty($hide_body) && empty($body)) {
    // Set an error for field_database_body since it's required when hide_body is unchecked.
    $form_state->setErrorByName('field_database_body', t('Body is required when it is not hidden.'));
  }


  $hide_description = $form_state->getValue(['field_hide_description', 'value']);
  $description = $form_state->getValue(['field_description', 0, 'value']);

  // Check if hide_description is unchecked and description is empty.
  if (empty($hide_description) && empty($description)) {
    // Set an error for field_description since it's required when hide_description is unchecked.
    $form_state->setErrorByName('field_description', t('Description is required when it is not hidden.'));
  }
}

/**
 * Custom validation handler for book nodes.
 */
function book_validation(array &$form, \Drupal\Core\Form\FormStateInterface $form_state) {
  // Get the value of the book type field.
  $book_type = $form_state->getValue(['field_book_type', 0, 'value']);

  // Validate based on the book type.
  if ($book_type === 'eBook') {
    // Check if field_book_pub_finder is filled for eBook.
    $pub_finder_uri = $form_state->getValue(['field_book_pub_finder', 0, 'uri']);
    $pub_finder_title = $form_state->getValue(['field_book_pub_finder', 0, 'title']);

    if (empty($pub_finder_uri) || empty($pub_finder_title)) {
      $form_state->setErrorByName('field_book_pub_finder', t('Both the URL and the link text for the Pub Finder field are required for eBooks.'));
    }
  } elseif ($book_type === 'print') {
    // Fields to check for 'print' book type.
    $fields_to_check = ['field_book_call_number', 'field_book_location'];
    foreach ($fields_to_check as $field_name) {
      $value = $form_state->getValue([$field_name, 0, 'value']);
      if (empty($value)) {
        // Field names are human-readable, but you can customize the message or use the field label.
        $form_state->setErrorByName($field_name, t('The @field field is required for print books.', ['@field' => $field_name]));
      }
    }

    // Check if field_book_cat_record is filled for print.
    $cat_record_uri = $form_state->getValue(['field_book_cat_record', 0, 'uri']);
    $cat_record_title = $form_state->getValue(['field_book_cat_record', 0, 'title']);

    if (empty($cat_record_uri) || empty($cat_record_title)) {
      $form_state->setErrorByName('field_book_pub_finder', t('Both the URL and the link text for the Cat Record field are required for Print.'));
    }
  }
}

function box_item_validation(array &$form, \Drupal\Core\Form\FormStateInterface $form_state) {
  $fields = [
    'field_html_item',
    'field_database_item',
    'field_book_item',
  ];

  $filledFields = 0;

  foreach ($fields as $fieldName) {
    // Assuming the use of entity_reference fields, adjust accordingly if needed
    $fieldValue = $form_state->getValue($fieldName);
    if (!empty($fieldValue) && !empty($fieldValue[0]['target_id'])) {
      $filledFields++;
    }
  }

  // Check the media field
  $fieldValue = $form_state->getValue('field_media_image');
  if (!empty($fieldValue) && !empty($fieldValue['selection'][0]['target_id'])){
    $filledFields++;
  }

  // Check if more than one field is filled
  if ($filledFields != 1) {
    foreach ($fields as $fieldName) {
      $form_state->setErrorByName($fieldName, t('Only one of Media, HTML Item, Database Item, or Book Item can be filled. Please clear the others.'));
    }
  }
}



/**
 * Implements hook_form_FORM_ID_alter() for node edit forms.
 */
function lgmsmodule_form_node_form_alter(&$form, FormStateInterface $form_state, $form_id) {
  /** @var \Drupal\node\NodeInterface $node */
  if ($form_id === 'node_guide_item_edit_form') {
    // Get the node entity being edited.
    $node = $form_state->getFormObject()->getEntity();

    // List of field machine names.
    $fields = [
      'field_database_item',
      'field_html_item',
      'field_book_item',
      'field_media_image',
    ];

    // Track if any field is filled.
    $any_field_filled = FALSE;

    foreach ($fields as $field_name) {
      // Check if the field is filled.
      if (!$node->$field_name->isEmpty()) {
        $any_field_filled = TRUE;
      } else {
        // Hide empty fields.
        $form[$field_name]['#access'] = FALSE;
      }
    }

    // Optional: if no fields are filled, decide on the default behavior.
    if (!$any_field_filled) {
      // Example: Show the first field if none are filled.
      foreach ($fields as $field_name) {
        $form[$field_name]['#access'] = TRUE;
      }
    }
  }

  if ($form_id === 'node_guide_page_edit_form') {
    // Get the node entity being edited.
    $node = $form_state->getFormObject()->getEntity();

    if ($node->hasField('field_reference_node')) {
      if($node->get('field_reference_node')->isEmpty()){
        $form['field_reference_node']['#access'] = FALSE;
      } else {
        // Loop through all form fields
        foreach ($form as $field_name => &$field) {
          // Check if it's a form field array
          if (is_array($field) && isset($field['#type'])) {
            // Disable the field
            $field['#disabled'] = TRUE;
          }
        }
      }
    }
  }

  if ($form_id === 'node_guide_edit_form' || $form_id === 'node_guide_form'){
    $form['field_description']['#states'] = [
      'invisible' => [
        ':input[name="field_hide_description[value]"]' => ['checked' => TRUE],
      ],
    ];

    $form['#validate'][] = 'guide_validation';
  }

  if ($form_id === 'node_guide_page_edit_form' || $form_id === 'node_guide_page_form'){
    $form['field_description']['#states'] = [
      'invisible' => [
        ':input[name="field_hide_description[value]"]' => ['checked' => TRUE],
      ],
    ];

    $form['#validate'][] = 'guide_validation';
  }

  if ($form_id === 'node_guide_item_edit_form' || $form_id === 'node_guide_item_form'){
    $form['#validate'][] = 'box_item_validation';
  }

  if ($form_id === 'node_guide_database_item_edit_form' || $form_id === 'node_guide_database_item_form'){
    $form['field_description']['#states'] = [
      'invisible' => [
        ':input[name="field_hide_description[value]"]' => ['checked' => TRUE],
      ],
    ];

    $form['field_database_body']['#states'] = [
      'invisible' => [
        ':input[name="field_hide_body[value]"]' => ['checked' => TRUE],
      ],
    ];

    $form['#validate'][] = 'database_validation';
  }

  if ($form_id === 'node_guide_book_item_edit_form' || $form_id === 'node_guide_book_item_form'){
    $form['field_book_call_number']['#states'] = [
      'visible' => [
        ':input[name="field_book_type"]' => ['value' => 'print'],
      ],
    ];

    $form['field_book_location']['#states'] = [
      'visible' => [
        ':input[name="field_book_type"]' => ['value' => 'print'],
      ],
    ];

    $form['field_book_cat_record']['#states'] = [
      'visible' => [
        ':input[name="field_book_type"]' => ['value' => 'print'],
      ],
    ];

    $form['field_book_pub_finder']['#states'] = [
      'visible' => [
        ':input[name="field_book_type"]' => ['value' => 'eBook'],
      ],
    ];

    $form['#validate'][] = 'book_validation';
  }

  $node = $form_state->getFormObject()->getEntity();

  // Check if the form is for a 'guide_database_item' node type.
  if ($node instanceof NodeInterface && $node->bundle() === 'guide_database_item') {
    // Load the proxy prefix setting.
    $proxy_prefix = \Drupal::config('lgmsmodule.settings')->get('proxy_prefix');

    $make_proxy = $node->get('field_make_proxy')->value;

    // Check if the field exists in the form and if the checkbox is checked.
    if (isset($form['field_database_link']) && $make_proxy) {
      $fieldWidget = &$form['field_database_link']['widget'];
      foreach (Element::children($fieldWidget) as $delta) {
        if (isset($fieldWidget[$delta]['uri']['#default_value'])) {
          $current_value = $fieldWidget[$delta]['uri']['#default_value'];

          $new_value = substr($current_value, strlen($proxy_prefix));
          $fieldWidget[$delta]['uri']['#default_value'] = $new_value;
        }
      }
    }
  }

  if ($node instanceof NodeInterface && $node->getType() === 'guide' || $node->getType() === 'guide_page'
    || $node->getType() === 'guide_box' || $node->getType() === 'guide_item' || $node->getType() === 'guide_html_item'
    || $node->getType() === 'guide_book_item' || $node->getType() === 'guide_database_item') {
    // Uncheck 'Promoted to front page' by default.
    $form['promote']['widget']['value']['#default_value'] = FALSE;
  }
}

function update_referencing_guide_pages($updated_guide_page) {
  $updated_guide_page_id = $updated_guide_page->id();

  // Query to find all guide pages that reference the updated guide page.
  $query = \Drupal::entityQuery('node')
    ->condition('type', 'guide_page')
    ->condition('field_reference_node', $updated_guide_page_id)
    ->accessCheck(false);
  $result = $query->execute();

  // Load and update the referencing guide pages.
  if (!empty($result)) {
    $referencing_guide_pages = Node::loadMultiple($result);

    foreach ($referencing_guide_pages as $guide_page) {
      $guide_page->set('title', $updated_guide_page->label());
      $guide_page->set('field_description', $updated_guide_page->get('field_description')->value);
      $guide_page->set('field_child_boxes', $updated_guide_page->get('field_child_boxes')->referencedEntities());
      $guide_page->set('field_hide_description', $updated_guide_page->get('field_hide_description')->value);

      if (!$updated_guide_page->isPublished()){
        $guide_page->set('status', $updated_guide_page->isPublished());
      }

      $guide_page->save();
    }
  }
}

/**
 * @throws EntityStorageException
 */
function disable_field($id, $field): void
{
  // Load the content type
  $content_type = NodeType::load($id);
  if ($content_type) {
    // Disable the field
    $content_type->set($field, FALSE);
    $content_type->save();
  }
}


/**
 * Implements hook_uninstall().
 * @throws EntityStorageException
 */
function lgmsModule_uninstall(): void
{
  // Delete the Guide Type taxonomy vocabulary and its terms.
  delete_taxonomies('LGMS_Guide_Type');

  // Delete the Guide Subject taxonomy vocabulary and its terms.
  delete_taxonomies('LGMS_Guide_Subject');

  // Delete the Guide Group taxonomy vocabulary and its terms.
  delete_taxonomies('LGMS_Guide_Group');

  // Delete the Guide Book Type vocabulary and its terms.
  delete_taxonomies('LGMS_Guide_Book_Type');

  // Delete field storages.
  delete_field_storage('field_lgms_guide_subject');
  delete_field_storage('field_lgms_guide_type');
  delete_field_storage('field_lgms_guide_group');
  delete_field_storage('field_lgms_guide_subject');
  delete_field_storage('field_lgms_guide_type');
  delete_field_storage('field_lgms_guide_group');
  delete_field_storage('field_guide_description');
  delete_field_storage('field_parent_guide');
  delete_field_storage('field_parent_node');
  delete_field_storage('field_description');
  delete_field_storage('field_text_box_item');
  delete_field_storage('field_database_link');
  delete_field_storage('field_database_body');
  delete_field_storage('field_lgms_first_name');
  delete_field_storage('field_lgms_last_name');
  delete_field_storage('field_lgms_phone_number');
  delete_field_storage('field_db_guide_subject');
  delete_field_storage('field_book_author_or_editor');
  delete_field_storage('field_book_publisher');
  delete_field_storage('field_book_year');
  delete_field_storage('field_book_edition');
  delete_field_storage('field_book_cover_picture');
  delete_field_storage('field_book_url');
  delete_field_storage('field_book_description');
  delete_field_storage('field_book_type');
  delete_field_storage('field_book_call_number');
  delete_field_storage('field_book_location');
  delete_field_storage('field_book_cat_record');
  delete_field_storage('field_book_pub_finder');
  delete_field_storage('field_book_item');

  $content_type = NodeType::load('guide');
  $content_type?->delete();

  $content_type = NodeType::load('guide_page');
  $content_type?->delete();

  $content_type = NodeType::load('guide_box');
  $content_type?->delete();


  $content_type = NodeType::load('guide_item');
  $content_type?->delete();

  $content_type = NodeType::load('guide_html_item');
  $content_type?->delete();

  $content_type = NodeType::load('guide_database_item');
  $content_type?->delete();

  $content_type = NodeType::load('guide_book_item');
  $content_type?->delete();

  $view_id = 'lgms_databases';
  $view = View::load($view_id);
  $view?->delete();

  $view_id = 'lgms_all_guides_table';
  $view = View::load($view_id);
  $view?->delete();

  $view_id = 'lgms_dashboard_table';
  $view = View::load($view_id);
  $view?->delete();
}

/**
 * Deletes a Taxonomy and its terms.
 * @throws EntityStorageException
 */
function delete_taxonomies($vocab_machine_name): void
{
  $vocabulary = Vocabulary::load($vocab_machine_name);
  if ($vocabulary) {
    try {
      $terms = \Drupal::entityTypeManager()
        ->getStorage('taxonomy_term')
        ->loadByProperties(['vid' => $vocab_machine_name]);

      foreach ($terms as $term) {
        $term->delete();
      }
    } catch (InvalidPluginDefinitionException|PluginNotFoundException $e) {
    }
    $vocabulary->delete();
  }
}

/**
 * Deletes storage Fields
 * @throws EntityStorageException
 */
function delete_field_storage($field_storage_name): void
{
  $field_storage = FieldStorageConfig::load($field_storage_name);
  $field_storage?->delete();
}
